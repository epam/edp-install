<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://epam.github.io/edp-install/user-guide/pipeline-framework/ rel=canonical><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.4.0"><title>EDP Pipeline Framework - EPAM Delivery Platform</title><link rel=stylesheet href=../../assets/stylesheets/main.69437709.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-7ZV6PJ2LSP"),document.addEventListener("DOMContentLoaded",function(){if(document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document.forms.feedback){var e,a=document.forms.feedback;for(e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}"undefined"!=typeof location$&&location$.subscribe(function(e){n("config","G-7ZV6PJ2LSP",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-7ZV6PJ2LSP",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=cyan data-md-color-accent=blue> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#edp-pipeline-framework class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button class="md-banner__button md-icon" aria-label="Don't show this again"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> EDP Team Supports Ukraine ðŸ‡ºðŸ‡¦<br> In solidarity, we ask that you consider financially supporting the organizations below:<br> <a href=https://epamuafund.pinkaloo.com/causes/159bdd2f71854adf8ed5251fe26d2fe0 target=_blank>EPAMâ€™s Global Partners for the Ukraine Humanitarian Crisis</a> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="EPAM Delivery Platform" class="md-header__button md-logo" aria-label="EPAM Delivery Platform" data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> EPAM Delivery Platform </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> EDP Pipeline Framework </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=cyan data-md-color-accent=blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary data-md-color-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/epam/edp-install title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Overview </a> </li> <li class=md-tabs__item> <a href=../../features/ class=md-tabs__link> Basic Concepts </a> </li> <li class=md-tabs__item> <a href=../../getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../operator-guide/ class=md-tabs__link> Operator Guide </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> User Guide </a> </li> <li class=md-tabs__item> <a href=../../developer-guide/ class=md-tabs__link> Developer Guide </a> </li> <li class=md-tabs__item> <a href=../../roadmap/ class=md-tabs__link> RoadMap </a> </li> <li class=md-tabs__item> <a href=../../use-cases/ class=md-tabs__link> Use Cases </a> </li> <li class=md-tabs__item> <a href=../../faq/ class=md-tabs__link> FAQ </a> </li> <li class=md-tabs__item> <a href=../../glossary/ class=md-tabs__link> Glossary </a> </li> <li class=md-tabs__item> <a href=https://github.com/epam/edp-install/blob/master/RELEASES.md class=md-tabs__link> Releases â§‰ </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="EPAM Delivery Platform" class="md-nav__button md-logo" aria-label="EPAM Delivery Platform" data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> EPAM Delivery Platform </label> <div class=md-nav__source> <a href=https://github.com/epam/edp-install title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../features/ class=md-nav__link> Basic Concepts </a> </li> <li class=md-nav__item> <a href=../../getting-started/ class=md-nav__link> Getting Started </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Operator Guide <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Operator Guide" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Operator Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Installation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Installation data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_1 type=checkbox id=__nav_4_2_1> <label class=md-nav__link for=__nav_4_2_1> Prerequisites <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Prerequisites data-md-level=3> <label class=md-nav__title for=__nav_4_2_1> <span class="md-nav__icon md-icon"></span> Prerequisites </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/install-ingress-nginx/ class=md-nav__link> Install NGINX Ingress Controller </a> </li> <li class=md-nav__item> <a href=../../operator-guide/install-keycloak/ class=md-nav__link> Install Keycloak </a> </li> <li class=md-nav__item> <a href=../../operator-guide/install-defectdojo/ class=md-nav__link> Install DefectDojo </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_1_4 type=checkbox id=__nav_4_2_1_4> <label class=md-nav__link for=__nav_4_2_1_4> Kiosk <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Kiosk data-md-level=4> <label class=md-nav__title for=__nav_4_2_1_4> <span class="md-nav__icon md-icon"></span> Kiosk </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/edp-kiosk-usage/ class=md-nav__link> EDP Kiosk Usage </a> </li> <li class=md-nav__item> <a href=../../operator-guide/install-kiosk/ class=md-nav__link> Set Up Kiosk </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../operator-guide/kubernetes-cluster-settings/ class=md-nav__link> Set Up Kubernetes </a> </li> <li class=md-nav__item> <a href=../../operator-guide/openshift-cluster-settings/ class=md-nav__link> Set Up OpenShift </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../operator-guide/install-edp/ class=md-nav__link> Install EDP </a> </li> <li class=md-nav__item> <a href=../../operator-guide/install-via-helmfile/ class=md-nav__link> Install via Helmfile </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Configuration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Configuration data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/add-other-code-language/ class=md-nav__link> Add Other Code Language </a> </li> <li class=md-nav__item> <a href=../../operator-guide/import-strategy/ class=md-nav__link> Enable VCS Import Strategy </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3 type=checkbox id=__nav_4_3_3> <label class=md-nav__link for=__nav_4_3_3> Manage Jenkins Pipelines <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Manage Jenkins Pipelines" data-md-level=3> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> Manage Jenkins Pipelines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/overview-manage-jenkins-pipelines/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../operator-guide/manage-jenkins-ci-job-provision/ class=md-nav__link> Manage Jenkins CI Pipeline Job Provisioner </a> </li> <li class=md-nav__item> <a href=../../operator-guide/manage-jenkins-cd-job-provision/ class=md-nav__link> Manage Jenkins CD Pipeline Job Provisioner </a> </li> <li class=md-nav__item> <a href=../../operator-guide/delete-jenkins-job-provision/ class=md-nav__link> Delete Jenkins Job Provision </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Integration data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_1 type=checkbox id=__nav_4_4_1> <label class=md-nav__link for=__nav_4_4_1> AWS Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="AWS Integration" data-md-level=3> <label class=md-nav__title for=__nav_4_4_1> <span class="md-nav__icon md-icon"></span> AWS Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/waf-tf-configuration/ class=md-nav__link> Configure AWS WAF With Terraform </a> </li> <li class=md-nav__item> <a href=../../operator-guide/enable-irsa/ class=md-nav__link> Associate IAM Roles With Service Accounts </a> </li> <li class=md-nav__item> <a href=../../operator-guide/kaniko-irsa/ class=md-nav__link> IAM Roles for Kaniko Service Accounts </a> </li> <li class=md-nav__item> <a href=../../operator-guide/velero-irsa/ class=md-nav__link> IAM Roles for Velero Service Accounts </a> </li> <li class=md-nav__item> <a href=../../operator-guide/loki-irsa/ class=md-nav__link> IAM Roles for Loki Service Accounts </a> </li> <li class=md-nav__item> <a href=../../operator-guide/configure-keycloak-oidc-eks/ class=md-nav__link> EKS OIDC With Keycloak </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_2 type=checkbox id=__nav_4_4_2> <label class=md-nav__link for=__nav_4_4_2> Jira Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Jira Integration" data-md-level=3> <label class=md-nav__title for=__nav_4_4_2> <span class="md-nav__icon md-icon"></span> Jira Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/jira-integration/ class=md-nav__link> Adjust Jira Integration </a> </li> <li class=md-nav__item> <a href=../../operator-guide/jira-gerrit-integration/ class=md-nav__link> Adjust VCS Integration With Jira </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_3 type=checkbox id=__nav_4_4_3> <label class=md-nav__link for=__nav_4_4_3> GitHub Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="GitHub Integration" data-md-level=3> <label class=md-nav__title for=__nav_4_4_3> <span class="md-nav__icon md-icon"></span> GitHub Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/github-integration/ class=md-nav__link> GitHub Integration </a> </li> <li class=md-nav__item> <a href=../../operator-guide/github-debug-webhooks/ class=md-nav__link> Debug GitHub Webhooks in Jenkins </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_4 type=checkbox id=__nav_4_4_4> <label class=md-nav__link for=__nav_4_4_4> GitLab Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="GitLab Integration" data-md-level=3> <label class=md-nav__title for=__nav_4_4_4> <span class="md-nav__icon md-icon"></span> GitLab Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/gitlab-integration/ class=md-nav__link> GitLab Integration </a> </li> <li class=md-nav__item> <a href=../../operator-guide/gitlabci-integration/ class=md-nav__link> Adjust GitLab CI Tool </a> </li> <li class=md-nav__item> <a href=../../operator-guide/gitlab-debug-webhooks/ class=md-nav__link> Debug GitLab Webhooks in Jenkins </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../operator-guide/perf-integration/ class=md-nav__link> Perf Server Integration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5> Platform Capabilities <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Platform Capabilities" data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Platform Capabilities </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_1 type=checkbox id=__nav_4_5_1> <label class=md-nav__link for=__nav_4_5_1> GitOps <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=GitOps data-md-level=3> <label class=md-nav__title for=__nav_4_5_1> <span class="md-nav__icon md-icon"></span> GitOps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/install-argocd/ class=md-nav__link> Install Argo CD </a> </li> <li class=md-nav__item> <a href=../../operator-guide/argocd-integration/ class=md-nav__link> Argo CD Integration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_2 type=checkbox id=__nav_4_5_2> <label class=md-nav__link for=__nav_4_5_2> Secrets Management <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Secrets Management" data-md-level=3> <label class=md-nav__title for=__nav_4_5_2> <span class="md-nav__icon md-icon"></span> Secrets Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/install-external-secrets-operator/ class=md-nav__link> Install External Secrets Operator </a> </li> <li class=md-nav__item> <a href=../../operator-guide/external-secrets-operator-integration/ class=md-nav__link> External Secrets Operator Integration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_3 type=checkbox id=__nav_4_5_3> <label class=md-nav__link for=__nav_4_5_3> Static Application Security Testing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Static Application Security Testing" data-md-level=3> <label class=md-nav__title for=__nav_4_5_3> <span class="md-nav__icon md-icon"></span> Static Application Security Testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/overview-sast/ class=md-nav__link> Static Application Security Testing Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_3_2 type=checkbox id=__nav_4_5_3_2> <label class=md-nav__link for=__nav_4_5_3_2> Scanners <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Scanners data-md-level=4> <label class=md-nav__title for=__nav_4_5_3_2> <span class="md-nav__icon md-icon"></span> Scanners </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/add-security-scanner/ class=md-nav__link> Add Security Scanner </a> </li> <li class=md-nav__item> <a href=../../operator-guide/sast-scaner-semgrep/ class=md-nav__link> Semgrep </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_4 type=checkbox id=__nav_4_5_4> <label class=md-nav__link for=__nav_4_5_4> Backup With Velero <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Backup With Velero" data-md-level=3> <label class=md-nav__title for=__nav_4_5_4> <span class="md-nav__icon md-icon"></span> Backup With Velero </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/install-velero/ class=md-nav__link> Install Velero </a> </li> <li class=md-nav__item> <a href=../../operator-guide/restore-edp-with-velero/ class=md-nav__link> Restore EDP Tenant With Velero </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5 type=checkbox id=__nav_4_5_5> <label class=md-nav__link for=__nav_4_5_5> Logging <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Logging data-md-level=3> <label class=md-nav__title for=__nav_4_5_5> <span class="md-nav__icon md-icon"></span> Logging </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/install-loki/ class=md-nav__link> Install Grafana Loki </a> </li> <li class=md-nav__item> <a href=../../operator-guide/multitenant-logging/ class=md-nav__link> Multitenant Logging </a> </li> <li class=md-nav__item> <a href=../../operator-guide/schedule-pods-restart/ class=md-nav__link> Schedule Pods Restart </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6 type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6> Upgrade <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Upgrade data-md-level=2> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Upgrade </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1 type=checkbox id=__nav_4_6_1> <label class=md-nav__link for=__nav_4_6_1> EDP on Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="EDP on Kubernetes" data-md-level=3> <label class=md-nav__title for=__nav_4_6_1> <span class="md-nav__icon md-icon"></span> EDP on Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/upgrade-edp-2.7.8-to-2.8.4/ class=md-nav__link> Upgrade EDP v.2.7.8 to v.2.8.4 </a> </li> <li class=md-nav__item> <a href=../../operator-guide/upgrade-edp-2.8.4-to-2.9.0/ class=md-nav__link> Upgrade EDP v.2.8.4 to v.2.9.0 </a> </li> <li class=md-nav__item> <a href=../../operator-guide/upgrade-edp-2.9.0-to-2.10.2/ class=md-nav__link> Upgrade EDP v.2.9.0 to v.2.10.2 </a> </li> <li class=md-nav__item> <a href=../../operator-guide/upgrade-edp-2.10.x-to-2.11.x/ class=md-nav__link> Upgrade EDP v.2.10.x to v.2.11.x </a> </li> <li class=md-nav__item> <a href=../../operator-guide/upgrade-edp-2.11.x-to-2.12.x/ class=md-nav__link> Upgrade EDP v.2.11.x to v.2.12.x </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_7 type=checkbox id=__nav_4_7> <label class=md-nav__link for=__nav_4_7> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=2> <label class=md-nav__title for=__nav_4_7> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operator-guide/deploy-aws-eks/ class=md-nav__link> Deploy AWS EKS Cluster </a> </li> <li class=md-nav__item> <a href=../../operator-guide/deploy-okd/ class=md-nav__link> Deploy OKD 4.9 Cluster </a> </li> <li class=md-nav__item> <a href=../../operator-guide/deploy-okd-4.10/ class=md-nav__link> Deploy OKD 4.10 Cluster </a> </li> <li class=md-nav__item> <a href=../../operator-guide/add-jenkins-agent/ class=md-nav__link> Manage Jenkins Agent </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> User Guide <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="User Guide" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2> Application <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Application data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Application </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../application/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../add-application/ class=md-nav__link> Add Application </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_3 type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3> Autotest <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Autotest data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Autotest </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../autotest/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../add-autotest/ class=md-nav__link> Add Autotests </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_4 type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4> Library <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Library data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Library </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../library/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../add-library/ class=md-nav__link> Add Library </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5 type=checkbox id=__nav_5_5 checked> <label class=md-nav__link for=__nav_5_5> Pipelines <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Pipelines data-md-level=2> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Pipelines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cicd-overview/ class=md-nav__link> EDP CI/CD Overview </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> EDP Pipeline Framework <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> EDP Pipeline Framework </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#edp-pipeline-framework-overview class=md-nav__link> EDP Pipeline Framework Overview </a> </li> <li class=md-nav__item> <a href=#cicd-jobs-comparison class=md-nav__link> CI/CD Jobs Comparison </a> </li> <li class=md-nav__item> <a href=#context class=md-nav__link> Context </a> </li> <li class=md-nav__item> <a href=#annotations-for-cicd-stages class=md-nav__link> Annotations for CI/CD Stages </a> </li> <li class=md-nav__item> <a href=#code-review-pipeline class=md-nav__link> Code Review Pipeline </a> <nav class=md-nav aria-label="Code Review Pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#code-review-pipeline-overview class=md-nav__link> Code Review Pipeline Overview </a> </li> <li class=md-nav__item> <a href=#code-review-pipeline-stages class=md-nav__link> Code Review Pipeline Stages </a> </li> <li class=md-nav__item> <a href=#how-to-redefine-or-extend-the-edp-pipeline-stages-library class=md-nav__link> How to Redefine or Extend the EDP Pipeline Stages Library </a> </li> <li class=md-nav__item> <a href=#using-edp-stages-library-in-the-pipeline class=md-nav__link> Using EDP Stages Library in the Pipeline </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#build-pipeline class=md-nav__link> Build Pipeline </a> <nav class=md-nav aria-label="Build Pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#build-pipeline-overview class=md-nav__link> Build Pipeline Overview </a> </li> <li class=md-nav__item> <a href=#build-pipeline-stages class=md-nav__link> Build Pipeline Stages </a> </li> <li class=md-nav__item> <a href=#how-to-redefine-or-extend-edp-pipeline-stages-library class=md-nav__link> How to Redefine or Extend EDP Pipeline Stages Library </a> </li> <li class=md-nav__item> <a href=#using-edp-stages-library-in-the-pipeline_1 class=md-nav__link> Using EDP Stages Library in the Pipeline </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#edp-library-stages-description class=md-nav__link> EDP Library Stages Description </a> </li> <li class=md-nav__item> <a href=#edp-stages-framework class=md-nav__link> EDP Stages Framework </a> </li> <li class=md-nav__item> <a href=#deploy-pipeline class=md-nav__link> Deploy Pipeline </a> <nav class=md-nav aria-label="Deploy Pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#edp-library-pipelines-description class=md-nav__link> EDP Library Pipelines Description </a> </li> <li class=md-nav__item> <a href=#edp-library-stages-description_1 class=md-nav__link> EDP Library Stages Description </a> </li> <li class=md-nav__item> <a href=#deploy-pipeline-stages class=md-nav__link> Deploy Pipeline Stages </a> </li> <li class=md-nav__item> <a href=#how-to-redefine-or-extend-edp-pipeline-stages-library_1 class=md-nav__link> How to Redefine or Extend EDP Pipeline Stages Library </a> </li> <li class=md-nav__item> <a href=#using-edp-library-stages-in-the-pipeline class=md-nav__link> Using EDP Library Stages in the Pipeline </a> </li> <li class=md-nav__item> <a href=#related-articles class=md-nav__link> Related Articles </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../add-custom-global-pipeline-lib/ class=md-nav__link> Add Custom Pipeline Library </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5_4 type=checkbox id=__nav_5_5_4> <label class=md-nav__link for=__nav_5_5_4> CI Pipeline <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="CI Pipeline" data-md-level=3> <label class=md-nav__title for=__nav_5_5_4> <span class="md-nav__icon md-icon"></span> CI Pipeline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ci-pipeline-details/ class=md-nav__link> CI Pipeline Details </a> </li> <li class=md-nav__item> <a href=../code-review-pipeline/ class=md-nav__link> Code Review Pipeline </a> </li> <li class=md-nav__item> <a href=../build-pipeline/ class=md-nav__link> Build Pipeline </a> </li> <li class=md-nav__item> <a href=../customize-ci-pipeline/ class=md-nav__link> Customize CI Pipeline </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5_4_5 type=checkbox id=__nav_5_5_4_5> <label class=md-nav__link for=__nav_5_5_4_5> Stages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Stages data-md-level=4> <label class=md-nav__title for=__nav_5_5_4_5> <span class="md-nav__icon md-icon"></span> Stages </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../pipeline-stages/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../dockerfile-stages/ class=md-nav__link> Use Dockerfile Linters for Code Review Pipeline </a> </li> <li class=md-nav__item> <a href=../ecr-to-docker-stages/ class=md-nav__link> Promote Docker Images From ECR to Docker Hub </a> </li> <li class=md-nav__item> <a href=../helm-stages/ class=md-nav__link> Helm Chart Testing and Documentation Tools </a> </li> <li class=md-nav__item> <a href=../opa-stages/ class=md-nav__link> Use Open Policy Agent </a> </li> <li class=md-nav__item> <a href=../terraform-stages/ class=md-nav__link> CI Pipeline for Terraform </a> </li> <li class=md-nav__item> <a href=../container-stages/ class=md-nav__link> CI Pipeline for Container </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5_5 type=checkbox id=__nav_5_5_5> <label class=md-nav__link for=__nav_5_5_5> CD Pipeline <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="CD Pipeline" data-md-level=3> <label class=md-nav__title for=__nav_5_5_5> <span class="md-nav__icon md-icon"></span> CD Pipeline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cd-pipeline-details/ class=md-nav__link> CD Pipeline Details </a> </li> <li class=md-nav__item> <a href=../add-cd-pipeline/ class=md-nav__link> Add CD Pipeline </a> </li> <li class=md-nav__item> <a href=../customize-cd-pipeline/ class=md-nav__link> Customize CD Pipeline </a> </li> <li class=md-nav__item> <a href=../prepare-for-release/ class=md-nav__link> Prepare for Release </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5_5_5 type=checkbox id=__nav_5_5_5_5> <label class=md-nav__link for=__nav_5_5_5_5> Stages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Stages data-md-level=4> <label class=md-nav__title for=__nav_5_5_5_5> <span class="md-nav__icon md-icon"></span> Stages </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../copy-shared-secrets/ class=md-nav__link> Copy Shared Secrets </a> </li> <li class=md-nav__item> <a href=../helm-release-deletion/ class=md-nav__link> Helm Release Deletion </a> </li> <li class=md-nav__item> <a href=../semi-auto-deploy/ class=md-nav__link> Semi Auto Deploy </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../d-d-diagram/ class=md-nav__link> Delivery Dashboard Diagram </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Developer Guide <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developer Guide" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Developer Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer-guide/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../developer-guide/local-development/ class=md-nav__link> Local Development </a> </li> <li class=md-nav__item> <a href=../../developer-guide/rest-api/ class=md-nav__link> EDP API </a> </li> <li class=md-nav__item> <a href=../../developer-guide/mk-docs-development/ class=md-nav__link> Documentation Flow </a> </li> <li class=md-nav__item> <a href=../../developer-guide/edp-workflow/ class=md-nav__link> EDP Project Rules. Working Process </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../roadmap/ class=md-nav__link> RoadMap </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Use Cases <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Use Cases" data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Use Cases </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../use-cases/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../use-cases/autotest-as-quality-gate/ class=md-nav__link> Autotest as Quality Gate </a> </li> <li class=md-nav__item> <a href=../../use-cases/promotion-procedure/ class=md-nav__link> Promote Application in CD Pipeline </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../faq/ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=../../glossary/ class=md-nav__link> Glossary </a> </li> <li class=md-nav__item> <a href=https://github.com/epam/edp-install/blob/master/RELEASES.md class=md-nav__link> Releases â§‰ </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#edp-pipeline-framework-overview class=md-nav__link> EDP Pipeline Framework Overview </a> </li> <li class=md-nav__item> <a href=#cicd-jobs-comparison class=md-nav__link> CI/CD Jobs Comparison </a> </li> <li class=md-nav__item> <a href=#context class=md-nav__link> Context </a> </li> <li class=md-nav__item> <a href=#annotations-for-cicd-stages class=md-nav__link> Annotations for CI/CD Stages </a> </li> <li class=md-nav__item> <a href=#code-review-pipeline class=md-nav__link> Code Review Pipeline </a> <nav class=md-nav aria-label="Code Review Pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#code-review-pipeline-overview class=md-nav__link> Code Review Pipeline Overview </a> </li> <li class=md-nav__item> <a href=#code-review-pipeline-stages class=md-nav__link> Code Review Pipeline Stages </a> </li> <li class=md-nav__item> <a href=#how-to-redefine-or-extend-the-edp-pipeline-stages-library class=md-nav__link> How to Redefine or Extend the EDP Pipeline Stages Library </a> </li> <li class=md-nav__item> <a href=#using-edp-stages-library-in-the-pipeline class=md-nav__link> Using EDP Stages Library in the Pipeline </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#build-pipeline class=md-nav__link> Build Pipeline </a> <nav class=md-nav aria-label="Build Pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#build-pipeline-overview class=md-nav__link> Build Pipeline Overview </a> </li> <li class=md-nav__item> <a href=#build-pipeline-stages class=md-nav__link> Build Pipeline Stages </a> </li> <li class=md-nav__item> <a href=#how-to-redefine-or-extend-edp-pipeline-stages-library class=md-nav__link> How to Redefine or Extend EDP Pipeline Stages Library </a> </li> <li class=md-nav__item> <a href=#using-edp-stages-library-in-the-pipeline_1 class=md-nav__link> Using EDP Stages Library in the Pipeline </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#edp-library-stages-description class=md-nav__link> EDP Library Stages Description </a> </li> <li class=md-nav__item> <a href=#edp-stages-framework class=md-nav__link> EDP Stages Framework </a> </li> <li class=md-nav__item> <a href=#deploy-pipeline class=md-nav__link> Deploy Pipeline </a> <nav class=md-nav aria-label="Deploy Pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#edp-library-pipelines-description class=md-nav__link> EDP Library Pipelines Description </a> </li> <li class=md-nav__item> <a href=#edp-library-stages-description_1 class=md-nav__link> EDP Library Stages Description </a> </li> <li class=md-nav__item> <a href=#deploy-pipeline-stages class=md-nav__link> Deploy Pipeline Stages </a> </li> <li class=md-nav__item> <a href=#how-to-redefine-or-extend-edp-pipeline-stages-library_1 class=md-nav__link> How to Redefine or Extend EDP Pipeline Stages Library </a> </li> <li class=md-nav__item> <a href=#using-edp-library-stages-in-the-pipeline class=md-nav__link> Using EDP Library Stages in the Pipeline </a> </li> <li class=md-nav__item> <a href=#related-articles class=md-nav__link> Related Articles </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=edp-pipeline-framework>EDP Pipeline Framework<a class=headerlink href=#edp-pipeline-framework title="Permanent link">âš“ï¸Ž</a></h1> <p>This chapter provides detailed information about the EDP pipeline framework concepts and parts, as well as the accurate data about the <code>Code Review</code>, <code>Build</code> and <code>Deploy</code> pipelines with the respective stages.</p> <h2 id=edp-pipeline-framework-overview>EDP Pipeline Framework Overview<a class=headerlink href=#edp-pipeline-framework-overview title="Permanent link">âš“ï¸Ž</a></h2> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The whole logic is applied to <strong>Jenkins</strong> as it is the main tool for the CI/CD processes organization.</p> </div> <p> <figure><a data-caption="EDP pipeline framework basic" data-fancybox=gallery href=../../assets/user-guide/edp-pipeline-framework-basic.png><img alt="EDP pipeline framework basic" src=../../assets/user-guide/edp-pipeline-framework-basic.png title="EDP pipeline framework basic" width=600px></a><figcaption>EDP pipeline framework basic</figcaption> </figure> </p> <p>The general EDP Pipeline Framework consists of several parts:</p> <ul> <li><strong>Jenkinsfile</strong> - a text file that keeps the definition of a Jenkins Pipeline and is checked into source control. Every Job has its Jenkinsfile stored in the specific application repository and in Jenkins as the plain text. The behavior logic of the pipelines can be customized easily by modifying a source code which is always copied to the EDP repository after the EDP installation.</li> </ul> <p> <figure><a data-caption="Jenkinsfile example" data-fancybox=gallery href=../../assets/user-guide/jenkinsfile-example.png><img alt="Jenkinsfile example" src=../../assets/user-guide/jenkinsfile-example.png title="Jenkinsfile example" width=600px></a><figcaption>Jenkinsfile example</figcaption> </figure> </p> <ul> <li><strong>Loading Shared Libraries</strong> - a part where every job loads libraries with the help of the shared libraries mechanism for Jenkins that allows to create reproducible pipelines, write them uniformly, and manage the update process. There are two main libraries: <a href=https://github.com/epam/edp-library-pipelines/blob/master/README.md#edp-library-pipelines>EDP Pipelines</a> with the common logic described for the main pipelines Code Review, Build, Deploy pipelines and <a href=https://github.com/epam/edp-library-stages#edp-library-stages>EDP Stages</a> library that keeps the description of the stages for every pipeline.</li> </ul> <ul> <li><strong>Run Stages</strong> - a part where the predefined default stages are launched.</li> </ul> <p> <figure><a data-caption="Pipeline script" data-fancybox=gallery href=../../assets/user-guide/pipeline-script.png><img alt="Pipeline script" src=../../assets/user-guide/pipeline-script.png title="Pipeline script" width=600px></a><figcaption>Pipeline script</figcaption> </figure> </p> <h2 id=cicd-jobs-comparison>CI/CD Jobs Comparison<a class=headerlink href=#cicd-jobs-comparison title="Permanent link">âš“ï¸Ž</a></h2> <p>Explore the CI and CD job comparison. Please note that the dynamic stages order can be changed, meanwhile, the predefined stages order in the reference pipeline cannot be changed, i.e. only the predefined stages set can be run.</p> <p> <figure><a data-caption="CI/CD jobs comparison" data-fancybox=gallery href=../../assets/user-guide/ci-cd-jobs-comparison.png><img alt="CI/CD jobs comparison" src=../../assets/user-guide/ci-cd-jobs-comparison.png title="CI/CD jobs comparison" width=600px></a><figcaption>CI/CD jobs comparison</figcaption> </figure> </p> <h2 id=context>Context<a class=headerlink href=#context title="Permanent link">âš“ï¸Ž</a></h2> <p><strong>Context</strong> - a variable that stores and transfers all necessary parameters between stages that are used by pipeline during performing.</p> <ol> <li>The context type is "Map".</li> <li>Each stage has input and output context.</li> <li>Each stage has a mandatory input context.</li> </ol> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If the input context isn't transferred, the stage will be failed.</p> </div> <h2 id=annotations-for-cicd-stages>Annotations for CI/CD Stages<a class=headerlink href=#annotations-for-cicd-stages title="Permanent link">âš“ï¸Ž</a></h2> <p>Annotation for CI Stages:</p> <ul> <li>The annotation type is "Map";</li> <li>The annotation consists of the name, buildTool, and codebaseType.</li> </ul> <p>Annotation for CD Stages:</p> <ul> <li>The annotation type is "Map";</li> <li>The annotation consists of a name.</li> </ul> <h2 id=code-review-pipeline>Code Review Pipeline<a class=headerlink href=#code-review-pipeline title="Permanent link">âš“ï¸Ž</a></h2> <p><strong>CodeReview()</strong> â€“ a function that allows using the EDP implementation for the Code Review pipeline.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>All values of different parameters that are used during the pipeline execution are stored in the "Map" context.</p> </div> <p>The Code Review pipeline consists of several steps:</p> <p>On the master:</p> <ul> <li>Initialization of all objects (Platform, Job, Gerrit, Nexus, Sonar, Application, StageFactory) and loading of the default implementations of EDP stages.</li> </ul> <p>On a particular Jenkins agent that depends on the build tool:</p> <ul> <li>Creating workdir for application sources;</li> <li>Loading build tool implementation for a particular application;</li> <li>Run in a loop all stages (From) and run them either in parallel or one by one.</li> </ul> <h3 id=code-review-pipeline-overview>Code Review Pipeline Overview<a class=headerlink href=#code-review-pipeline-overview title="Permanent link">âš“ï¸Ž</a></h3> <p><em>Using in pipelines - @Library(['edp-library-pipelines@version'])</em></p> <p>The corresponding enums, interfaces, classes, and their methods can be used separately from the EDP Pipelines library function (please refer to <a href=#table1>Table 1</a> and <a href=#table2>Table 2</a>).</p> <p>Table 1. <a name=table1></a> Enums and Interfaces with the respective properties, methods, and examples.</p> <p><center></p> <table> <thead> <tr> <th>Enums</th> <th>Interfaces</th> </tr> </thead> <tbody> <tr> <td><em>PlatformType:</em> <br><br> - OPENSHIFT <br> - KUBERNETES <br> <br><em>JobType:</em> <br><br> - CODEREVIEW <br> - BUILD <br> - DEPLOY <br><br><em>BuildToolType:</em> <br><br> - MAVEN <br> - GRADLE <br> - NPM <br> - DOTNET</td> <td><br><br><em><strong>Platform()</strong></em> - contains methods for working with platform CLI. <br>At the moment only OpenShift is supported. <br><br><strong>Properties</strong>:<br><br> Script script - Object with type script, in most cases if class <br>created from Jenkins pipelines it is "this". <br> <br><strong>Methods</strong>:<br><br> getJsonPathValue(String k8s_kind, String k8s_kind_name, <br>String jsonPath): return String value of specific parameter <br>of particular object using jsonPath utility. <br><br><strong>Example</strong>: <br><br><code>context.platform.getJsonPathValue(''cm'',</code><br><code>''project-settings'', ''.data.username'')</code>. <br><br><em><strong>BuildTool()</strong></em> - contains methods for working with different <br>buildTool from ENUM BuildToolType. <br>Should be invoked on Jenkins build agents. <br><br><strong>Properties</strong>: <br><br>Script script - Object with type script, in most cases if class <br>created from Jenkins pipelines it is "this". <br>Nexus object - Object of class Nexus. <br><br><strong>Methods</strong>:<br><br> init: return parameters of buildTool that are needed <br>for running stages. <br><br><strong>Example</strong>: <br><br> <code>context.buildTool = new BuildToolFactory().</code><br><code>getBuildToolImpl</code><br><code>(context.application.config.build_tool, this,</code><br><code>context.nexus) context.buildTool.init()</code>.</td> </tr> </tbody> </table> <p></center></p> <p>Table 2. <a name=table2></a> Classes with the respective properties, methods, and examples.</p> <table> <thead> <tr> <th>Classes</th> <th>Description (properties, methods, and examples)</th> </tr> </thead> <tbody> <tr> <td><strong>PlatformFactory()</strong> - Class that contains methods getting an implementation of CLI of the platform. At the moment OpenShift and Kubernetes are supported.</td> <td><strong>Methods</strong>: <br><br><code>getPlatformImpl(PlatformType platform, Script script): return Class Platform</code>. <br><br><strong>Example</strong>: <br><br><code>context.platform = new PlatformFactory().getPlatformImpl(PlatformType.OPENSHIFT, this)</code>.</td> </tr> <tr> <td><strong>Application(String name, Platform platform, Script script)</strong> - Class that describes the application object.</td> <td><strong>Properties</strong>: <br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this". <br><br>Platform platform - Object of a class Platform(). <br><br>String name - Name for the application for creating an object. <br><br>Map config - Map of configuration settings for the particular application that is loaded from config map project-settings. <br><br>String version - Application version, initially empty. Is set on the get-version step. <br><br>String deployableModule - The name of the deployable module for multi-module applications, initially empty. <br><br>String buildVersion - Version of the built artifact, contains build number of Job initially empty. <br><br>String deployableModuleDir - The name of deployable module directory for multi-module applications, initially empty. <br><br>Array imageBuildArgs - List of arguments for building an application Docker image. <br><br><strong>Methods</strong>:<br><br> setConfig(String gerrit_autouser, String gerrit_host, String gerrit_sshPort, String gerrit_project): set the config property with values from config map. <br><br><strong>Example</strong>:<br><br> <code>context.application = new Application(context.job, context.gerrit.project, context.platform, this) context.application.setConfig(context.gerrit.autouser, context.gerrit.host, context.gerrit.sshPort, context.gerrit.project)</code></td> </tr> <tr> <td><strong>Job(type: JobType.value, platform: Platform, script: Script)</strong> - Class that describes the Gerrit tool.</td> <td><strong>Properties</strong>:<br><br> Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this". <br><br>Platform platform - Object of a class Platform(). <br><br>JobType.value type. <br><br>String deployTemplatesDirectory - The name of the directory in application repository where deploy templates are located. It can be set for a particular Job through DEPLOY_TEMPLATES_DIRECTORY parameter. <br><br>String edpName - The name of the EDP Project. <br><br>Map stages - Contains all stages in JSON format that is retrieved from Jenkins job env variable. <br><br>String envToPromote - The name of the environment for promoting images. <br><br>Boolean promoteImages - Defines whether images should be promoted or not. <br><br><strong>Methods</strong>:<br><br> getParameterValue(String parameter, String defaultValue = null): return parameter of ENV variable of Jenkins job. <br><br>init(): set all the properties of the Job object. <br><br>setDisplayName(String displayName): set display name of the Jenkins job. <br><br>setDescription(String description, Boolean addDescription = false): set new or add to the existing description of the Jenkins job. <br><br>printDebugInfo(Map context): print context info to the log of Jenkins' job. <br><br>runStage(String stage_name, Map context): run the particular stage according to its name. <br><br><strong>Example</strong>:<br><br> <code>context.job = new Job(JobType.CODEREVIEW.value,</code> <br> <code>context.platform, this)</code> <br><code>context.job.init()</code> <br><code>context.job.printDebugInfo(context)</code> <br><code>context.job.setDisplayName("test")</code><br> <code>context.job.setDescription("Name: ${context.application.config.name}")</code></td> </tr> <tr> <td><strong>Gerrit(Job job, Platform platform, Script script)</strong> - Class that describes the Gerrit tool.</td> <td><strong>Properties</strong>: <br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this".<br><br>Platform platform - Object of a class Platform().<br><br>Job job - Object of a class Job().<br><br>String credentialsId - Credential Id in Jenkins for Gerrit.<br><br>String autouser - Username of an auto user in Gerrit for integration with Jenkins.<br><br>String host - Gerrit host.<br><br>String project - the project name of the built application.<br><br>String branch - branch to build the application from.<br><br>String changeNumber - change number of Gerrit commit.<br><br>String changeName - change name of Gerrit commit.<br><br>String refspecName - refspecName of Gerrit commit.<br><br>String sshPort - Gerrit ssh port number.<br><br>String patchsetNumber - patchsetNumber of Gerrit commit.<br><br><strong>Methods</strong>:<br><br> init(): set all the properties of Gerrit object. <br><br><strong>Example</strong>:<br><br> <code>context.gerrit = new Gerrit(context.job, context.platform, this)</code> <br><code>context.gerrit.init()</code></td> </tr> <tr> <td><strong>Nexus(Job job, Platform platform, Script script)</strong> - Class that describes the Nexus tool.</td> <td><strong>Properties</strong>:<br><br><br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this".<br><br>Platform platform - Object of a class Platform().<br><br>Job job - Object of a class Job().<br><br>String autouser - Username of an auto user in Nexus for integration with Jenkins.<br><br>String credentialsId - Credential Id in Jenkins for Nexus.<br><br>String host - Nexus host.<br><br>String port - Nexus http(s) port.<br><br>String repositoriesUrl - Base URL of repositories in Nexus.<br><br>String restUrl - URL of Rest API.<br><br><strong>Methods</strong>:<br><br>init(): set all the properties of Nexus object<br><br><strong>Example</strong>:<br><br> <code>context.nexus = new Nexus(context.job, context.platform, this)</code> <br><code>context.nexus.init()</code></td> </tr> <tr> <td><strong>Sonar(Job job, Platform platform, Script script)</strong> - Class that describes the Sonar tool.</td> <td><strong>Properties</strong>:<br><br><br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this".<br><br>Platform platform - Object of a class Platform().<br><br>Job job - Object of a class Job().<br><br>String route - External route of the sonar application.<br><br><strong>Methods</strong>:<br><br>init(): set all the properties of Sonar object<br><br><strong>Example</strong>:<br><br> <code>context.sonar = new Sonar(context.job, context.platform, this)</code> <br><code>context.sonar.init()</code></td> </tr> </tbody> </table> <h3 id=code-review-pipeline-stages>Code Review Pipeline Stages<a class=headerlink href=#code-review-pipeline-stages title="Permanent link">âš“ï¸Ž</a></h3> <p>Each EDP stage implementation has run method that is as input parameter required to pass the "Map" context with different keys. Some stages can implement the logic for several build tools and application types, some of them are specific.</p> <p>The Code Review pipeline includes the following default stages: <strong>Checkout â†’ Gerrit Checkout â†’ Compile â†’ Tests â†’ Sonar</strong>.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>To get the full description of every stage, please refer to the <a href=#4-edp-stages-framework>EDP Stages Framework</a> section.</p> </div> <h3 id=how-to-redefine-or-extend-the-edp-pipeline-stages-library>How to Redefine or Extend the EDP Pipeline Stages Library<a class=headerlink href=#how-to-redefine-or-extend-the-edp-pipeline-stages-library title="Permanent link">âš“ï¸Ž</a></h3> <p>Inspect the points below to redefine or extend the EDP Pipeline Stages Library:</p> <ul> <li>Create â€œstageâ€ folder in your App repository.</li> <li>Create a Groovy file with a meaningful name for the custom stage description. For instance â€“ CustomBuildMavenApplication.groovy.</li> <li>Describe the stage logic.</li> </ul> <p>Redefinition:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.stages.ProjectType</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.stages.Stage</span><span class=w></span>
<span class=nd>@Stage</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;compile&quot;</span><span class=p>,</span><span class=w> </span><span class=n>buildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;maven&quot;</span><span class=p>,</span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ProjectType</span><span class=p>.</span><span class=na>APPLICATION</span><span class=p>)</span><span class=w></span>
<span class=kd>class</span> <span class=nc>CustomBuildMavenApplication</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>Script</span><span class=w> </span><span class=n>script</span><span class=w></span>
<span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>run</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>script</span><span class=p>.</span><span class=na>sh</span><span class=w> </span><span class=s>&quot;echo &#39;Your custom logic of the stage&#39;&quot;</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
<span class=k>return</span><span class=w> </span><span class=n>CustomBuildMavenApplication</span><span class=w></span>
</code></pre></div> <p>Extension:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.stages.ProjectType</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.stages.Stage</span><span class=w></span>
<span class=nd>@Stage</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;new-stage&quot;</span><span class=p>,</span><span class=w> </span><span class=n>buildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;maven&quot;</span><span class=p>,</span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ProjectType</span><span class=p>.</span><span class=na>APPLICATION</span><span class=p>)</span><span class=w></span>
<span class=kd>class</span> <span class=nc>NewStageMavenApplication</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>Script</span><span class=w> </span><span class=n>script</span><span class=w></span>
<span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>run</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>script</span><span class=p>.</span><span class=na>sh</span><span class=w> </span><span class=s>&quot;echo &#39;Your custom logic of the stage&#39;&quot;</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
<span class=k>return</span><span class=w> </span><span class=n>NewStageMavenApplication</span><span class=w></span>
</code></pre></div> <h3 id=using-edp-stages-library-in-the-pipeline>Using EDP Stages Library in the Pipeline<a class=headerlink href=#using-edp-stages-library-in-the-pipeline title="Permanent link">âš“ï¸Ž</a></h3> <p>In order to use the EDP stages, the created pipeline should fit some requirements, that`s why a developer has to do the following:</p> <ul> <li>import library - @Library(['edp-library-stages'])</li> <li>import StageFactory class - import com.epam.edp.stages.StageFactory</li> <li>define context Map â€“ context = [:]</li> <li>define stagesFactory instance and load EDP stages:</li> </ul> <div class=highlight><pre><span></span><code><span class=w>  </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StageFactory</span><span class=p>(</span><span class=n>script</span><span class=p>:</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>  </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>loadEdpStages</span><span class=p>().</span><span class=na>each</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>it</span><span class=p>)</span><span class=w> </span><span class=p>}</span><span class=w></span>
</code></pre></div> <p>After that, there is the ability to run any EDP stage beforehand by defining a necessary context: <code>context.factory.getStage("checkout","maven","application").run(context)</code></p> <p><strong>For instance, the pipeline can look like</strong>:</p> <div class=highlight><pre><span></span><code><span class=nd>@Library</span><span class=p>(</span><span class=o>[</span><span class=err>&#39;</span><span class=n>edp</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>stages</span><span class=err>&#39;</span><span class=o>]</span><span class=p>)</span><span class=w> </span><span class=n>_</span><span class=w></span>

<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.stages.StageFactory</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>org.apache.commons.lang.RandomStringUtils</span><span class=w></span>

<span class=n>context</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>

<span class=n>node</span><span class=p>(</span><span class=err>&#39;</span><span class=n>maven</span><span class=err>&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>workDir</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=s>&quot;/tmp/${RandomStringUtils.random(10, true, true)}&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>workDir</span><span class=p>.</span><span class=na>deleteDir</span><span class=p>()</span><span class=w></span>

<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StageFactory</span><span class=p>(</span><span class=n>script</span><span class=p>:</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>loadEdpStages</span><span class=p>().</span><span class=na>each</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>it</span><span class=p>)</span><span class=w> </span><span class=p>}</span><span class=w></span>

<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>application</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>application</span><span class=p>.</span><span class=na>config</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>buildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>nexus</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>



<span class=w>    </span><span class=n>stage</span><span class=p>(</span><span class=s>&quot;checkout&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=p>.</span><span class=na>branch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;master&quot;</span><span class=w></span>
<span class=w>        </span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=p>.</span><span class=na>credentialsId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;jenkins&quot;</span><span class=w></span>
<span class=w>        </span><span class=n>context</span><span class=p>.</span><span class=na>application</span><span class=p>.</span><span class=na>config</span><span class=p>.</span><span class=na>cloneUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;ssh://jenkins@gerrit:32092/sit-718-cloned-java-maven-project&quot;</span><span class=w></span>
<span class=w>        </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>getStage</span><span class=p>(</span><span class=s>&quot;checkout&quot;</span><span class=p>,</span><span class=s>&quot;maven&quot;</span><span class=p>,</span><span class=s>&quot;application&quot;</span><span class=p>).</span><span class=na>run</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>


<span class=w>    </span><span class=n>stage</span><span class=p>(</span><span class=s>&quot;compile&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>context</span><span class=p>.</span><span class=na>buildTool</span><span class=p>.</span><span class=na>command</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;mvn&quot;</span><span class=w></span>
<span class=w>        </span><span class=n>context</span><span class=p>.</span><span class=na>nexus</span><span class=p>.</span><span class=na>credentialsId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;nexus&quot;</span><span class=w></span>
<span class=w>        </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>getStage</span><span class=p>(</span><span class=s>&quot;compile&quot;</span><span class=p>,</span><span class=s>&quot;maven&quot;</span><span class=p>,</span><span class=s>&quot;application&quot;</span><span class=p>).</span><span class=na>run</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p><strong>Or in a declarative way</strong>:</p> <div class=highlight><pre><span></span><code><span class=nd>@Library</span><span class=p>(</span><span class=o>[</span><span class=err>&#39;</span><span class=n>edp</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>stages</span><span class=err>&#39;</span><span class=o>]</span><span class=p>)</span><span class=w> </span><span class=n>_</span><span class=w></span>

<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.stages.StageFactory</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>org.apache.commons.lang.RandomStringUtils</span><span class=w></span>

<span class=n>context</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>

<span class=n>pipeline</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>agent</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>label</span><span class=w> </span><span class=err>&#39;</span><span class=n>maven</span><span class=err>&#39;</span><span class=w> </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=n>stages</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>stage</span><span class=p>(</span><span class=err>&#39;</span><span class=n>Init</span><span class=err>&#39;</span><span class=p>){</span><span class=w></span>
<span class=w>            </span><span class=n>steps</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=n>script</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>workDir</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=s>&quot;/tmp/${RandomStringUtils.random(10, true, true)}&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>workDir</span><span class=p>.</span><span class=na>deleteDir</span><span class=p>()</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StageFactory</span><span class=p>(</span><span class=n>script</span><span class=p>:</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>loadEdpStages</span><span class=p>().</span><span class=na>each</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>it</span><span class=p>)</span><span class=w> </span><span class=p>}</span><span class=w></span>

<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>application</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>application</span><span class=p>.</span><span class=na>config</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>buildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>nexus</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>                </span><span class=p>}</span><span class=w></span>
<span class=w>            </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>

<span class=w>        </span><span class=n>stage</span><span class=p>(</span><span class=s>&quot;Checkout&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>steps</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                 </span><span class=n>script</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=p>.</span><span class=na>branch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;master&quot;</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=p>.</span><span class=na>credentialsId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;jenkins&quot;</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>application</span><span class=p>.</span><span class=na>config</span><span class=p>.</span><span class=na>cloneUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;ssh://jenkins@gerrit:32092/sit-718-cloned-java-maven-project&quot;</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>getStage</span><span class=p>(</span><span class=s>&quot;checkout&quot;</span><span class=p>,</span><span class=s>&quot;maven&quot;</span><span class=p>,</span><span class=s>&quot;application&quot;</span><span class=p>).</span><span class=na>run</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=p>}</span><span class=w></span>
<span class=w>            </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>

<span class=w>        </span><span class=n>stage</span><span class=p>(</span><span class=err>&#39;</span><span class=n>Compile</span><span class=err>&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>steps</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                 </span><span class=n>script</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>buildTool</span><span class=p>.</span><span class=na>command</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;mvn&quot;</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>nexus</span><span class=p>.</span><span class=na>credentialsId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;nexus&quot;</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>getStage</span><span class=p>(</span><span class=s>&quot;compile&quot;</span><span class=p>,</span><span class=s>&quot;maven&quot;</span><span class=p>,</span><span class=s>&quot;application&quot;</span><span class=p>).</span><span class=na>run</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=p>}</span><span class=w></span>
<span class=w>            </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <h2 id=build-pipeline>Build Pipeline<a class=headerlink href=#build-pipeline title="Permanent link">âš“ï¸Ž</a></h2> <p><strong>Build()</strong> â€“ a function that allows using the EDP implementation for the Build pipeline. All values of different parameters that are used during the pipeline execution are stored in the "Map" context.</p> <p>The Build pipeline consists of several steps:</p> <p>On the master:</p> <ul> <li>Initialization of all objects (Platform, Job, Gerrit, Nexus, Sonar, Application, StageFactory) and loading default implementations of EDP stages.</li> </ul> <p>On a particular Jenkins agent that depends on the build tool:</p> <ul> <li>Creating workdir for application sources;</li> <li>Loading build tool implementation for a particular application;</li> <li>Run in a loop all stages (From) and run them either in parallel or one by one.</li> </ul> <h3 id=build-pipeline-overview>Build Pipeline Overview<a class=headerlink href=#build-pipeline-overview title="Permanent link">âš“ï¸Ž</a></h3> <p><em>Using in pipelines - @Library(['edp-library-pipelines@version'])</em></p> <p>The corresponding enums, interfaces, classes, and their methods can be used separately from the EDP Pipelines library function (please refer to <a href=#table3>Table 3</a> and <a href=#table4>Table 4</a>).</p> <p>Table 3. <a name=table3></a> Enums and Interfaces with the respective properties, methods, and examples. <center></p> <table> <thead> <tr> <th>Enums</th> <th>Interfaces</th> </tr> </thead> <tbody> <tr> <td><em>PlatformType:</em><br><br>- OPENSHIFT<br>- KUBERNETES<br><br><em>JobType:</em><br><br>- CODEREVIEW<br>- BUILD<br>- DEPLOY<br><br><em>BuildToolType</em>:<br><br>- MAVEN<br>- GRADLE<br>- NPM<br>- DOTNET<br></td> <td><em><strong>Platform()</strong></em> - contains methods for working with platform CLI. <br>At the moment only OpenShift is supported.<br><br><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class <br>created from Jenkins pipelines it is "this".<br><br><strong>Methods</strong>:<br><br>getJsonPathValue(String k8s_kind, String k8s_kind_name,<br> String jsonPath): return String value of specific parameter <br>of particular object using jsonPath utility.<br><br><strong>Example</strong>:<br><br><code>context.platform.getJsonPathValue("cm","project-settings",</code><br><code>".data.username")</code><br><br><em><strong>BuildTool()</strong></em> - contains methods for working with different <br>buildTool from ENUM BuildToolType. <br>Should be invoked on Jenkins build agents.<br><br><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class <br>created from Jenkins pipelines it is "this".<br>Nexus object - Object of class Nexus. See description below:<br><br><strong>Methods</strong>:<br><br>init: return parameters of buildTool that are needed for <br>running stages.<br><br><strong>Example</strong>:<br><br><code>context.buildTool = new BuildToolFactory().getBuildToolImpl</code><br><code>(context.application.config.build_tool, this,</code><br><code>context.nexus)context.buildTool.init()</code></td> </tr> </tbody> </table> <p></center> Table 4. <a name=table4></a> Classes with the respective properties, methods, and examples.</p> <table> <thead> <tr> <th>Classes</th> <th>Description (properties, methods, and examples)</th> </tr> </thead> <tbody> <tr> <td><strong>PlatformFactory()</strong> - Class that contains methods getting an implementation of CLI of the platform. At the moment OpenShift and Kubernetes are supported.</td> <td><strong>Methods</strong>:<br><br>getPlatformImpl(PlatformType platform, Script script): return Class Platform<br><br><strong>Example</strong>:<br><br><code>context.platform = new PlatformFactory().getPlatformImpl(PlatformType.OPENSHIFT, this)</code></td> </tr> <tr> <td><strong>Application(String name, Platform platform, Script script)</strong> - Class that describes the application object.</td> <td><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this".<br><br>Platform platform - Object of a class Platform().<br><br>String name - Name for the application for creating an object.<br><br>Map config - Map of configuration settings for the particular application that is loaded from config map project-settings.<br><br>String version - Application version, initially empty. Is set on the get-version step.<br><br>String deployableModule - The name of the deployable module for multi-module applications, initially empty.<br><br>String buildVersion - Version of the built artifact, contains build number of Job initially empty.<br><br>String deployableModuleDir - The name of deployable module directory for multi-module applications, initially empty.<br><br>Array imageBuildArgs - List of arguments for building the application Docker image.<br><br><strong>Methods</strong>:<br><br>setConfig(String gerrit_autouser, String gerrit_host, String gerrit_sshPort, String gerrit_project): set the config property with values from config map.<br><br><strong>Example</strong>:<br><br><code>context.application = new Application(context.job, context.gerrit.project, context.platform, this) context.application.setConfig(context.gerrit.autouser, context.gerrit.host, context.gerrit.sshPort, context.gerrit.project)</code></td> </tr> <tr> <td><strong>Job(type: JobType.value, platform: Platform, script: Script)</strong> - Class that describes the Gerrit tool.</td> <td><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this".<br><br>Platform platform - Object of a class Platform().<br><br>JobType.value type.<br><br>String deployTemplatesDirectory - The name of the directory in application repository, where deploy templates are located. It can be set for a particular Job through DEPLOY_TEMPLATES_DIRECTORY parameter.<br><br>String edpName - The name of the EDP Project.<br><br>Map stages - Contains all stages in JSON format that is retrieved from Jenkins job env variable.<br><br>String envToPromote - The name of the environment for promoting images.<br><br>Boolean promoteImages - Defines whether images should be promoted or not.<br><br><strong>Methods</strong>:<br><br>getParameterValue(String parameter, String defaultValue = null): return parameter of ENV variable of Jenkins job.<br><br>init(): set all the properties of the Job object.<br><br>setDisplayName(String displayName): set display name of the Jenkins job.<br><br>setDescription(String description, Boolean addDescription = false): set new or add to the existing description of the Jenkins job.<br><br>printDebugInfo(Map context): print context info to the log of Jenkins' job.<br><br>runStage(String stage_name, Map context): run the particular stage according to its name.<br><br><strong>Example</strong>:<br><br><code>context.job = new Job(JobType.CODEREVIEW.value, context.platform, this) context.job.init() context.job.printDebugInfo(context) context.job.setDisplayName("test") context.job.setDescription("Name: ${context.application.config.name}")</code></td> </tr> <tr> <td><strong>Gerrit(Job job, Platform platform, Script script)</strong> - Class that describes the Gerrit tool.</td> <td><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this".<br><br>Platform platform - Object of a class Platform().<br><br>Job job - Object of a class Job().<br><br>String credentialsId - Credentials Id in Jenkins for Gerrit.<br><br>String autouser - Username of an auto user in Gerrit for integration with Jenkins.<br><br>String host - Gerrit host.<br><br>String project - the project name of the built application.<br><br>String branch - branch to build an application from.<br><br>String changeNumber - change number of Gerrit commit.<br><br>String changeName - change name of Gerrit commit.<br><br>String refspecName - refspecName of Gerrit commit.<br><br>String sshPort - Gerrit ssh port number.<br><br>String patchsetNumber - patchsetNumber of Gerrit commit.<br><br><strong>Methods</strong>:<br><br>init(): set all the properties of Gerrit object<br><br><strong>Example</strong>:<br><br> <code>context.gerrit = new Gerrit(context.job, context.platform, this) context.gerrit.init()</code></td> </tr> <tr> <td><strong>Nexus(Job job, Platform platform, Script script)</strong> - Class that describes the Nexus tool.</td> <td><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this".<br><br>Platform platform - Object of a class Platform().<br><br>Job job - Object of a class Job().<br><br>String autouser - Username of an auto user in Nexus for integration with Jenkins.<br><br>String credentialsId - Credentials Id in Jenkins for Nexus.<br><br>String host - Nexus host.<br><br>String port - Nexus http(s) port.<br><br>String repositoriesUrl - Base URL of repositories in Nexus.<br><br>String restUrl - URL of Rest API.<br><br><strong>Methods</strong>:<br><br>init(): set all the properties of the Nexus object.<br><br><strong>Example</strong>:<br><br><code>context.nexus = new Nexus(context.job, context.platform, this) context.nexus.init()</code></td> </tr> <tr> <td><strong>Sonar(Job job, Platform platform, Script script)</strong> - Class that describes the Sonar tool.</td> <td><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this".<br><br>Platform platform - Object of a class Platform().<br><br>Job job - Object of a class Job().<br><br>String route - External route of the sonar application.<br><br><strong>Methods</strong>:<br><br>init(): set all the properties of Sonar object.<br><br><strong>Example</strong>:<br><br><code>context.sonar = new Sonar(context.job, context.platform, this) context.sonar.init()</code></td> </tr> </tbody> </table> <h3 id=build-pipeline-stages>Build Pipeline Stages<a class=headerlink href=#build-pipeline-stages title="Permanent link">âš“ï¸Ž</a></h3> <p>Each EDP stage implementation has run method that is as input parameter required to pass a context map with different keys. Some stages can implement the logic for several build tools and application types, some of them are specific.</p> <p>The Build pipeline includes the following default stages: <strong>Checkout â†’ Gerrit Checkout â†’ Compile â†’ Get version â†’ Tests â†’ Sonar â†’ Build â†’ Build Docker Image â†’ Push â†’ Git tag</strong>.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>To get the full description of every stage, please refer to the <a href=#4-edp-stages-framework>EDP Stages Framework</a> section.</p> </div> <h3 id=how-to-redefine-or-extend-edp-pipeline-stages-library>How to Redefine or Extend EDP Pipeline Stages Library<a class=headerlink href=#how-to-redefine-or-extend-edp-pipeline-stages-library title="Permanent link">âš“ï¸Ž</a></h3> <p>Inspect the points below to redefine or extend the EDP Pipeline Stages Library:</p> <ul> <li>Create a â€œstageâ€ folder in the App repository.</li> <li>Create a Groovy file with a meaningful name for the custom stage description. For instance â€“ CustomBuildMavenApplication.groovy</li> <li>Describe stage logic.</li> </ul> <p>Redefinition:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.stages.ProjectType</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.stages.Stage</span><span class=w></span>
<span class=nd>@Stage</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;compile&quot;</span><span class=p>,</span><span class=w> </span><span class=n>buildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;maven&quot;</span><span class=p>,</span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ProjectType</span><span class=p>.</span><span class=na>APPLICATION</span><span class=p>)</span><span class=w></span>
<span class=kd>class</span> <span class=nc>CustomBuildMavenApplication</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>Script</span><span class=w> </span><span class=n>script</span><span class=w></span>
<span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>run</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>script</span><span class=p>.</span><span class=na>sh</span><span class=w> </span><span class=s>&quot;echo &#39;Your custom logic of the stage&#39;&quot;</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
<span class=k>return</span><span class=w> </span><span class=n>CustomBuildMavenApplication</span><span class=w></span>
</code></pre></div> <p>Extension:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.stages.ProjectType</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.stages.Stage</span><span class=w></span>
<span class=nd>@Stage</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;new-stage&quot;</span><span class=p>,</span><span class=w> </span><span class=n>buildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;maven&quot;</span><span class=p>,</span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ProjectType</span><span class=p>.</span><span class=na>APPLICATION</span><span class=p>)</span><span class=w></span>
<span class=kd>class</span> <span class=nc>NewStageMavenApplication</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>Script</span><span class=w> </span><span class=n>script</span><span class=w></span>
<span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>run</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>script</span><span class=p>.</span><span class=na>sh</span><span class=w> </span><span class=s>&quot;echo &#39;Your custom logic of the stage&#39;&quot;</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
<span class=k>return</span><span class=w> </span><span class=n>NewStageMavenApplication</span><span class=w></span>
</code></pre></div> <h3 id=using-edp-stages-library-in-the-pipeline_1>Using EDP Stages Library in the Pipeline<a class=headerlink href=#using-edp-stages-library-in-the-pipeline_1 title="Permanent link">âš“ï¸Ž</a></h3> <p>In order to use the EDP stages, the created pipeline should fit some requirements, that`s why a developer has to do the following:</p> <ul> <li>import library - @Library(['edp-library-stages'])</li> <li>import StageFactory class - import com.epam.edp.stages.StageFactory</li> <li>define context Map â€“ context = [:]</li> <li>define stagesFactory instance and load EDP stages:</li> </ul> <div class=highlight><pre><span></span><code><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StageFactory</span><span class=p>(</span><span class=n>script</span><span class=p>:</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>loadEdpStages</span><span class=p>().</span><span class=na>each</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>it</span><span class=p>)</span><span class=w> </span><span class=p>}</span><span class=w></span>
</code></pre></div> <p>After that, there is the ability to run any EDP stage beforehand by defining a requirement context <code>context.factory.getStage("checkout","maven","application").run(context)</code></p> <p><strong>For instance, the pipeline can look like</strong>:</p> <div class=highlight><pre><span></span><code><span class=nd>@Library</span><span class=p>(</span><span class=o>[</span><span class=err>&#39;</span><span class=n>edp</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>stages</span><span class=err>&#39;</span><span class=o>]</span><span class=p>)</span><span class=w> </span><span class=n>_</span><span class=w></span>

<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.stages.StageFactory</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>org.apache.commons.lang.RandomStringUtils</span><span class=w></span>

<span class=n>context</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>

<span class=n>node</span><span class=p>(</span><span class=err>&#39;</span><span class=n>maven</span><span class=err>&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>workDir</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=s>&quot;/tmp/${RandomStringUtils.random(10, true, true)}&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>workDir</span><span class=p>.</span><span class=na>deleteDir</span><span class=p>()</span><span class=w></span>

<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StageFactory</span><span class=p>(</span><span class=n>script</span><span class=p>:</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>loadEdpStages</span><span class=p>().</span><span class=na>each</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>it</span><span class=p>)</span><span class=w> </span><span class=p>}</span><span class=w></span>

<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>application</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>application</span><span class=p>.</span><span class=na>config</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>buildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>    </span><span class=n>context</span><span class=p>.</span><span class=na>nexus</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>



<span class=w>    </span><span class=n>stage</span><span class=p>(</span><span class=s>&quot;checkout&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=p>.</span><span class=na>branch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;master&quot;</span><span class=w></span>
<span class=w>                </span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=p>.</span><span class=na>credentialsId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;jenkins&quot;</span><span class=w></span>
<span class=w>                </span><span class=n>context</span><span class=p>.</span><span class=na>application</span><span class=p>.</span><span class=na>config</span><span class=p>.</span><span class=na>cloneUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;ssh://jenkins@gerrit:32092/sit-718-cloned-java-maven-project&quot;</span><span class=w></span>
<span class=w>                </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>getStage</span><span class=p>(</span><span class=s>&quot;checkout&quot;</span><span class=p>,</span><span class=s>&quot;maven&quot;</span><span class=p>,</span><span class=s>&quot;application&quot;</span><span class=p>).</span><span class=na>run</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>


<span class=w>    </span><span class=n>stage</span><span class=p>(</span><span class=s>&quot;compile&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>context</span><span class=p>.</span><span class=na>buildTool</span><span class=p>.</span><span class=na>command</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;mvn&quot;</span><span class=w></span>
<span class=w>                </span><span class=n>context</span><span class=p>.</span><span class=na>nexus</span><span class=p>.</span><span class=na>credentialsId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;nexus&quot;</span><span class=w></span>
<span class=w>                </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>getStage</span><span class=p>(</span><span class=s>&quot;compile&quot;</span><span class=p>,</span><span class=s>&quot;maven&quot;</span><span class=p>,</span><span class=s>&quot;application&quot;</span><span class=p>).</span><span class=na>run</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p><strong>Or in a declarative way</strong>:</p> <div class=highlight><pre><span></span><code><span class=nd>@Library</span><span class=p>(</span><span class=o>[</span><span class=err>&#39;</span><span class=n>edp</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>stages</span><span class=err>&#39;</span><span class=o>]</span><span class=p>)</span><span class=w> </span><span class=n>_</span><span class=w></span>

<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.stages.StageFactory</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>org.apache.commons.lang.RandomStringUtils</span><span class=w></span>

<span class=n>context</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>

<span class=n>pipeline</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>agent</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>label</span><span class=w> </span><span class=err>&#39;</span><span class=n>maven</span><span class=err>&#39;</span><span class=w> </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=n>stages</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>stage</span><span class=p>(</span><span class=err>&#39;</span><span class=n>Init</span><span class=err>&#39;</span><span class=p>){</span><span class=w></span>
<span class=w>            </span><span class=n>steps</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=n>script</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>workDir</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=s>&quot;/tmp/${RandomStringUtils.random(10, true, true)}&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>workDir</span><span class=p>.</span><span class=na>deleteDir</span><span class=p>()</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StageFactory</span><span class=p>(</span><span class=n>script</span><span class=p>:</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>loadEdpStages</span><span class=p>().</span><span class=na>each</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>it</span><span class=p>)</span><span class=w> </span><span class=p>}</span><span class=w></span>

<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>application</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>application</span><span class=p>.</span><span class=na>config</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>buildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>nexus</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=w>                </span><span class=p>}</span><span class=w></span>
<span class=w>            </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>

<span class=w>        </span><span class=n>stage</span><span class=p>(</span><span class=s>&quot;Checkout&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>steps</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                 </span><span class=n>script</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=p>.</span><span class=na>branch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;master&quot;</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=p>.</span><span class=na>credentialsId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;jenkins&quot;</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>application</span><span class=p>.</span><span class=na>config</span><span class=p>.</span><span class=na>cloneUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;ssh://jenkins@gerrit:32092/sit-718-cloned-java-maven-project&quot;</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>getStage</span><span class=p>(</span><span class=s>&quot;checkout&quot;</span><span class=p>,</span><span class=s>&quot;maven&quot;</span><span class=p>,</span><span class=s>&quot;application&quot;</span><span class=p>).</span><span class=na>run</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=p>}</span><span class=w></span>
<span class=w>            </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>

<span class=w>        </span><span class=n>stage</span><span class=p>(</span><span class=err>&#39;</span><span class=n>Compile</span><span class=err>&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>steps</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                 </span><span class=n>script</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>buildTool</span><span class=p>.</span><span class=na>command</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;mvn&quot;</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>nexus</span><span class=p>.</span><span class=na>credentialsId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;nexus&quot;</span><span class=w></span>
<span class=w>                    </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>getStage</span><span class=p>(</span><span class=s>&quot;compile&quot;</span><span class=p>,</span><span class=s>&quot;maven&quot;</span><span class=p>,</span><span class=s>&quot;application&quot;</span><span class=p>).</span><span class=na>run</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=p>}</span><span class=w></span>
<span class=w>            </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <h2 id=edp-library-stages-description>EDP Library Stages Description<a class=headerlink href=#edp-library-stages-description title="Permanent link">âš“ï¸Ž</a></h2> <p><em>Using in pipelines - @Library(['edp-library-stages@version'])</em></p> <p>The corresponding enums, classes, interfaces and their methods can be used separately from the EDP Stages library function (please refer to <a href=#table5>Table 5</a>).</p> <p>Table 5. <a name=table5></a> Enums and Classes with the respective properties, methods, and examples.</p> <table> <thead> <tr> <th>Enums</th> <th>Classes</th> </tr> </thead> <tbody> <tr> <td><em>ProjectType</em>:<br><br> - APPLICATION<br> - AUTOTESTS<br> - LIBRARY</td> <td><em><strong>StageFactory()</strong></em> - Class that contains methods getting an implementation of the particular stage either EDP <br>from shared library or custom from application repository.<br><br><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this".<br><br>Map stages - Map of stages implementations.<br><br><strong>Methods</strong>:<br><br>loadEdpStages(): return a list of Classes that describes EDP stages implementations.<br><br>loadCustomStages(String directory): return a list of Classes that describes EDP custom stages from application <br>repository from "directory". The "directory" should have an absolute path to files with classes of custom stages<br> implementations. Should be run from a Jenkins agent.<br><br>add(Class clazz): register class for some particular stage in stages map of StageFactory class.<br><br>getStage(String name, String buildTool, String type): return an object of the class for a particular stage <br>from stages property based on stage name and buildTool, type of application.<br><br><strong>Example</strong>:<br><br><code>context.factory = new StageFactory(script: this)</code><br><code>context.factory.loadEdpStages().each() { context.factory.add(it) }</code><br><code>context.factory.loadCustomStages("${context.workDir}/stages").each() { context.factory.add(it) }</code><br><code>context.factory.getStage(stageName.toLowerCase(),context.application.config.build_tool.toLowerCase(),</code><br><code>context.application.config.type).run(context)</code></td> </tr> </tbody> </table> <h2 id=edp-stages-framework>EDP Stages Framework<a class=headerlink href=#edp-stages-framework title="Permanent link">âš“ï¸Ž</a></h2> <p>Each EDP stage implementation has run method that is as input parameter required to pass a context map with different keys. Some stages can implement the logic for several build tools and application types, some of them are specific.</p> <p>Inspect the <a href=#table6>Table 6</a> and <a href=#table7>Table 7</a> that contain the full description of every stage that can be included in Code Review and Build pipelines: <strong>Checkout â†’ Gerrit Checkout â†’ Compile â†’ Get version â†’ Tests â†’ Sonar â†’ Build â†’ Build Docker Image â†’ Push â†’ Git tag</strong>.</p> <p>Table 6. <a name=table6></a> The Checkout, Gerrit Checkout, Compile, Get version, and Tests stages description.</p> <table> <thead> <tr> <th>Checkout</th> <th>Gerrit Checkout</th> <th>Compile</th> <th>Get version</th> <th>Tests</th> </tr> </thead> <tbody> <tr> <td>name = "checkout",<br>buildTool = ["maven", "npm", "dotnet","gradle"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- StageFactory context.factory<br>- String context.gerrit.branch<br>- String context.gerrit.credentialsId<br>- String context.application.config.cloneUrl</td> <td>name = "gerrit-checkout",<br>buildTool = ["maven", "npm", "dotnet","gradle"]<br>type = [ProjectType.APPLICATION, ProjectType.AUTOTESTS, ProjectType.LIBRARY]<br>context required:<br>- String context.workDir<br>- StageFactory context.factory<br>- String context.gerrit.changeName<br>- String context.gerrit.refspecName<br>- String context.gerrit.credentialsId<br>- String context.application.config.cloneUrl</td> <td>name = "compile"<br>buildTool = ["dotnet"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.buildTool.sln_filename<br>output:<br>- String context.buildTool.sln_filename<br><br>buildTool = ["gradle"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.buildTool.command<br>- String context.nexus.credentialsId<br><br>buildTool = ["maven"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.buildTool.command<br>- String context.nexus.credentialsId<br><br>buildTool = ["npm"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.nexus.credentialsId<br>- String context.buildTool.groupRepository</td> <td>name = "get-version"<br>buildTool = ["dotnet"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- Map(empty) context.application<br>- String context.gerrit.branch<br>- Job context.job<br>output:<br>-String context.application.deplyableModule<br>- String context.application.deplyableModuleDir<br>- String context.application.version<br>- String context.application.buildVersion<br><br>buildTool = ["gradle"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.nexus.credentialsId<br>- String context.buildTool.command<br>- Job context.job<br>- String context.gerrit.branch<br>output:<br>- String context.application.deplyableModuleDir<br>- String context.application.version<br>- String context.application.buildVersion<br><br>buildTool = ["maven"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.nexus.credentialsId<br>- String context.buildTool.command<br>- Job context.job<br>- String context.gerrit.branch<br>output:<br>- String context.application.deplyableModule<br>- String context.application.deplyableModuleDir<br>- String context.application.version<br>- String context.application.buildVersion<br><br>buildTool = ["npm"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- Job context.job<br>- String context.gerrit.branch<br>output:<br>- String context.application.deplyableModuleDir<br>- String context.application.version<br>- String context.application.buildVersion</td> <td>name = "tests"<br>buildTool = ["dotnet"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br><br>buildTool = ["gradle"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.nexus.credentialsId<br>- String context.buildTool.command<br><br>buildTool = ["maven"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.buildTool.command<br><br>type = [ProjectType.AUTOTESTS]<br>context required:<br>- String context.workDir<br>- String context.buildTool.command<br>- String context.application.config.report_framework<br><br>buildTool = ["npm"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir</td> </tr> </tbody> </table> <p>Table 7. <a name=table7></a> The Sonar, Build, Build Docker Image, Push, and Git tag stages description.</p> <table> <thead> <tr> <th>Sonar</th> <th>Build</th> <th>Build Docker Image</th> <th>Push</th> <th>Git tag</th> </tr> </thead> <tbody> <tr> <td>name = "sonar"<br>buildTool = ["dotnet"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.job.type<br>- String context.application.name<br>- String context.buildTool.sln_filename<br>- String context.sonar.route<br>- String context.gerrit.changeName(Only for codereview pipeline)<br>- String context.gerrit.branch(Only for build pipeline)<br><br>buildTool = ["gradle"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.job.type<br>- String context.nexus.credentialsId<br>- String context.buildTool.command<br>- String context.application.name<br>- String context.sonarRoute<br>- String context.gerrit.changeName(Only for codereview pipeline)<br>- String context.gerrit.branch(Only for build pipeline)<br><br>buildTool = ["maven"]<br>type = [ProjectType.APPLICATION, ProjectType.AUTOTESTS, ProjectType.LIBRARY]<br>context required:<br>- String context.workDir<br>- String context.job.type<br>- String context.nexus.credentialsId<br>- String context.application.name<br>- String context.buildTool.command<br>- String context.sonar.route<br>- String context.gerrit.changeName(Only for codereview pipeline)<br>- String context.gerrit.branch(Only for build pipeline)<br>buildTool = ["npm"]<br><br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.job.type<br>- String context.sonar.route<br>- String context.application.name<br>- String context.gerrit.changeName(Only for codereview pipeline)<br>- String context.gerrit.branch(Only for build pipeline)</td> <td>name = "build"<br>buildTool = ["gradle"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.buildTool.command<br>- String context.nexus.credentialsId<br><br>buildTool = ["maven"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.buildTool.command<br>- String context.nexus.credentialsId<br><br>buildTool = ["npm"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.nexus.credentialsId<br>- String context.buildTool.groupRepository</td> <td>name = "build-image"<br>buildTool = ["dotnet"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.application.deployableModule<br>- String context.application.deployableModuleDir<br>- String context.application.name<br>- String context.application.config.language<br>- String context.application.buildVersion<br>- Boolean context.job.promoteImages<br>- String context.job.envToPromote<br><br>buildTool = ["gradle"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.application.deployableModule<br>- String context.application.deployableModuleDir<br>- String context.application.name<br>- String context.application.config.language<br>- String context.application.buildVersion<br>- Boolean context.job.promoteImages<br>- String context.job.envToPromote<br><br>buildTool = ["maven"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.application.deployableModule<br>- String context.application.deployableModuleDir<br>- String context.application.name<br>- String context.application.config.language<br>- String context.application.buildVersion<br>- Boolean context.job.promoteImages<br>- String context.job.envToPromote<br><br>buildTool = ["npm"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.application.deployableModule<br>- String context.application.deployableModuleDir<br>- String context.application.name<br>- String context.application.config.language<br>- String context.application.buildVersion<br>- Boolean context.job.promoteImages<br>- String context.job.envToPromote</td> <td>name = "push"<br>buildTool = ["dotnet"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.gerrit.project<br>- String context.buildTool.sln_filename<br>- String context.buildTool.snugetApiKey<br>- String context.buildTool.hostedRepository<br><br>buildTool = ["gradle"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.nexus.credentialsId<br>- String context.application.version<br>- String context.buildTool.hostedRepository<br>- String context. buildTool.settings<br><br>buildTool = ["maven"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.nexus.credentialsId<br>- String context.application.version<br>- String context.buildTool.hostedRepository<br>- String context.buildTool.command<br><br>buildTool = ["npm"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.nexus.credentialsId<br>- String context.buildTool.hostedRepository<br>- String context.gerrit.autouser</td> <td>name = "git-tag"<br>buildTool = ["maven", "npm", "dotnet","gradle"]<br>type = [ProjectType.APPLICATION]<br>context required:<br>- String context.workDir<br>- String context.gerrit.credentialsId<br>- String context.gerrit.sshPort<br>- String context.gerrit.host<br>- String context.gerrit.autouser<br>- String context.application.buildVersion</td> </tr> </tbody> </table> <h2 id=deploy-pipeline>Deploy Pipeline<a class=headerlink href=#deploy-pipeline title="Permanent link">âš“ï¸Ž</a></h2> <p><strong>Deploy()</strong> â€“ a function that allows using the EDP implementation for the deploy pipeline. All values of different parameters that are used during the pipeline execution are stored in the "Map" context.</p> <p>The deploy pipeline consists of several steps:</p> <p>On the master:</p> <ul> <li>Initialization of all objects (Platform, Job, Gerrit, Nexus, StageFactory) and loading the default implementations of EDP stages;</li> <li>Creating an environment if it doesn`t exist;</li> <li>Deploying the last versions of the applications;</li> <li>Run predefined manual gates.</li> </ul> <p>On a particular autotest Jenkins agent that depends on the build tool:</p> <ul> <li>Creating workdir for autotest sources;</li> <li>Run predefined autotests.</li> </ul> <h3 id=edp-library-pipelines-description>EDP Library Pipelines Description<a class=headerlink href=#edp-library-pipelines-description title="Permanent link">âš“ï¸Ž</a></h3> <p>_Using in pipelines - @Library(['edp-library-pipelines@version']) _</p> <p>The corresponding enums and interfaces with their methods can be used separately from the EDP Pipelines library function (please refer to <a href=#table8>Table 8</a> and <a href=#table9>Table 9</a>).</p> <p>Table 8. <a name=table8></a> Enums and Interfaces with the respective properties, methods, and examples.</p> <p><center></p> <table> <thead> <tr> <th>Enums</th> <th>Interfaces</th> </tr> </thead> <tbody> <tr> <td><em>PlatformType</em>:<br><br>- OPENSHIFT<br>- KUBERNETES<br><br><em>JobType</em>:<br>- CODEREVIEW<br>- BUILD<br>- DEPLOY<br><br><em>BuildToolType</em>:<br>- MAVEN<br>- GRADLE<br>- NPM<br>- DOTNET</td> <td><strong>Platform()</strong> - contains methods for working with platform CLI. <br>At the moment only OpenShift is supported.<br><br><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class <br>created from Jenkins pipelines it is "this". <br><br><strong>Methods</strong>:<br><br>getJsonPathValue(String k8s_kind, String k8s_kind_name, <br>String jsonPath): return String value of specific parameter <br>of particular object using jsonPath utility. <br><br><strong>Example</strong>:<br><br> <code>context.platform.getJsonPathValue("cm","project-settings",</code><br><code>".data.username")</code> <br><br>BuildTool() - contains methods for working with different buildTool <br>from ENUM BuildToolType. <br>(Should be invoked on Jenkins build agents)<br><br><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class <br>created from Jenkins pipelines it is "this". <br><br>Nexus object - Object of class Nexus.<br><br><strong>Methods</strong>:<br><br>init: return parameters of buildTool that are needed for <br>running stages. <br><br><strong>Example</strong>:<br><br><code>context.buildTool = new BuildToolFactory().getBuildToolImpl</code><br><code>(context.application.config.build_tool, this, context.nexus)</code><br><code>context.buildTool.init()</code></td> </tr> </tbody> </table> <p></center> Table 9. <a name=table9></a> Classes with the respective properties, methods, and examples.</p> <table> <thead> <tr> <th>Classes</th> <th>Description (properties, methods, and examples)</th> </tr> </thead> <tbody> <tr> <td><strong>PlatformFactory()</strong> - Class that contains methods getting implementation of CLI of platform. At the moment OpenShift and Kubernetes are supported.</td> <td><strong>Methods</strong>:<br><br>getPlatformImpl(PlatformType platform, Script script): return Class Platform<br><br><strong>Example</strong>:<br><br> <code>context.platform = new PlatformFactory().getPlatformImpl(PlatformType.OPENSHIFT, this)</code></td> </tr> <tr> <td><strong>Application(String name, Platform platform, Script script)</strong> - Class that describe the application object.</td> <td><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this". <br><br>Platform platform - Object of a class Platform()<br><br>String name - Name for the application for creating object<br><br>Map config - Map of configuration settings for particular application that is loaded from config map project-settings<br><br>String version - Application version, initially empty. Is set on get-version step.<br><br>String deployableModule - The name of deployable module for multi module applications, initially empty.<br><br>String buildVersion - Version of built artifact, contains build number of Job initially empty<br><br>String deployableModuleDir - The name of deployable module directory for multi module applications, initially empty.<br><br>Array imageBuildArgs - List of arguments for building application Docker image<br><br><strong>Methods</strong>:<br><br> setConfig(String gerrit_autouser, String gerrit_host, String gerrit_sshPort, String gerrit_project): set the config property with values from config map<br><br><strong>Example</strong>:<br><br> <code>context.application = new Application(context.job, context.gerrit.project, context.platform, this)</code><br><br> <code>context.application.setConfig(context.gerrit.autouser, context.gerrit.host, context.gerrit.sshPort, context.gerrit.project)</code></td> </tr> <tr> <td><strong>Job(type: JobType.value, platform: Platform, script: Script)</strong> - Class that describe the Gerrit tool.</td> <td><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this"<br><br>Platform platform - Object of a class Platform().<br><br>JobType.value type.<br><br>String deployTemplatesDirectory - The name of the directory in application repository, where deploy templates are located. Can be set for particular Job through DEPLOY_TEMPLATES_DIRECTORY parameter.<br><br>String edpName - The name of the EDP Project.<br><br>Map stages - Contains all stages in JSON format that is retrieved from Jenkins job env variable.<br><br>String envToPromote - The name of the environment for promoting images.<br><br>Boolean promoteImages - Defines whether images should be promoted or not.<br><br> <strong>Methods</strong>:<br><br>getParameterValue(String parameter, String defaultValue = null): return parameter of ENV variable of Jenkins job. <br><br>init(): set all the properties of Job object. <br><br>setDisplayName(String displayName): set display name of the Jenkins job. <br><br>setDescription(String description, Boolean addDescription = false): set new or add to existing description of the Jenkins job. <br><br>printDebugInfo(Map context): print context info to log of Jenkins job. <br><br>runStage(String stage_name, Map context): run the particular stage according to its name. <br><br><strong>Example</strong>:<br><br> <code>context.job = new Job(JobType.DEPLOY.value, context.platform, this)</code> <code>context.job.init()</code> <code>context.job.printDebugInfo(context)</code> <code>context.job.setDisplayName("test")</code> <code>context.job.setDescription("Name: ${context.application.config.name}")</code></td> </tr> <tr> <td><strong>Gerrit(Job job, Platform platform, Script script)</strong> - Class that describe the Gerrit tool.</td> <td><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this".<br><br>Platform platform - Object of a class Platform(). <br><br>Job job - Object of a class Job().<br><br>String credentialsId - Credential Id in Jenkins for Gerrit. <br><br>String autouser - Username of autouser in Gerrit for integration with Jenkins. <br><br>String host - Gerrit host. <br><br>String project - project name of built application. <br><br>String branch - branch to build application from. <br><br>String changeNumber - change number of Gerrit commit. <br><br>String changeName - change name of Gerrit commit. <br><br>String refspecName - refspecName of Gerrit commit. <br><br>String sshPort - gerrit ssh port number. <br><br>String patchsetNumber - patchsetNumber of Gerrit commit.<br><br><strong>Methods</strong>:<br><br>init(): set all the properties of Gerrit object. <br><br><strong>Example</strong>:<br><br><code>context.gerrit = new Gerrit(context.job, context.platform, this)</code><br><code>context.gerrit.init()</code>.</td> </tr> <tr> <td><strong>Nexus(Job job, Platform platform, Script script)</strong> - Class that describe the Nexus tool.</td> <td><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this". <br><br>Platform platform - Object of a class Platform(). <br><br>Job job - Object of a class Job(). <br><br>String autouser - Username of autouser in Nexus for integration with Jenkins. <br><br>String credentialsId - Credential Id in Jenkins for Nexus. <br><br>String host - Nexus host. <br><br>String port - Nexus http(s) port. <br><br>String repositoriesUrl - Base URL of repositories in Nexus. <br><br>String restUrl - URL of Rest API. <br><br><strong>Methods</strong>:<br><br>init(): set all the properties of Nexus object. <br><br><strong>Example</strong>:<br><br> <code>context.nexus = new Nexus(context.job, context.platform, this)</code> <code>context.nexus.init()</code>.</td> </tr> </tbody> </table> <h3 id=edp-library-stages-description_1>EDP Library Stages Description<a class=headerlink href=#edp-library-stages-description_1 title="Permanent link">âš“ï¸Ž</a></h3> <p><em>Using in pipelines - @Library(['edp-library-stages@version'])</em> _</p> <p>The corresponding classes with methods can be used separately from the EDP Pipelines library function (please refer to <a href=#table10>Table 10</a>).</p> <p>Table 10. <a name=table10></a> Classes with the respective properties, methods, and examples.</p> <table> <thead> <tr> <th>Classes</th> <th>Description (properties, methods, and examples)</th> </tr> </thead> <tbody> <tr> <td><strong>StageFactory()</strong> - Class that contains methods getting implementation of particular stage either EDP from shared library or custom from application repository.</td> <td><strong>Properties</strong>:<br><br>Script script - Object with type script, in most cases if class created from Jenkins pipelines it is "this"<br><br>Map stages - Map of stages implementations<br><br><strong>Methods</strong>:<br><br>loadEdpStages(): return list of Classes that describes EDP stages implementations<br><br>loadCustomStages(String directory): return list of Classes that describes EDP custom stages from <br>application repository from "directory". The "directory" should be absolute path to files <br>with classes of custom stages implementations. Should be run from Jenkins agent.<br><br>add(Class clazz): register class for some particular stage in stages map of StageFactory class<br><br>getStage(String name, String buildTool, String type): return object of the class for particular stage <br>from stages property based on stage name and buildTool, type of application<br><br><br><strong>Example</strong>:<br><br><code>context.factory = new StageFactory(script: this)</code><br><code>context.factory.loadEdpStages().each() { context.factory.add(it) }</code><br><code>context.factory.loadCustomStages("${context.workDir}/stages").each() { context.factory.add(it) }</code><br><code>context.factory.getStage(stageName.toLowerCase(),context.application.config.build_tool.toLowerCase(),</code><br><code>context.application.config.type).run(context)</code>.</td> </tr> </tbody> </table> <h3 id=deploy-pipeline-stages>Deploy Pipeline Stages<a class=headerlink href=#deploy-pipeline-stages title="Permanent link">âš“ï¸Ž</a></h3> <p>Each EDP stage implementation has run method that is as input parameter required to pass a context map with different keys. Some stages can implement the logic for several build tools and application types, some of them are specific.</p> <p>The stages for the deploy pipeline are independent of the build tool and application type. Find below (see <a href=#table11>Table 11</a> ) the full description of every stage: <strong>Deploy â†’ Automated tests â†’ Promote Images</strong>.</p> <p>Table 11. <a name=table11></a> The Deploy, Automated tests, and Promote Images stages description.</p> <table> <thead> <tr> <th>Deploy</th> <th>Automated tests</th> <th>Promote Images</th> </tr> </thead> <tbody> <tr> <td>name = "deploy"<br>buildTool = null<br>type = null<br><br>context required:<br><br>â€¢ String context.workDir<br>â€¢ StageFactory context.factory<br>â€¢ String context.gerrit.autouser<br>â€¢ String context.gerrit.host<br>â€¢ String context.application.config.cloneUrl<br>â€¢ String context.jenkins.token<br>â€¢ String context.job.edpName<br>â€¢ String context.job.buildUrl<br>â€¢ String context.job.jenkinsUrl<br>â€¢ String context.job.metaProject<br>â€¢ List context.job.applicationsList [['name':'application1_name','version':'application1_version],...]<br>â€¢ String context.job.deployTemplatesDirectory<br>output:<br><br>â€¢ List context.job.updatedApplicaions [['name':'application1_name','version':'application1_version],...] <br></td> <td>name = "automation-tests", buildTool = null, type = null<br><br>context required:<br><br>- String context.workDir<br>- StageFactory context.factory<br>- String context.gerrit.credentialsId<br>- String context.autotest.config.cloneUrl<br>- String context.autotest.name<br>- String context.job.stageWithoutPrefixName<br>- String context.buildTool.settings<br>- String context.autotest.config.report_framework</td> <td>name = "promote-images"<br>buildTool = null<br>type = null<br><br>context required:<br><br>- String context.workDir<br>- String context.buildTool.sln_filename<br>- List context.job.updatedApplicaions [['name':'application1_name','version':'application1_version],...]</td> </tr> </tbody> </table> <h3 id=how-to-redefine-or-extend-edp-pipeline-stages-library_1>How to Redefine or Extend EDP Pipeline Stages Library<a class=headerlink href=#how-to-redefine-or-extend-edp-pipeline-stages-library_1 title="Permanent link">âš“ï¸Ž</a></h3> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Currently, the redefinition of Deploy pipeline stages is prohibited.</p> </div> <h3 id=using-edp-library-stages-in-the-pipeline>Using EDP Library Stages in the Pipeline<a class=headerlink href=#using-edp-library-stages-in-the-pipeline title="Permanent link">âš“ï¸Ž</a></h3> <p>In order to use the EDP stages, the created pipeline should fit some requirements, that`s why a developer has to do the following:</p> <ul> <li>import libraries - @Library(['edp-library-stages', 'edp-library-pipelines']) _</li> <li>import reference EDP classes(See example below)</li> <li>define context Map â€“ context = [:]</li> <li>define reference "init" stage</li> </ul> <p>After that, there is the ability to run any EDP stage beforehand by defining requirement context <code>context.job.runStage("Deploy", context)</code>.</p> <p><strong>For instance, the pipeline can look like</strong>:</p> <div class=highlight><pre><span></span><code><span class=nd>@Library</span><span class=p>(</span><span class=o>[</span><span class=err>&#39;</span><span class=n>edp</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>stages</span><span class=err>&#39;</span><span class=p>,</span><span class=w> </span><span class=err>&#39;</span><span class=n>edp</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>pipelines</span><span class=err>&#39;</span><span class=o>]</span><span class=p>)</span><span class=w> </span><span class=n>_</span><span class=w></span>

<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.stages.StageFactory</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.platform.PlatformFactory</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.platform.PlatformType</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.JobType</span><span class=w></span>

<span class=n>context</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>

<span class=n>node</span><span class=p>(</span><span class=err>&#39;</span><span class=n>master</span><span class=err>&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>	</span><span class=n>stage</span><span class=p>(</span><span class=s>&quot;Init&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>platform</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>PlatformFactory</span><span class=p>().</span><span class=na>getPlatformImpl</span><span class=p>(</span><span class=n>PlatformType</span><span class=p>.</span><span class=na>OPENSHIFT</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>com</span><span class=p>.</span><span class=na>epam</span><span class=p>.</span><span class=na>edp</span><span class=p>.</span><span class=na>Job</span><span class=p>(</span><span class=n>JobType</span><span class=p>.</span><span class=na>DEPLOY</span><span class=p>.</span><span class=na>value</span><span class=p>,</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>platform</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>.</span><span class=na>init</span><span class=p>()</span><span class=w></span>
<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>.</span><span class=na>initDeployJob</span><span class=p>()</span><span class=w></span>
<span class=w>		</span><span class=n>println</span><span class=p>(</span><span class=s>&quot;[JENKINS][DEBUG] Created object job with type - ${context.job.type}&quot;</span><span class=p>)</span><span class=w></span>

<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>nexus</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>com</span><span class=p>.</span><span class=na>epam</span><span class=p>.</span><span class=na>edp</span><span class=p>.</span><span class=na>Nexus</span><span class=p>(</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>,</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>platform</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>nexus</span><span class=p>.</span><span class=na>init</span><span class=p>()</span><span class=w></span>

<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>jenkins</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>com</span><span class=p>.</span><span class=na>epam</span><span class=p>.</span><span class=na>edp</span><span class=p>.</span><span class=na>Jenkins</span><span class=p>(</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>,</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>platform</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>jenkins</span><span class=p>.</span><span class=na>init</span><span class=p>()</span><span class=w></span>

<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>com</span><span class=p>.</span><span class=na>epam</span><span class=p>.</span><span class=na>edp</span><span class=p>.</span><span class=na>Gerrit</span><span class=p>(</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>,</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>platform</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=p>.</span><span class=na>init</span><span class=p>()</span><span class=w></span>

<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StageFactory</span><span class=p>(</span><span class=n>script</span><span class=p>:</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>loadEdpStages</span><span class=p>().</span><span class=na>each</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>it</span><span class=p>)</span><span class=w> </span><span class=p>}</span><span class=w></span>

<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>environment</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>com</span><span class=p>.</span><span class=na>epam</span><span class=p>.</span><span class=na>edp</span><span class=p>.</span><span class=na>Environment</span><span class=p>(</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>.</span><span class=na>deployProject</span><span class=p>,</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>platform</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>.</span><span class=na>printDebugInfo</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w></span>
<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>.</span><span class=na>setDisplayName</span><span class=p>(</span><span class=s>&quot;${currentBuild.displayName}-${context.job.deployProject}&quot;</span><span class=p>)</span><span class=w></span>

<span class=w>		</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>.</span><span class=na>generateInputDataForDeployJob</span><span class=p>()</span><span class=w></span>
<span class=w>	</span><span class=p>}</span><span class=w></span>

<span class=w>	</span><span class=n>stage</span><span class=p>(</span><span class=s>&quot;Pre Deploy Custom stage&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>		</span><span class=n>println</span><span class=p>(</span><span class=s>&quot;Some custom pre deploy logic&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>	</span><span class=p>}</span><span class=w></span>

<span class=w>	</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>.</span><span class=na>runStage</span><span class=p>(</span><span class=s>&quot;Deploy&quot;</span><span class=p>,</span><span class=w> </span><span class=n>context</span><span class=p>)</span><span class=w></span>

<span class=w>	</span><span class=n>stage</span><span class=p>(</span><span class=s>&quot;Post Deploy Custom stage&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>		</span><span class=n>println</span><span class=p>(</span><span class=s>&quot;Some custom post deploy logic&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>	</span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p><strong>Or in a declarative way</strong>:</p> <div class=highlight><pre><span></span><code><span class=nd>@Library</span><span class=p>(</span><span class=o>[</span><span class=err>&#39;</span><span class=n>edp</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>stages</span><span class=err>&#39;</span><span class=p>,</span><span class=w> </span><span class=err>&#39;</span><span class=n>edp</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>pipelines</span><span class=err>&#39;</span><span class=o>]</span><span class=p>)</span><span class=w> </span><span class=n>_</span><span class=w></span>

<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.stages.StageFactory</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.platform.PlatformFactory</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.platform.PlatformType</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>com.epam.edp.JobType</span><span class=w></span>

<span class=n>context</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>

<span class=n>pipeline</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>	</span><span class=n>agent</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>label</span><span class=w> </span><span class=err>&#39;</span><span class=n>master</span><span class=err>&#39;</span><span class=p>}</span><span class=w></span>
<span class=w>	</span><span class=n>stages</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>		</span><span class=n>stage</span><span class=p>(</span><span class=err>&#39;</span><span class=n>Init</span><span class=err>&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>			</span><span class=n>steps</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>				</span><span class=n>script</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>platform</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>PlatformFactory</span><span class=p>().</span><span class=na>getPlatformImpl</span><span class=p>(</span><span class=n>PlatformType</span><span class=p>.</span><span class=na>OPENSHIFT</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>com</span><span class=p>.</span><span class=na>epam</span><span class=p>.</span><span class=na>edp</span><span class=p>.</span><span class=na>Job</span><span class=p>(</span><span class=n>JobType</span><span class=p>.</span><span class=na>DEPLOY</span><span class=p>.</span><span class=na>value</span><span class=p>,</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>platform</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>.</span><span class=na>init</span><span class=p>()</span><span class=w></span>
<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>.</span><span class=na>initDeployJob</span><span class=p>()</span><span class=w></span>
<span class=w>					</span><span class=n>println</span><span class=p>(</span><span class=s>&quot;[JENKINS][DEBUG] Created object job with type - ${context.job.type}&quot;</span><span class=p>)</span><span class=w></span>

<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>nexus</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>com</span><span class=p>.</span><span class=na>epam</span><span class=p>.</span><span class=na>edp</span><span class=p>.</span><span class=na>Nexus</span><span class=p>(</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>,</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>platform</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>nexus</span><span class=p>.</span><span class=na>init</span><span class=p>()</span><span class=w></span>

<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>jenkins</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>com</span><span class=p>.</span><span class=na>epam</span><span class=p>.</span><span class=na>edp</span><span class=p>.</span><span class=na>Jenkins</span><span class=p>(</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>,</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>platform</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>jenkins</span><span class=p>.</span><span class=na>init</span><span class=p>()</span><span class=w></span>

<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>com</span><span class=p>.</span><span class=na>epam</span><span class=p>.</span><span class=na>edp</span><span class=p>.</span><span class=na>Gerrit</span><span class=p>(</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>,</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>platform</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>gerrit</span><span class=p>.</span><span class=na>init</span><span class=p>()</span><span class=w></span>

<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StageFactory</span><span class=p>(</span><span class=n>script</span><span class=p>:</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>loadEdpStages</span><span class=p>().</span><span class=na>each</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>it</span><span class=p>)</span><span class=w> </span><span class=p>}</span><span class=w></span>

<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>environment</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>com</span><span class=p>.</span><span class=na>epam</span><span class=p>.</span><span class=na>edp</span><span class=p>.</span><span class=na>Environment</span><span class=p>(</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>.</span><span class=na>deployProject</span><span class=p>,</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>platform</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>)</span><span class=w></span>
<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>.</span><span class=na>printDebugInfo</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w></span>
<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>.</span><span class=na>setDisplayName</span><span class=p>(</span><span class=s>&quot;${currentBuild.displayName}-${context.job.deployProject}&quot;</span><span class=p>)</span><span class=w></span>

<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>job</span><span class=p>.</span><span class=na>generateInputDataForDeployJob</span><span class=p>()</span><span class=w></span>
<span class=w>				</span><span class=p>}</span><span class=w></span>
<span class=w>			</span><span class=p>}</span><span class=w></span>
<span class=w>		</span><span class=p>}</span><span class=w></span>
<span class=w>		</span><span class=n>stage</span><span class=p>(</span><span class=err>&#39;</span><span class=n>Deploy</span><span class=err>&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>			</span><span class=n>steps</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>				</span><span class=n>script</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>					</span><span class=n>context</span><span class=p>.</span><span class=na>factory</span><span class=p>.</span><span class=na>getStage</span><span class=p>(</span><span class=s>&quot;deploy&quot;</span><span class=p>).</span><span class=na>run</span><span class=p>(</span><span class=n>context</span><span class=p>)</span><span class=w></span>
<span class=w>				</span><span class=p>}</span><span class=w></span>
<span class=w>			</span><span class=p>}</span><span class=w></span>
<span class=w>		</span><span class=p>}</span><span class=w></span>

<span class=w>		</span><span class=n>stage</span><span class=p>(</span><span class=err>&#39;</span><span class=n>Custom</span><span class=w> </span><span class=n>stage</span><span class=err>&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>			</span><span class=n>steps</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>				</span><span class=n>println</span><span class=p>(</span><span class=s>&quot;Some custom logic&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>			</span><span class=p>}</span><span class=w></span>
<span class=w>		</span><span class=p>}</span><span class=w></span>
<span class=w>	</span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <h3 id=related-articles>Related Articles<a class=headerlink href=#related-articles title="Permanent link">âš“ï¸Ž</a></h3> <ul> <li><a href=../add-application/ >Add Application</a></li> <li><a href=../add-library/ >Add Library</a></li> <li><a href=../add-cd-pipeline/ >Add CD Pipeline</a></li> <li><a href=../ci-pipeline-details/ >CI Pipeline Details</a></li> <li><a href=../cd-pipeline-details/ >CD Pipeline Details</a></li> <li><a href=../customize-ci-pipeline/ >Customize CI Pipeline</a></li> <li><a href=../customize-cd-pipeline/ >Customize CD Pipeline</a></li> <li><a href=../pipeline-stages/ >EDP Stages</a></li> <li><a href=../../glossary/ >Glossary</a></li> <li><a href=../terraform-stages/ >Use Terraform Library in EDP</a></li> </ul> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../cicd-overview/ class="md-footer__link md-footer__link--prev" aria-label="Previous: EDP CI/CD Overview" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> EDP CI/CD Overview </div> </div> </a> <a href=../add-custom-global-pipeline-lib/ class="md-footer__link md-footer__link--next" aria-label="Next: Add Custom Pipeline Library" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Add Custom Pipeline Library </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://hub.docker.com/u/epamedp target=_blank rel=noopener title=hub.docker.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input type=checkbox class=md-toggle id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=analytics checked> <span class=task-list-indicator></span> Google Analytics <label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">Accept</button> <button type=reset class="md-button md-button--primary">Reject</button> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);console.log(new FormData(form)),__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.sections", "navigation.tabs", "navigation.top", "announce.dismiss"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../assets/javascripts/bundle.9c69f0bc.min.js></script> <script src=../../js/mkdocs-charts-plugin.js></script> <script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script> <script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script> <script src=https://cdn.jsdelivr.net/npm/vega@5></script> <script src=https://cdn.jsdelivr.net/npm/vega-lite@5></script> <script src=https://cdn.jsdelivr.net/npm/vega-embed@6></script> <script src=https://unpkg.com/mermaid@8.14.0/dist/mermaid.min.js></script> </body> </html>