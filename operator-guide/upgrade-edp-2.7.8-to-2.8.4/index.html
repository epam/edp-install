<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://epam.github.io/edp-install/operator-guide/upgrade-edp-2.7.8-to-2.8.4/ rel=canonical><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.3.0, mkdocs-material-8.2.14"><title>Upgrade EDP v.2.7.8 to v.2.8.4 - EPAM Delivery Platform</title><link rel=stylesheet href=../../assets/stylesheets/main.3de6f41f.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.cc9b2e1e.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7ZV6PJ2LSP"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&gtag("event","search",{search_term:this.value})}),"undefined"!=typeof location$&&location$.subscribe(function(e){gtag("config","G-7ZV6PJ2LSP",{page_path:e.pathname})})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-7ZV6PJ2LSP"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=cyan data-md-color-accent=blue> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#upgrade-edp-v278-to-v284 class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="EPAM Delivery Platform" class="md-header__button md-logo" aria-label="EPAM Delivery Platform" data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> EPAM Delivery Platform </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Upgrade EDP v.2.7.8 to v.2.8.4 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=cyan data-md-color-accent=blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary data-md-color-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/epam/edp-install title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Overview </a> </li> <li class=md-tabs__item> <a href=../../features/ class=md-tabs__link> Basic Concepts </a> </li> <li class=md-tabs__item> <a href=../../getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> Operator Guide </a> </li> <li class=md-tabs__item> <a href=../../user-guide/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../developer-guide/ class=md-tabs__link> Developer Guide </a> </li> <li class=md-tabs__item> <a href=../../roadmap/ class=md-tabs__link> RoadMap </a> </li> <li class=md-tabs__item> <a href=../../use-cases/ class=md-tabs__link> Use Cases </a> </li> <li class=md-tabs__item> <a href=../../faq/ class=md-tabs__link> FAQ </a> </li> <li class=md-tabs__item> <a href=../../glossary/ class=md-tabs__link> Glossary </a> </li> <li class=md-tabs__item> <a href=https://github.com/epam/edp-install/blob/master/RELEASES.md class=md-tabs__link> Releases â§‰ </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="EPAM Delivery Platform" class="md-nav__button md-logo" aria-label="EPAM Delivery Platform" data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> EPAM Delivery Platform </label> <div class=md-nav__source> <a href=https://github.com/epam/edp-install title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../features/ class=md-nav__link> Basic Concepts </a> </li> <li class=md-nav__item> <a href=../../getting-started/ class=md-nav__link> Getting Started </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Operator Guide <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Operator Guide" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Operator Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Installation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Installation data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_1 type=checkbox id=__nav_4_2_1> <label class=md-nav__link for=__nav_4_2_1> Prerequisites <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Prerequisites data-md-level=3> <label class=md-nav__title for=__nav_4_2_1> <span class="md-nav__icon md-icon"></span> Prerequisites </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../install-ingress-nginx/ class=md-nav__link> Install Ingress-nginx </a> </li> <li class=md-nav__item> <a href=../install-keycloak/ class=md-nav__link> Install Keycloak </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_1_3 type=checkbox id=__nav_4_2_1_3> <label class=md-nav__link for=__nav_4_2_1_3> Kiosk <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Kiosk data-md-level=4> <label class=md-nav__title for=__nav_4_2_1_3> <span class="md-nav__icon md-icon"></span> Kiosk </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../edp-kiosk-usage/ class=md-nav__link> EDP Kiosk Usage </a> </li> <li class=md-nav__item> <a href=../install-kiosk/ class=md-nav__link> Set Up Kiosk </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../kubernetes-cluster-settings/ class=md-nav__link> Set Up Kubernetes </a> </li> <li class=md-nav__item> <a href=../openshift-cluster-settings/ class=md-nav__link> Set Up OpenShift </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../install-edp/ class=md-nav__link> Install EDP </a> </li> <li class=md-nav__item> <a href=../install-argocd/ class=md-nav__link> Install Argo CD </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Configuration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Configuration data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../add-other-code-language/ class=md-nav__link> Add Other Code Language </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2 type=checkbox id=__nav_4_3_2> <label class=md-nav__link for=__nav_4_3_2> Backup With Velero <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Backup With Velero" data-md-level=3> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> Backup With Velero </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../install-velero/ class=md-nav__link> Install Velero </a> </li> <li class=md-nav__item> <a href=../restore-edp-with-velero/ class=md-nav__link> Restore EDP Tenant With Velero </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../import-strategy/ class=md-nav__link> Enable VCS Import Strategy </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4 type=checkbox id=__nav_4_3_4> <label class=md-nav__link for=__nav_4_3_4> Manage Jenkins Pipelines <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Manage Jenkins Pipelines" data-md-level=3> <label class=md-nav__title for=__nav_4_3_4> <span class="md-nav__icon md-icon"></span> Manage Jenkins Pipelines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../overview-manage-jenkins-pipelines/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../manage-jenkins-ci-job-provision/ class=md-nav__link> Manage Jenkins CI Pipeline Job Provisioner </a> </li> <li class=md-nav__item> <a href=../manage-jenkins-cd-job-provision/ class=md-nav__link> Manage Jenkins CD Pipeline Job Provisioner </a> </li> <li class=md-nav__item> <a href=../delete-jenkins-job-provision/ class=md-nav__link> Delete Jenkins Job Provision </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_5 type=checkbox id=__nav_4_3_5> <label class=md-nav__link for=__nav_4_3_5> Logging <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Logging data-md-level=3> <label class=md-nav__title for=__nav_4_3_5> <span class="md-nav__icon md-icon"></span> Logging </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../install-loki/ class=md-nav__link> Install Grafana Loki </a> </li> <li class=md-nav__item> <a href=../multitenant-logging/ class=md-nav__link> Multitenant Logging </a> </li> <li class=md-nav__item> <a href=../schedule-pods-restart/ class=md-nav__link> Schedule Pods Restart </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Integration data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_1 type=checkbox id=__nav_4_4_1> <label class=md-nav__link for=__nav_4_4_1> AWS Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="AWS Integration" data-md-level=3> <label class=md-nav__title for=__nav_4_4_1> <span class="md-nav__icon md-icon"></span> AWS Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../waf-tf-configuration/ class=md-nav__link> Configure AWS WAF With Terraform </a> </li> <li class=md-nav__item> <a href=../enable-irsa/ class=md-nav__link> Associate IAM Roles With Service Accounts </a> </li> <li class=md-nav__item> <a href=../kaniko-irsa/ class=md-nav__link> IAM Roles for Kaniko Service Accounts </a> </li> <li class=md-nav__item> <a href=../velero-irsa/ class=md-nav__link> IAM Roles for Velero Service Accounts </a> </li> <li class=md-nav__item> <a href=../loki-irsa/ class=md-nav__link> IAM Roles for Loki Service Accounts </a> </li> <li class=md-nav__item> <a href=../configure-keycloak-oidc-eks/ class=md-nav__link> EKS OIDC With Keycloak </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_2 type=checkbox id=__nav_4_4_2> <label class=md-nav__link for=__nav_4_4_2> Jira Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Jira Integration" data-md-level=3> <label class=md-nav__title for=__nav_4_4_2> <span class="md-nav__icon md-icon"></span> Jira Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../jira-integration/ class=md-nav__link> Adjust Jira Integration </a> </li> <li class=md-nav__item> <a href=../jira-gerrit-integration/ class=md-nav__link> Adjust VCS Integration With Jira </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_3 type=checkbox id=__nav_4_4_3> <label class=md-nav__link for=__nav_4_4_3> GitHub Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="GitHub Integration" data-md-level=3> <label class=md-nav__title for=__nav_4_4_3> <span class="md-nav__icon md-icon"></span> GitHub Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../github-integration/ class=md-nav__link> GitHub Integration </a> </li> <li class=md-nav__item> <a href=../github-debug-webhooks/ class=md-nav__link> Debug GitHub Webhooks in Jenkins </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_4 type=checkbox id=__nav_4_4_4> <label class=md-nav__link for=__nav_4_4_4> GitLab Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="GitLab Integration" data-md-level=3> <label class=md-nav__title for=__nav_4_4_4> <span class="md-nav__icon md-icon"></span> GitLab Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../gitlab-integration/ class=md-nav__link> GitLab Integration </a> </li> <li class=md-nav__item> <a href=../gitlabci-integration/ class=md-nav__link> Adjust GitLab CI Tool </a> </li> <li class=md-nav__item> <a href=../gitlab-debug-webhooks/ class=md-nav__link> Debug GitLab Webhooks in Jenkins </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../perf-integration/ class=md-nav__link> Perf Server Integration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5 checked> <label class=md-nav__link for=__nav_4_5> Upgrade <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Upgrade data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Upgrade </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_1 type=checkbox id=__nav_4_5_1 checked> <label class=md-nav__link for=__nav_4_5_1> EDP on Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="EDP on Kubernetes" data-md-level=3> <label class=md-nav__title for=__nav_4_5_1> <span class="md-nav__icon md-icon"></span> EDP on Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Upgrade EDP v.2.7.8 to v.2.8.4 <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Upgrade EDP v.2.7.8 to v.2.8.4 </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#possible-issues class=md-nav__link> Possible Issues </a> <nav class=md-nav aria-label="Possible Issues"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#related-articles class=md-nav__link> Related Articles </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../upgrade-edp-2.8.4-to-2.9.0/ class=md-nav__link> Upgrade EDP v.2.8.4 to v.2.9.0 </a> </li> <li class=md-nav__item> <a href=../upgrade-edp-2.9.0-to-2.10.2/ class=md-nav__link> Upgrade EDP v.2.9.0 to v.2.10.2 </a> </li> <li class=md-nav__item> <a href=../upgrade-edp-unreleased/ class=md-nav__link> Unreleased </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_2 type=checkbox id=__nav_4_5_2> <label class=md-nav__link for=__nav_4_5_2> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=3> <label class=md-nav__title for=__nav_4_5_2> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../deploy-aws-eks/ class=md-nav__link> Deploy AWS EKS Cluster </a> </li> <li class=md-nav__item> <a href=../add-jenkins-agent/ class=md-nav__link> Manage Jenkins Agent </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> User Guide <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="User Guide" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2> Application <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Application data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Application </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/application/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user-guide/add-application/ class=md-nav__link> Add Application </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_3 type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3> Autotest <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Autotest data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Autotest </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/autotest/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user-guide/add-autotest/ class=md-nav__link> Add Autotests </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_4 type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4> Library <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Library data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Library </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/library/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user-guide/add-library/ class=md-nav__link> Add Library </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5 type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5> Pipelines <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Pipelines data-md-level=2> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Pipelines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/cicd-overview/ class=md-nav__link> EDP CI/CD Overview </a> </li> <li class=md-nav__item> <a href=../../user-guide/pipeline-framework/ class=md-nav__link> EDP Pipeline Framework </a> </li> <li class=md-nav__item> <a href=../../user-guide/add-custom-global-pipeline-lib/ class=md-nav__link> Add Custom Pipeline Library </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5_4 type=checkbox id=__nav_5_5_4> <label class=md-nav__link for=__nav_5_5_4> CI Pipeline <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="CI Pipeline" data-md-level=3> <label class=md-nav__title for=__nav_5_5_4> <span class="md-nav__icon md-icon"></span> CI Pipeline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/ci-pipeline-details/ class=md-nav__link> CI Pipeline Details </a> </li> <li class=md-nav__item> <a href=../../user-guide/code-review-pipeline/ class=md-nav__link> Code Review Pipeline </a> </li> <li class=md-nav__item> <a href=../../user-guide/build-pipeline/ class=md-nav__link> Build Pipeline </a> </li> <li class=md-nav__item> <a href=../../user-guide/customize-ci-pipeline/ class=md-nav__link> Customize CI Pipeline </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5_4_5 type=checkbox id=__nav_5_5_4_5> <label class=md-nav__link for=__nav_5_5_4_5> Stages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Stages data-md-level=4> <label class=md-nav__title for=__nav_5_5_4_5> <span class="md-nav__icon md-icon"></span> Stages </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/pipeline-stages/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user-guide/dockerfile-stages/ class=md-nav__link> Use Dockerfile Linters for Code Review Pipeline </a> </li> <li class=md-nav__item> <a href=../../user-guide/ecr-to-docker-stages/ class=md-nav__link> Promote Docker Images From ECR to Docker Hub </a> </li> <li class=md-nav__item> <a href=../../user-guide/helm-stages/ class=md-nav__link> Helm Chart Testing and Documentation Tools </a> </li> <li class=md-nav__item> <a href=../../user-guide/opa-stages/ class=md-nav__link> Use Open Policy Agent </a> </li> <li class=md-nav__item> <a href=../../user-guide/terraform-stages/ class=md-nav__link> CI Pipeline for Terraform </a> </li> <li class=md-nav__item> <a href=../../user-guide/container-stages/ class=md-nav__link> CI Pipeline for Container </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5_5 type=checkbox id=__nav_5_5_5> <label class=md-nav__link for=__nav_5_5_5> CD Pipeline <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="CD Pipeline" data-md-level=3> <label class=md-nav__title for=__nav_5_5_5> <span class="md-nav__icon md-icon"></span> CD Pipeline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/cd-pipeline-details/ class=md-nav__link> CD Pipeline Details </a> </li> <li class=md-nav__item> <a href=../../user-guide/add-cd-pipeline/ class=md-nav__link> Add CD Pipeline </a> </li> <li class=md-nav__item> <a href=../../user-guide/customize-cd-pipeline/ class=md-nav__link> Customize CD Pipeline </a> </li> <li class=md-nav__item> <a href=../../user-guide/prepare-for-release/ class=md-nav__link> Prepare for Release </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5_5_5 type=checkbox id=__nav_5_5_5_5> <label class=md-nav__link for=__nav_5_5_5_5> Stages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Stages data-md-level=4> <label class=md-nav__title for=__nav_5_5_5_5> <span class="md-nav__icon md-icon"></span> Stages </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/copy-shared-secrets/ class=md-nav__link> Copy Shared Secrets </a> </li> <li class=md-nav__item> <a href=../../user-guide/helm-release-deletion/ class=md-nav__link> Helm Release Deletion </a> </li> <li class=md-nav__item> <a href=../../user-guide/semi-auto-deploy/ class=md-nav__link> Semi Auto Deploy </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../user-guide/d-d-diagram/ class=md-nav__link> Delivery Dashboard Diagram </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Developer Guide <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developer Guide" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Developer Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer-guide/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../developer-guide/local-development/ class=md-nav__link> Local Development </a> </li> <li class=md-nav__item> <a href=../../developer-guide/rest-api/ class=md-nav__link> EDP API </a> </li> <li class=md-nav__item> <a href=../../developer-guide/mk-docs-development/ class=md-nav__link> Documentation Flow </a> </li> <li class=md-nav__item> <a href=../../developer-guide/edp-workflow/ class=md-nav__link> EDP Project Rules. Working Process </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../roadmap/ class=md-nav__link> RoadMap </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Use Cases <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Use Cases" data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Use Cases </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../use-cases/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../use-cases/autotest-as-quality-gate/ class=md-nav__link> Autotest as Quality Gate </a> </li> <li class=md-nav__item> <a href=../../use-cases/promotion-procedure/ class=md-nav__link> Promote Application in CD Pipeline </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../faq/ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=../../glossary/ class=md-nav__link> Glossary </a> </li> <li class=md-nav__item> <a href=https://github.com/epam/edp-install/blob/master/RELEASES.md class=md-nav__link> Releases â§‰ </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#possible-issues class=md-nav__link> Possible Issues </a> <nav class=md-nav aria-label="Possible Issues"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#related-articles class=md-nav__link> Related Articles </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=upgrade-edp-v278-to-v284>Upgrade EDP v.2.7.8 to v.2.8.4<a class=headerlink href=#upgrade-edp-v278-to-v284 title="Permanent link">âš“ï¸Ž</a></h1> <p>This section provides the details on the EDP upgrade from the v.2.7.8 to the v.2.8.4. Explore the actions and requirements below.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Kiosk is implemented and mandatory for EDP v.2.8.4 and is optional for EDP v.2.9.0 and higher.</p> </div> <p>To upgrade EDP v.2.7.8 to the v.2.8.4, take the following steps:</p> <ol> <li> <p>Deploy and configure Kiosk (create a Service Account, Account, and ClusterRoleBinging) according to the <a href=../install-kiosk/#installation>Set Up Kiosk</a> documentation.</p> <ul> <li>Update the <em>spec</em> field in the Kiosk space:<div class=codehilite><pre><span></span><code><span class=n>apiVersion</span><span class=o>:</span><span class=w> </span><span class=n>tenancy</span><span class=o>.</span><span class=na>kiosk</span><span class=o>.</span><span class=na>sh</span><span class=o>/</span><span class=n>v1alpha1</span><span class=w></span>
<span class=n>kind</span><span class=o>:</span><span class=w> </span><span class=n>Space</span><span class=w></span>
<span class=n>metadata</span><span class=o>:</span><span class=w></span>
<span class=w>  </span><span class=n>name</span><span class=o>:</span><span class=w> </span><span class=o>&lt;</span><span class=n>edp</span><span class=o>-</span><span class=n>project</span><span class=o>&gt;</span><span class=w></span>
<span class=n>spec</span><span class=o>:</span><span class=w></span>
<span class=w>  </span><span class=n>account</span><span class=o>:</span><span class=w> </span><span class=o>&lt;</span><span class=n>edp</span><span class=o>-</span><span class=n>project</span><span class=o>&gt;-</span><span class=n>admin</span><span class=w></span>
</code></pre></div> </li> </ul> <ul> <li> <p>Create RoleBinding (required for namespaces created before using Kiosk):</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>In the <strong>uid</strong> field under the <strong>ownerReferences</strong> in the Kubernetes manifest, indicate the Account Custom Resource ID from <em>accounts.config.kiosk.sh</em><br> <code>kubectl get account &lt;edp-project&gt;-admin -o=custom-columns=NAME:.metadata.uid --no-headers=true</code></p> </div> <p><details> <summary><b>View: rolebinding-kiosk.yaml</b></summary></p> <div class=codehilite><pre><span></span><code><span class=n>apiVersion</span><span class=o>:</span><span class=w> </span><span class=n>rbac</span><span class=o>.</span><span class=na>authorization</span><span class=o>.</span><span class=na>k8s</span><span class=o>.</span><span class=na>io</span><span class=o>/</span><span class=n>v1</span><span class=w></span>
<span class=n>kind</span><span class=o>:</span><span class=w> </span><span class=n>RoleBinding</span><span class=w></span>
<span class=n>metadata</span><span class=o>:</span><span class=w></span>
<span class=w>  </span><span class=n>generateName</span><span class=o>:</span><span class=w> </span><span class=o>&lt;</span><span class=n>edp</span><span class=o>-</span><span class=n>project</span><span class=o>&gt;-</span><span class=n>admin</span><span class=o>-</span><span class=w></span>
<span class=w>  </span><span class=kd>namespace</span><span class=o>:</span><span class=w> </span><span class=o>&lt;</span><span class=n>edp</span><span class=o>-</span><span class=n>project</span><span class=o>&gt;</span><span class=w></span>
<span class=w>  </span><span class=n>ownerReferences</span><span class=o>:</span><span class=w></span>
<span class=w>  </span><span class=o>-</span><span class=w> </span><span class=n>apiVersion</span><span class=o>:</span><span class=w> </span><span class=n>config</span><span class=o>.</span><span class=na>kiosk</span><span class=o>.</span><span class=na>sh</span><span class=o>/</span><span class=n>v1alpha1</span><span class=w></span>
<span class=w>    </span><span class=n>blockOwnerDeletion</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w></span>
<span class=w>    </span><span class=n>controller</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w></span>
<span class=w>    </span><span class=n>kind</span><span class=o>:</span><span class=w> </span><span class=n>Account</span><span class=w></span>
<span class=w>    </span><span class=n>name</span><span class=o>:</span><span class=w> </span><span class=o>&lt;</span><span class=n>edp</span><span class=o>-</span><span class=n>project</span><span class=o>&gt;-</span><span class=n>admin</span><span class=w></span>
<span class=w>    </span><span class=n>uid</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w></span>
<span class=n>roleRef</span><span class=o>:</span><span class=w></span>
<span class=w>  </span><span class=n>apiGroup</span><span class=o>:</span><span class=w> </span><span class=n>rbac</span><span class=o>.</span><span class=na>authorization</span><span class=o>.</span><span class=na>k8s</span><span class=o>.</span><span class=na>io</span><span class=w></span>
<span class=w>  </span><span class=n>kind</span><span class=o>:</span><span class=w> </span><span class=n>ClusterRole</span><span class=w></span>
<span class=w>  </span><span class=n>name</span><span class=o>:</span><span class=w> </span><span class=n>kiosk</span><span class=o>-</span><span class=n>space</span><span class=o>-</span><span class=n>admin</span><span class=w></span>
<span class=n>subjects</span><span class=o>:</span><span class=w></span>
<span class=o>-</span><span class=w> </span><span class=n>kind</span><span class=o>:</span><span class=w> </span><span class=n>ServiceAccount</span><span class=w></span>
<span class=w>  </span><span class=n>name</span><span class=o>:</span><span class=w> </span><span class=o>&lt;</span><span class=n>edp</span><span class=o>-</span><span class=n>project</span><span class=o>&gt;</span><span class=w></span>
<span class=w>  </span><span class=kd>namespace</span><span class=o>:</span><span class=w> </span><span class=n>security</span><span class=w></span>
</code></pre></div> </details> <div class=codehilite><pre><span></span><code>kubectl create -f rolebinding-kiosk.yaml
</code></pre></div> </li> </ul> </li> <li> <p>With Amazon Elastic Container Registry to store the images, there are two options:</p> <ul> <li>Enable IRSA and create AWS IAM Role for Kaniko image builder. Please refer to the <a href=../kaniko-irsa/ >IAM Roles for Kaniko Service Accounts</a> section for the details.</li> <li>The Amazon Elastic Container Registry Roles can be stored in an <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html>instance profile</a>.</li> </ul> </li> <li> <p>Update Custom Resource Definitions by applying all the necessary CRD to the cluster with the command below:</p> <div class=codehilite><pre><span></span><code>kubectl apply -f https://raw.githubusercontent.com/epam/edp-cd-pipeline-operator/release/2.8/deploy-templates/crds/edp_v1alpha1_cdpipeline_crd.yaml
kubectl apply -f https://raw.githubusercontent.com/epam/edp-codebase-operator/release/2.8/deploy-templates/crds/edp_v1alpha1_codebase_crd.yaml
kubectl apply -f https://raw.githubusercontent.com/epam/edp-codebase-operator/release/2.8/deploy-templates/crds/edp_v1alpha1_cd_stage_deploy_crd.yaml
kubectl apply -f https://raw.githubusercontent.com/epam/edp-jenkins-operator/release/2.8/deploy-templates/crds/v2_v1alpha1_jenkinsjobbuildrun_crd.yaml
kubectl apply -f https://raw.githubusercontent.com/epam/edp-jenkins-operator/release/2.8/deploy-templates/crds/v2_v1alpha1_cdstagejenkinsdeployment_crd.yaml
kubectl apply -f https://raw.githubusercontent.com/epam/edp-jenkins-operator/release/2.8/deploy-templates/crds/v2_v1alpha1_jenkinsjob_crd.yaml
kubectl apply -f https://raw.githubusercontent.com/epam/edp-nexus-operator/release/2.8/deploy-templates/crds/edp_v1alpha1_nexus_crd.yaml
kubectl apply -f https://raw.githubusercontent.com/epam/edp-keycloak-operator/release/1.8/deploy-templates/crds/v1_v1alpha1_keycloakauthflow_crd.yaml
</code></pre></div> </li> <li> <p>With Amazon Elastic Container Registry to store and Kaniko to build the images, add the <strong>kanikoRoleArn</strong> parameter to the values before starting the update process. This parameter is indicated in AWS Roles once IRSA is enabled and AWS IAM Role is created for Kaniko. The value should look as follows:</p> <div class=codehilite><pre><span></span><code><span class=n>kanikoRoleArn</span><span class=o>:</span><span class=w> </span><span class=n>arn</span><span class=o>:</span><span class=n>aws</span><span class=o>:</span><span class=n>iam</span><span class=o>::&lt;</span><span class=n>AWS_ACCOUNT_ID</span><span class=o>&gt;:</span><span class=n>role</span><span class=o>/</span><span class=n>AWSIRSA</span><span class=err>â€¹</span><span class=n>CLUSTER_NAME</span><span class=err>â€ºâ€¹</span><span class=n>EDP_NAMESPACE</span><span class=err>â€º</span><span class=n>Kaniko</span><span class=w></span>
</code></pre></div> </li> <li> <p>To upgrade EDP to the v.2.8.4, run the following command:</p> <div class=codehilite><pre><span></span><code>helm upgrade edp epamedp/edp-install -n &lt;edp-namespace&gt; --values values.yaml --version=2.8.4
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>To verify the installation, it is possible to test the deployment before applying it to the cluster with:<br> <code>helm upgrade edp epamedp/edp-install -n &lt;edp-namespace&gt; --values values.yaml --version=2.8.4 --dry-run</code></p> </div> </li> <li> <p>Remove the following Kubernetes resources left from the previous EDP installation (it is optional):</p> <div class=codehilite><pre><span></span><code>kubectl delete cm luminatesec-conf -n &lt;edp-namespace&gt;
kubectl delete sa edp edp-perf-operator -n &lt;edp-namespace&gt;
kubectl delete deployment perf-operator -n &lt;edp-namespace&gt;
kubectl delete clusterrole edp-&lt;edp-namespace&gt; edp-perf-operator-&lt;edp-namespace&gt;
kubectl delete clusterrolebinding edp-&lt;edp-namespace&gt; edp-perf-operator-&lt;edp-namespace&gt;
kubectl delete rolebinding edp-&lt;edp-namespace&gt; edp-perf-operator-&lt;edp-namespace&gt;-admin -n &lt;edp-namespace&gt;
kubectl delete perfserver epam-perf -n &lt;edp-namespace&gt;
kubectl delete services.v2.edp.epam.com postgres rabbit-mq -n &lt;edp-namespace&gt;
</code></pre></div> </li> <li> <p>Update the CI and CD Jenkins job provisioners:<br></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Please refer to the <a href=../manage-jenkins-ci-job-provision/ >Manage Jenkins CI Pipeline Job Provisioner</a> section for the details.</p> </div> <details> <summary><b>View: Default CI provisioner template for EDP 2.8.4</b></summary> <div class=highlight><pre><span></span><code><span class=cm>/* Copyright 2021 EPAM Systems.</span>

<span class=cm>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class=cm>you may not use this file except in compliance with the License.</span>
<span class=cm>You may obtain a copy of the License at</span>
<span class=cm>http://www.apache.org/licenses/LICENSE-2.0</span>

<span class=cm>Unless required by applicable law or agreed to in writing, software</span>
<span class=cm>distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class=cm>WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>

<span class=cm>See the License for the specific language governing permissions and</span>
<span class=cm>limitations under the License. */</span><span class=w></span>

<span class=kn>import</span><span class=w> </span><span class=nn>groovy.json.*</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>jenkins.model.Jenkins</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>hudson.model.*</span><span class=w></span>

<span class=n>Jenkins</span><span class=w> </span><span class=n>jenkins</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Jenkins</span><span class=p>.</span><span class=na>instance</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>stages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=p>:</span><span class=o>]</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Boolean</span><span class=p>.</span><span class=na>parseBoolean</span><span class=p>(</span><span class=s>&quot;${JIRA_INTEGRATION_ENABLED}&quot;</span><span class=w> </span><span class=n>as</span><span class=w> </span><span class=n>String</span><span class=p>)</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>commitValidateStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;commit-validate&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=err>&#39;&#39;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>createJIMStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;create-jira-issue-metadata&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=err>&#39;&#39;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>buildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${BUILD_TOOL}&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>goBuildStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>buildTool</span><span class=p>.</span><span class=na>toString</span><span class=p>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s>&quot;go&quot;</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;build&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;compile&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w></span>

<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Code</span><span class=o>-</span><span class=n>review</span><span class=o>-</span><span class=n>application</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gerrit-checkout&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>goBuildStage</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tests&quot;</span><span class=p>},</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;sonar&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;dockerfile-lint&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;helm-lint&quot;</span><span class=p>}</span><span class=o>]]</span><span class=err>&#39;</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Code</span><span class=o>-</span><span class=n>review</span><span class=o>-</span><span class=n>library</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gerrit-checkout&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;compile&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tests&quot;</span><span class=p>},</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w>        </span><span class=err>&#39;</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;sonar&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Code</span><span class=o>-</span><span class=n>review</span><span class=o>-</span><span class=n>autotests</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gerrit-checkout&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;get-version&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tests&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;sonar&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=sc>&#39;]&#39;</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Code</span><span class=o>-</span><span class=n>review</span><span class=o>-</span><span class=k>default</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gerrit-checkout&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=sc>&#39;]&#39;</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Code</span><span class=o>-</span><span class=n>review</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>terraform</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gerrit-checkout&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;terraform-lint&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Code</span><span class=o>-</span><span class=n>review</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>opa</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gerrit-checkout&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tests&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Code</span><span class=o>-</span><span class=n>review</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>codenarc</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gerrit-checkout&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;sonar&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;build&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>

<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>maven</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;checkout&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;get-version&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;compile&quot;</span><span class=p>},</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w>        </span><span class=err>&#39;</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tests&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;sonar&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;build&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;push&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;git-tag&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>npm</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>maven</span><span class=err>&#39;</span><span class=o>]</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>gradle</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>maven</span><span class=err>&#39;</span><span class=o>]</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>dotnet</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;checkout&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;get-version&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;compile&quot;</span><span class=p>},</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w>        </span><span class=err>&#39;</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tests&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;sonar&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;push&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;git-tag&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>python</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;checkout&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;get-version&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;compile&quot;</span><span class=p>},</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w>        </span><span class=err>&#39;</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tests&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;sonar&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;push&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;git-tag&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>terraform</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;checkout&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;get-version&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;terraform-lint&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;terraform-plan&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;terraform-apply&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;git-tag&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>opa</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;checkout&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;get-version&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tests&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;git-tag&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>library</span><span class=o>-</span><span class=n>codenarc</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;checkout&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;get-version&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;sonar&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;build&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w>    </span><span class=s>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;git-tag&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>


<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>application</span><span class=o>-</span><span class=n>maven</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;checkout&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;get-version&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;compile&quot;</span><span class=p>},</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w>        </span><span class=err>&#39;</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tests&quot;</span><span class=p>},</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;sonar&quot;</span><span class=p>}</span><span class=o>]</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;build&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;build-image-kaniko&quot;</span><span class=p>},</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w>        </span><span class=err>&#39;</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;push&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;git-tag&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>application</span><span class=o>-</span><span class=n>npm</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>application</span><span class=o>-</span><span class=n>maven</span><span class=err>&#39;</span><span class=o>]</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>application</span><span class=o>-</span><span class=n>gradle</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>application</span><span class=o>-</span><span class=n>maven</span><span class=err>&#39;</span><span class=o>]</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>application</span><span class=o>-</span><span class=n>dotnet</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;checkout&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;get-version&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;compile&quot;</span><span class=p>},</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w>        </span><span class=err>&#39;</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tests&quot;</span><span class=p>},</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;sonar&quot;</span><span class=p>}</span><span class=o>]</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;build-image-kaniko&quot;</span><span class=p>},</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w>        </span><span class=err>&#39;</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;push&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;git-tag&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>application</span><span class=o>-</span><span class=n>go</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;checkout&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;get-version&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tests&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;sonar&quot;</span><span class=p>},</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w>                                </span><span class=err>&#39;</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;build&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;build-image-kaniko&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w>                                </span><span class=s>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;git-tag&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>
<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Build</span><span class=o>-</span><span class=n>application</span><span class=o>-</span><span class=n>python</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;checkout&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;get-version&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;compile&quot;</span><span class=p>},</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w>                                </span><span class=err>&#39;</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tests&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;sonar&quot;</span><span class=p>},</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w>                                </span><span class=err>&#39;</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;build-image-kaniko&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;push&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w></span>
<span class=w>                                </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;git-tag&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>

<span class=n>stages</span><span class=o>[</span><span class=err>&#39;</span><span class=n>Create</span><span class=o>-</span><span class=n>release</span><span class=err>&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;checkout&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;create-branch&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;trigger-job&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>

<span class=n>def</span><span class=w> </span><span class=n>defaultBuild</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;checkout&quot;</span><span class=p>}</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=sc>&#39;]&#39;</span><span class=w></span>

<span class=n>def</span><span class=w> </span><span class=n>codebaseName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${NAME}&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>gitServerCrName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${GIT_SERVER_CR_NAME}&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${GIT_SERVER_CR_VERSION}&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${GIT_CREDENTIALS_ID ? GIT_CREDENTIALS_ID : &#39;gerrit-ciuser-sshkey&#39;}&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>repositoryPath</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${REPOSITORY_PATH}&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>defaultBranch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${DEFAULT_BRANCH}&quot;</span><span class=w></span>

<span class=n>def</span><span class=w> </span><span class=n>codebaseFolder</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jenkins</span><span class=p>.</span><span class=na>getItem</span><span class=p>(</span><span class=n>codebaseName</span><span class=p>)</span><span class=w></span>
<span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>codebaseFolder</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>folder</span><span class=p>(</span><span class=n>codebaseName</span><span class=p>)</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=n>createListView</span><span class=p>(</span><span class=n>codebaseName</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Releases&quot;</span><span class=p>)</span><span class=w></span>
<span class=n>createReleasePipeline</span><span class=p>(</span><span class=s>&quot;Create-release-${codebaseName}&quot;</span><span class=p>,</span><span class=w> </span><span class=n>codebaseName</span><span class=p>,</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=s>&quot;Create-release&quot;</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=s>&quot;create-release.groovy&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=n>repositoryPath</span><span class=p>,</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=p>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=p>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=p>,</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=p>,</span><span class=w> </span><span class=n>defaultBranch</span><span class=p>)</span><span class=w></span>

<span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>buildTool</span><span class=p>.</span><span class=na>toString</span><span class=p>().</span><span class=na>equalsIgnoreCase</span><span class=p>(</span><span class=err>&#39;</span><span class=n>none</span><span class=err>&#39;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>BRANCH</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>def</span><span class=w> </span><span class=n>branch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${BRANCH}&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>def</span><span class=w> </span><span class=n>formattedBranch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${branch.toUpperCase().replaceAll(/\\//, &quot;</span><span class=o>-</span><span class=s>&quot;)}&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>createListView</span><span class=p>(</span><span class=n>codebaseName</span><span class=p>,</span><span class=w> </span><span class=n>formattedBranch</span><span class=p>)</span><span class=w></span>

<span class=w>    </span><span class=n>def</span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${TYPE}&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>def</span><span class=w> </span><span class=n>crKey</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getStageKeyName</span><span class=p>(</span><span class=n>buildTool</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>createCiPipeline</span><span class=p>(</span><span class=s>&quot;Code-review-${codebaseName}&quot;</span><span class=p>,</span><span class=w> </span><span class=n>codebaseName</span><span class=p>,</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=n>crKey</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=s>&quot;code-review.groovy&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=n>repositoryPath</span><span class=p>,</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=p>,</span><span class=w> </span><span class=n>branch</span><span class=p>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=p>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=p>)</span><span class=w></span>

<span class=w>    </span><span class=n>def</span><span class=w> </span><span class=n>buildKey</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Build-${type}-${buildTool.toLowerCase()}&quot;</span><span class=p>.</span><span class=na>toString</span><span class=p>()</span><span class=w></span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>type</span><span class=p>.</span><span class=na>equalsIgnoreCase</span><span class=p>(</span><span class=err>&#39;</span><span class=n>application</span><span class=err>&#39;</span><span class=p>)</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>type</span><span class=p>.</span><span class=na>equalsIgnoreCase</span><span class=p>(</span><span class=err>&#39;</span><span class=n>library</span><span class=err>&#39;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>def</span><span class=w> </span><span class=n>jobExists</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span><span class=w></span>
<span class=w>        </span><span class=nf>if</span><span class=p>(</span><span class=s>&quot;${formattedBranch}-Build-${codebaseName}&quot;</span><span class=p>.</span><span class=na>toString</span><span class=p>()</span><span class=w> </span><span class=n>in</span><span class=w> </span><span class=n>Jenkins</span><span class=p>.</span><span class=na>instance</span><span class=p>.</span><span class=na>getAllItems</span><span class=p>().</span><span class=na>collect</span><span class=p>{</span><span class=n>it</span><span class=p>.</span><span class=na>name</span><span class=p>})</span><span class=w></span>
<span class=w>            </span><span class=n>jobExists</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=w></span>

<span class=w>        </span><span class=nf>createCiPipeline</span><span class=p>(</span><span class=s>&quot;Build-${codebaseName}&quot;</span><span class=p>,</span><span class=w> </span><span class=n>codebaseName</span><span class=p>,</span><span class=w> </span><span class=n>stages</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>buildKey</span><span class=p>,</span><span class=w> </span><span class=n>defaultBuild</span><span class=p>),</span><span class=w> </span><span class=s>&quot;build.groovy&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>                </span><span class=n>repositoryPath</span><span class=p>,</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=p>,</span><span class=w> </span><span class=n>branch</span><span class=p>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=p>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=p>)</span><span class=w></span>

<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>jobExists</span><span class=p>)</span><span class=w></span>
<span class=w>          </span><span class=n>queue</span><span class=p>(</span><span class=s>&quot;${codebaseName}/${formattedBranch}-Build-${codebaseName}&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=n>def</span><span class=w> </span><span class=nf>createCiPipeline</span><span class=p>(</span><span class=n>pipelineName</span><span class=p>,</span><span class=w> </span><span class=n>codebaseName</span><span class=p>,</span><span class=w> </span><span class=n>codebaseStages</span><span class=p>,</span><span class=w> </span><span class=n>pipelineScript</span><span class=p>,</span><span class=w> </span><span class=n>repository</span><span class=p>,</span><span class=w> </span><span class=n>credId</span><span class=p>,</span><span class=w> </span><span class=n>watchBranch</span><span class=p>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=p>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>pipelineJob</span><span class=p>(</span><span class=s>&quot;${codebaseName}/${watchBranch.toUpperCase().replaceAll(/\\//, &quot;</span><span class=o>-</span><span class=s>&quot;)}-${pipelineName}&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>logRotator</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>numToKeep</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span><span class=w></span>
<span class=w>            </span><span class=n>daysToKeep</span><span class=p>(</span><span class=mi>7</span><span class=p>)</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=n>triggers</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>gerrit</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=n>events</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>pipelineName</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=s>&quot;Build&quot;</span><span class=p>))</span><span class=w></span>
<span class=w>                        </span><span class=n>changeMerged</span><span class=p>()</span><span class=w></span>
<span class=w>                    </span><span class=k>else</span><span class=w></span>
<span class=w>                        </span><span class=n>patchsetCreated</span><span class=p>()</span><span class=w></span>
<span class=w>                </span><span class=p>}</span><span class=w></span>
<span class=w>                </span><span class=n>project</span><span class=p>(</span><span class=s>&quot;plain:${codebaseName}&quot;</span><span class=p>,</span><span class=w> </span><span class=o>[</span><span class=s>&quot;plain:${watchBranch}&quot;</span><span class=o>]</span><span class=p>)</span><span class=w></span>
<span class=w>            </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=n>definition</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>cpsScm</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=n>scm</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=n>git</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                        </span><span class=n>remote</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                            </span><span class=n>url</span><span class=p>(</span><span class=n>repository</span><span class=p>)</span><span class=w></span>
<span class=w>                            </span><span class=n>credentials</span><span class=p>(</span><span class=n>credId</span><span class=p>)</span><span class=w></span>
<span class=w>                        </span><span class=p>}</span><span class=w></span>
<span class=w>                        </span><span class=n>branches</span><span class=p>(</span><span class=s>&quot;${watchBranch}&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                        </span><span class=n>scriptPath</span><span class=p>(</span><span class=s>&quot;${pipelineScript}&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=p>}</span><span class=w></span>
<span class=w>                </span><span class=p>}</span><span class=w></span>
<span class=w>                </span><span class=n>parameters</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;GIT_SERVER_CR_NAME&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${gitServerCrName}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Name of Git Server CR to generate link to Git server&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;GIT_SERVER_CR_VERSION&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${gitServerCrVersion}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Version of GitServer CR Resource&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;STAGES&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${codebaseStages}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Consequence of stages in JSON format to be run during execution&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;GERRIT_PROJECT_NAME&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${codebaseName}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Gerrit project name(Codebase name) to be build&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;BRANCH&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${watchBranch}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Branch to build artifact from&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                </span><span class=p>}</span><span class=w></span>
<span class=w>            </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=n>def</span><span class=w> </span><span class=nf>getStageKeyName</span><span class=p>(</span><span class=n>buildTool</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>buildTool</span><span class=p>.</span><span class=na>toString</span><span class=p>().</span><span class=na>equalsIgnoreCase</span><span class=p>(</span><span class=err>&#39;</span><span class=n>terraform</span><span class=err>&#39;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&quot;Code-review-library-terraform&quot;</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>buildTool</span><span class=p>.</span><span class=na>toString</span><span class=p>().</span><span class=na>equalsIgnoreCase</span><span class=p>(</span><span class=err>&#39;</span><span class=n>opa</span><span class=err>&#39;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&quot;Code-review-library-opa&quot;</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>buildTool</span><span class=p>.</span><span class=na>toString</span><span class=p>().</span><span class=na>equalsIgnoreCase</span><span class=p>(</span><span class=err>&#39;</span><span class=n>codenarc</span><span class=err>&#39;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&quot;Code-review-library-codenarc&quot;</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=n>def</span><span class=w> </span><span class=n>buildToolsOutOfTheBox</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=s>&quot;maven&quot;</span><span class=p>,</span><span class=s>&quot;npm&quot;</span><span class=p>,</span><span class=s>&quot;gradle&quot;</span><span class=p>,</span><span class=s>&quot;dotnet&quot;</span><span class=p>,</span><span class=s>&quot;none&quot;</span><span class=p>,</span><span class=s>&quot;go&quot;</span><span class=p>,</span><span class=s>&quot;python&quot;</span><span class=o>]</span><span class=w></span>
<span class=w>    </span><span class=n>def</span><span class=w> </span><span class=n>supBuildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>buildToolsOutOfTheBox</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>buildTool</span><span class=p>.</span><span class=na>toString</span><span class=p>())</span><span class=w></span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>supBuildTool</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s>&quot;Code-review-${TYPE}&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=s>&quot;Code-review-default&quot;</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=n>def</span><span class=w> </span><span class=nf>createReleasePipeline</span><span class=p>(</span><span class=n>pipelineName</span><span class=p>,</span><span class=w> </span><span class=n>codebaseName</span><span class=p>,</span><span class=w> </span><span class=n>codebaseStages</span><span class=p>,</span><span class=w> </span><span class=n>pipelineScript</span><span class=p>,</span><span class=w> </span><span class=n>repository</span><span class=p>,</span><span class=w> </span><span class=n>credId</span><span class=p>,</span><span class=w></span>
<span class=w> </span><span class=n>gitServerCrName</span><span class=p>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=p>,</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=p>,</span><span class=w> </span><span class=n>defaultBranch</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>pipelineJob</span><span class=p>(</span><span class=s>&quot;${codebaseName}/${pipelineName}&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>logRotator</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>numToKeep</span><span class=p>(</span><span class=mi>14</span><span class=p>)</span><span class=w></span>
<span class=w>            </span><span class=n>daysToKeep</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=n>definition</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>cpsScm</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=n>scm</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=n>git</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                        </span><span class=n>remote</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                            </span><span class=n>url</span><span class=p>(</span><span class=n>repository</span><span class=p>)</span><span class=w></span>
<span class=w>                            </span><span class=n>credentials</span><span class=p>(</span><span class=n>credId</span><span class=p>)</span><span class=w></span>
<span class=w>                        </span><span class=p>}</span><span class=w></span>
<span class=w>                        </span><span class=n>branches</span><span class=p>(</span><span class=s>&quot;${defaultBranch}&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                        </span><span class=n>scriptPath</span><span class=p>(</span><span class=s>&quot;${pipelineScript}&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=p>}</span><span class=w></span>
<span class=w>                </span><span class=p>}</span><span class=w></span>
<span class=w>                </span><span class=n>parameters</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;STAGES&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${codebaseStages}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>pipelineName</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=s>&quot;Create-release&quot;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                        </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;JIRA_INTEGRATION_ENABLED&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${jiraIntegrationEnabled}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Is Jira integration enabled&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                        </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;GERRIT_PROJECT&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${codebaseName}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                        </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;RELEASE_NAME&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Name of the release(branch to be created)&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                        </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;COMMIT_ID&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Commit ID that will be used to create branch from for new release. If empty, HEAD of master will be used&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                        </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;GIT_SERVER_CR_NAME&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${gitServerCrName}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Name of Git Server CR to generate link to Git server&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                        </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;GIT_SERVER_CR_VERSION&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${gitServerCrVersion}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Version of GitServer CR Resource&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                        </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;REPOSITORY_PATH&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${repository}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Full repository path&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                        </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;DEFAULT_BRANCH&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${defaultBranch}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Default repository branch&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=p>}</span><span class=w></span>
<span class=w>                </span><span class=p>}</span><span class=w></span>
<span class=w>            </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=n>def</span><span class=w> </span><span class=nf>createListView</span><span class=p>(</span><span class=n>codebaseName</span><span class=p>,</span><span class=w> </span><span class=n>branchName</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>listView</span><span class=p>(</span><span class=s>&quot;${codebaseName}/${branchName}&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>branchName</span><span class=p>.</span><span class=na>toLowerCase</span><span class=p>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s>&quot;releases&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>jobFilters</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=n>regex</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=n>matchType</span><span class=p>(</span><span class=n>MatchType</span><span class=p>.</span><span class=na>INCLUDE_MATCHED</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=n>matchValue</span><span class=p>(</span><span class=n>RegexMatchValue</span><span class=p>.</span><span class=na>NAME</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=n>regex</span><span class=p>(</span><span class=s>&quot;^Create-release.*&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                </span><span class=p>}</span><span class=w></span>
<span class=w>            </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>jobFilters</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=n>regex</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=n>matchType</span><span class=p>(</span><span class=n>MatchType</span><span class=p>.</span><span class=na>INCLUDE_MATCHED</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=n>matchValue</span><span class=p>(</span><span class=n>RegexMatchValue</span><span class=p>.</span><span class=na>NAME</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=n>regex</span><span class=p>(</span><span class=s>&quot;^${branchName}-(Code-review|Build).*&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                </span><span class=p>}</span><span class=w></span>
<span class=w>            </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=n>columns</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>status</span><span class=p>()</span><span class=w></span>
<span class=w>            </span><span class=n>weather</span><span class=p>()</span><span class=w></span>
<span class=w>            </span><span class=n>name</span><span class=p>()</span><span class=w></span>
<span class=w>            </span><span class=n>lastSuccess</span><span class=p>()</span><span class=w></span>
<span class=w>            </span><span class=n>lastFailure</span><span class=p>()</span><span class=w></span>
<span class=w>            </span><span class=n>lastDuration</span><span class=p>()</span><span class=w></span>
<span class=w>            </span><span class=n>buildButton</span><span class=p>()</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> </details> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Please refer to the <a href=../manage-jenkins-cd-job-provision/ >Manage Jenkins CD Pipeline Job Provisioner</a> page for the details.</p> </div> <details> <summary><b>View: Default CD provisioner template for EDP 2.8.4</b></summary> <div class=highlight><pre><span></span><code><span class=cm>/* Copyright 2021 EPAM Systems.</span>

<span class=cm>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class=cm>you may not use this file except in compliance with the License.</span>
<span class=cm>You may obtain a copy of the License at</span>
<span class=cm>http://www.apache.org/licenses/LICENSE-2.0</span>

<span class=cm>Unless required by applicable law or agreed to in writing, software</span>
<span class=cm>distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class=cm>WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>

<span class=cm>See the License for the specific language governing permissions and</span>
<span class=cm>limitations under the License. */</span><span class=w></span>

<span class=kn>import</span><span class=w> </span><span class=nn>groovy.json.*</span><span class=w></span>
<span class=kn>import</span><span class=w> </span><span class=nn>jenkins.model.Jenkins</span><span class=w></span>

<span class=n>Jenkins</span><span class=w> </span><span class=n>jenkins</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Jenkins</span><span class=p>.</span><span class=na>instance</span><span class=w></span>

<span class=n>def</span><span class=w> </span><span class=n>pipelineName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${PIPELINE_NAME}-cd-pipeline&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>stageName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${STAGE_NAME}&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>qgStages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${QG_STAGES}&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${GIT_SERVER_CR_VERSION}&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${GIT_CREDENTIALS_ID}&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>sourceType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${SOURCE_TYPE}&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>libraryURL</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${LIBRARY_URL}&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>libraryBranch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${LIBRARY_BRANCH}&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>autodeploy</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${AUTODEPLOY}&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>scriptPath</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Jenkinsfile&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>containerDeploymentType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;container&quot;</span><span class=w></span>
<span class=n>def</span><span class=w> </span><span class=n>deploymentType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;${DEPLOYMENT_TYPE}&quot;</span><span class=w></span>

<span class=n>def</span><span class=w> </span><span class=n>stages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>buildStages</span><span class=p>(</span><span class=n>deploymentType</span><span class=p>,</span><span class=w> </span><span class=n>containerDeploymentType</span><span class=p>,</span><span class=w> </span><span class=n>qgStages</span><span class=p>)</span><span class=w></span>

<span class=n>def</span><span class=w> </span><span class=n>codebaseFolder</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jenkins</span><span class=p>.</span><span class=na>getItem</span><span class=p>(</span><span class=n>pipelineName</span><span class=p>)</span><span class=w></span>
<span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>codebaseFolder</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>folder</span><span class=p>(</span><span class=n>pipelineName</span><span class=p>)</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>deploymentType</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>containerDeploymentType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>createContainerizedCdPipeline</span><span class=p>(</span><span class=n>pipelineName</span><span class=p>,</span><span class=w> </span><span class=n>stageName</span><span class=p>,</span><span class=w> </span><span class=n>stages</span><span class=p>,</span><span class=w> </span><span class=n>scriptPath</span><span class=p>,</span><span class=w> </span><span class=n>sourceType</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=n>libraryURL</span><span class=p>,</span><span class=w> </span><span class=n>libraryBranch</span><span class=p>,</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=p>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=n>autodeploy</span><span class=p>)</span><span class=w></span>
<span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>createCustomCdPipeline</span><span class=p>(</span><span class=n>pipelineName</span><span class=p>,</span><span class=w> </span><span class=n>stageName</span><span class=p>)</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=n>def</span><span class=w> </span><span class=nf>buildStages</span><span class=p>(</span><span class=n>deploymentType</span><span class=p>,</span><span class=w> </span><span class=n>containerDeploymentType</span><span class=p>,</span><span class=w> </span><span class=n>qgStages</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>deploymentType</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>containerDeploymentType</span><span class=w></span>
<span class=w>    </span><span class=o>?</span><span class=w> </span><span class=err>&#39;</span><span class=o>[</span><span class=p>{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=s>&quot;init&quot;</span><span class=p>,</span><span class=s>&quot;step_name&quot;</span><span class=p>:</span><span class=s>&quot;init&quot;</span><span class=p>},{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=s>&quot;deploy&quot;</span><span class=p>,</span><span class=s>&quot;step_name&quot;</span><span class=p>:</span><span class=s>&quot;deploy&quot;</span><span class=p>},</span><span class=err>&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>qgStages</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>&#39;</span><span class=p>,{</span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=s>&quot;promote-images-ecr&quot;</span><span class=p>,</span><span class=s>&quot;step_name&quot;</span><span class=p>:</span><span class=s>&quot;promote-images&quot;</span><span class=p>}</span><span class=o>]</span><span class=err>&#39;</span><span class=w></span>
<span class=w>    </span><span class=p>:</span><span class=w> </span><span class=err>&#39;&#39;</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=n>def</span><span class=w> </span><span class=nf>createContainerizedCdPipeline</span><span class=p>(</span><span class=n>pipelineName</span><span class=p>,</span><span class=w> </span><span class=n>stageName</span><span class=p>,</span><span class=w> </span><span class=n>stages</span><span class=p>,</span><span class=w> </span><span class=n>pipelineScript</span><span class=p>,</span><span class=w> </span><span class=n>sourceType</span><span class=p>,</span><span class=w> </span><span class=n>libraryURL</span><span class=p>,</span><span class=w> </span><span class=n>libraryBranch</span><span class=p>,</span><span class=w> </span><span class=n>libraryCredId</span><span class=p>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=p>,</span><span class=w> </span><span class=n>autodeploy</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>pipelineJob</span><span class=p>(</span><span class=s>&quot;${pipelineName}/${stageName}&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>sourceType</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s>&quot;library&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>definition</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=n>cpsScm</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=n>scm</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                        </span><span class=n>git</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                            </span><span class=n>remote</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                                </span><span class=n>url</span><span class=p>(</span><span class=n>libraryURL</span><span class=p>)</span><span class=w></span>
<span class=w>                                </span><span class=n>credentials</span><span class=p>(</span><span class=n>libraryCredId</span><span class=p>)</span><span class=w></span>
<span class=w>                            </span><span class=p>}</span><span class=w></span>
<span class=w>                            </span><span class=n>branches</span><span class=p>(</span><span class=s>&quot;${libraryBranch}&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                            </span><span class=n>scriptPath</span><span class=p>(</span><span class=s>&quot;${pipelineScript}&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                        </span><span class=p>}</span><span class=w></span>
<span class=w>                    </span><span class=p>}</span><span class=w></span>
<span class=w>                </span><span class=p>}</span><span class=w></span>
<span class=w>            </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>definition</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=n>cps</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=n>script</span><span class=p>(</span><span class=s>&quot;@Library([&#39;edp-library-stages&#39;, &#39;edp-library-pipelines&#39;]) _ \n\nDeploy()&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                    </span><span class=n>sandbox</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span><span class=w></span>
<span class=w>                </span><span class=p>}</span><span class=w></span>
<span class=w>            </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=n>properties</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>          </span><span class=n>disableConcurrentBuilds</span><span class=p>()</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=n>parameters</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;GIT_SERVER_CR_VERSION&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${gitServerCrVersion}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Version of GitServer CR Resource&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>            </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;STAGES&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${stages}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Consequence of stages in JSON format to be run during execution&quot;</span><span class=p>)</span><span class=w></span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>autodeploy</span><span class=o>?</span><span class=p>.</span><span class=na>trim</span><span class=p>()</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>autodeploy</span><span class=p>.</span><span class=na>toBoolean</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;AUTODEPLOY&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;${autodeploy}&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Is autodeploy enabled?&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>                </span><span class=n>stringParam</span><span class=p>(</span><span class=s>&quot;CODEBASE_VERSION&quot;</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Codebase versions to deploy.&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>            </span><span class=p>}</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=n>def</span><span class=w> </span><span class=nf>createCustomCdPipeline</span><span class=p>(</span><span class=n>pipelineName</span><span class=p>,</span><span class=w> </span><span class=n>stageName</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>pipelineJob</span><span class=p>(</span><span class=s>&quot;${pipelineName}/${stageName}&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>properties</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>          </span><span class=n>disableConcurrentBuilds</span><span class=p>()</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> </details> <ul> <li>It is also necessary to add the string parameter <strong>DEPLOYMENT_TYPE</strong> to the CD provisioner:<br><ul> <li>Go to <em>job-provisions</em> - &gt; <em>cd</em> -&gt; <em>default</em> -&gt; <em>configure</em>;<br></li> <li><em>Add Parameter</em> - &gt; <em>String parameter</em>;<br></li> <li><em>Name</em> -&gt; <em>DEPLOYMENT_TYPE</em></li> </ul> </li> </ul> </li> <li> <p>Update Jenkins pipelines and stages to the new release tag:</p> <ul> <li>In Jenkins, go to <strong>Manage Jenkins</strong> -&gt; <strong>Configure system</strong> -&gt; Find the <strong>Global Pipeline Libraries</strong> menu.</li> <li>Change the <strong>Default version</strong> for <em>edp-library-stages</em> from <em>build/2.8.0-RC.6</em> to <em>build/2.9.0-RC.5</em></li> <li>Change the <strong>Default version</strong> for <em>edp-library-pipelines</em> from <em>build/2.8.0-RC.4</em> to <em>build/2.9.0-RC.3</em></li> </ul> </li> <li> <p>Update the <em>edp-admin-console</em> Custom Resource in the <strong>KeycloakClient</strong> Custom Resource Definition:<br></p> <details> <summary><b>View: keycloakclient.yaml</b></summary> <div class=highlight><pre><span></span><code><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">KeycloakClient</span><span class=w></span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1.edp.epam.com/v1alpha1</span><span class=w></span>
<span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">edp-admin-console</span><span class=w></span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;edp-namespace&gt;</span><span class=w></span>
<span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>advancedProtocolMappers</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class=w></span>
<span class=w>  </span><span class=nt>attributes</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class=w></span>
<span class=w>  </span><span class=nt>audRequired</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class=w></span>
<span class=w>  </span><span class=nt>clientId</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">admin-console-client</span><span class=w></span>
<span class=w>  </span><span class=nt>directAccess</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class=w></span>
<span class=w>  </span><span class=nt>public</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class=w></span>
<span class=w>  </span><span class=nt>secret</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">admin-console-client</span><span class=w></span>
<span class=w>  </span><span class=nt>serviceAccount</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class=w></span>
<span class=w>    </span><span class=nt>realmRoles</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">developer</span><span class=w></span>
<span class=w>  </span><span class=nt>targetRealm</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;keycloak-edp-realm&gt;</span><span class=w></span>
<span class=w>  </span><span class=nt>webUrl</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;-</span><span class=w></span>
<span class=w>    </span><span class=no>https://edp-admin-console-example.com</span><span class=w></span>
</code></pre></div> </details> <div class=codehilite><pre><span></span><code>kubectl apply -f keycloakclient.yaml
</code></pre></div> </li> <li> <p>Remove the <em>admin-console-client</em> client ID in the <em>edp-namespace-main</em> realm in Keycloak, restart the <em>keycloak-operator</em> pod and check that the new KeycloakClient is created with the <strong>confidential</strong> access type.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If "Internal error" occurs, regenerate the <em>admin-console-client</em> secret in the <em>Credentials</em> tab in Keycloak and update the <em>admin-console-client</em> secret key "clientSecret" and "password".</p> </div> </li> <li> <p>Update image versions for the Jenkins agents in the <em>ConfigMap</em>:</p> <div class=codehilite><pre><span></span><code>kubectl edit configmap jenkins-slaves -n &lt;edp-namespace&gt;
</code></pre></div> <ul> <li>The versions of the images should be:<div class=codehilite><pre><span></span><code><span class=n>epamedp</span><span class=o>/</span><span class=n>edp</span><span class=o>-</span><span class=n>jenkins</span><span class=o>-</span><span class=n>dotnet</span><span class=o>-</span><span class=mi>21</span><span class=o>-</span><span class=nl>agent</span><span class=p>:</span><span class=mf>1.0.2</span><span class=w></span>
<span class=n>epamedp</span><span class=o>/</span><span class=n>edp</span><span class=o>-</span><span class=n>jenkins</span><span class=o>-</span><span class=n>dotnet</span><span class=o>-</span><span class=mi>31</span><span class=o>-</span><span class=nl>agent</span><span class=p>:</span><span class=mf>1.0.2</span><span class=w></span>
<span class=n>epamedp</span><span class=o>/</span><span class=n>edp</span><span class=o>-</span><span class=n>jenkins</span><span class=o>-</span><span class=k>go</span><span class=o>-</span><span class=nl>agent</span><span class=p>:</span><span class=mf>1.0.3</span><span class=w></span>
<span class=n>epamedp</span><span class=o>/</span><span class=n>edp</span><span class=o>-</span><span class=n>jenkins</span><span class=o>-</span><span class=n>gradle</span><span class=o>-</span><span class=n>java11</span><span class=o>-</span><span class=nl>agent</span><span class=p>:</span><span class=mf>2.0.2</span><span class=w></span>
<span class=n>epamedp</span><span class=o>/</span><span class=n>edp</span><span class=o>-</span><span class=n>jenkins</span><span class=o>-</span><span class=n>gradle</span><span class=o>-</span><span class=n>java8</span><span class=o>-</span><span class=nl>agent</span><span class=p>:</span><span class=mf>1.0.2</span><span class=w></span>
<span class=n>epamedp</span><span class=o>/</span><span class=n>edp</span><span class=o>-</span><span class=n>jenkins</span><span class=o>-</span><span class=n>helm</span><span class=o>-</span><span class=nl>agent</span><span class=p>:</span><span class=mf>1.0.6</span><span class=w></span>
<span class=n>epamedp</span><span class=o>/</span><span class=n>edp</span><span class=o>-</span><span class=n>jenkins</span><span class=o>-</span><span class=n>maven</span><span class=o>-</span><span class=n>java11</span><span class=o>-</span><span class=nl>agent</span><span class=p>:</span><span class=mf>2.0.3</span><span class=w></span>
<span class=n>epamedp</span><span class=o>/</span><span class=n>edp</span><span class=o>-</span><span class=n>jenkins</span><span class=o>-</span><span class=n>maven</span><span class=o>-</span><span class=n>java8</span><span class=o>-</span><span class=nl>agent</span><span class=p>:</span><span class=mf>1.0.2</span><span class=w></span>
<span class=n>epamedp</span><span class=o>/</span><span class=n>edp</span><span class=o>-</span><span class=n>jenkins</span><span class=o>-</span><span class=n>npm</span><span class=o>-</span><span class=nl>agent</span><span class=p>:</span><span class=mf>2.0.2</span><span class=w></span>
<span class=n>epamedp</span><span class=o>/</span><span class=n>edp</span><span class=o>-</span><span class=n>jenkins</span><span class=o>-</span><span class=n>python</span><span class=o>-</span><span class=mi>38</span><span class=o>-</span><span class=nl>agent</span><span class=p>:</span><span class=mf>2.0.3</span><span class=w></span>
<span class=n>epamedp</span><span class=o>/</span><span class=n>edp</span><span class=o>-</span><span class=n>jenkins</span><span class=o>-</span><span class=n>terraform</span><span class=o>-</span><span class=nl>agent</span><span class=p>:</span><span class=mf>2.0.4</span><span class=w></span>
</code></pre></div> </li> </ul> <ul> <li>Add new Jenkins agents under the <em>data</em> field:</li> </ul> <details> <summary><b>View</b></summary> <div class=highlight><pre><span></span><code><span class=nt>data</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>codenarc-template</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|-</span><span class=w></span>
<span class=w>    </span><span class=no>&lt;org.csanchez.jenkins.plugins.kubernetes.PodTemplate&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;inheritFrom&gt;&lt;/inheritFrom&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;name&gt;codenarc&lt;/name&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;namespace&gt;&lt;/namespace&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;privileged&gt;false&lt;/privileged&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;alwaysPullImage&gt;false&lt;/alwaysPullImage&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;instanceCap&gt;2147483647&lt;/instanceCap&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;slaveConnectTimeout&gt;100&lt;/slaveConnectTimeout&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;idleMinutes&gt;5&lt;/idleMinutes&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;activeDeadlineSeconds&gt;0&lt;/activeDeadlineSeconds&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;label&gt;codenarc&lt;/label&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;serviceAccount&gt;jenkins&lt;/serviceAccount&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;nodeSelector&gt;beta.kubernetes.io/os=linux&lt;/nodeSelector&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;nodeUsageMode&gt;NORMAL&lt;/nodeUsageMode&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;workspaceVolume class=&quot;org.csanchez.jenkins.plugins.kubernetes.volumes.workspace.EmptyDirWorkspaceVolume&quot;&gt;</span><span class=w></span>
<span class=w>        </span><span class=no>&lt;memory&gt;false&lt;/memory&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;/workspaceVolume&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;volumes/&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;containers&gt;</span><span class=w></span>
<span class=w>        </span><span class=no>&lt;org.csanchez.jenkins.plugins.kubernetes.ContainerTemplate&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;name&gt;jnlp&lt;/name&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;image&gt;epamedp/edp-jenkins-codenarc-agent:1.0.0&lt;/image&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;privileged&gt;false&lt;/privileged&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;alwaysPullImage&gt;false&lt;/alwaysPullImage&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;workingDir&gt;/tmp&lt;/workingDir&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;command&gt;&lt;/command&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;args&gt;${computer.jnlpmac} ${computer.name}&lt;/args&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;ttyEnabled&gt;false&lt;/ttyEnabled&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;resourceRequestCpu&gt;&lt;/resourceRequestCpu&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;resourceRequestMemory&gt;&lt;/resourceRequestMemory&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;resourceLimitCpu&gt;&lt;/resourceLimitCpu&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;resourceLimitMemory&gt;&lt;/resourceLimitMemory&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;envVars&gt;</span><span class=w></span>
<span class=w>            </span><span class=no>&lt;org.csanchez.jenkins.plugins.kubernetes.model.KeyValueEnvVar&gt;</span><span class=w></span>
<span class=w>              </span><span class=no>&lt;key&gt;JAVA_TOOL_OPTIONS&lt;/key&gt;</span><span class=w></span>
<span class=w>              </span><span class=no>&lt;value&gt;-XX:+UnlockExperimentalVMOptions -Dsun.zip.disableMemoryMapping=true&lt;/value&gt;</span><span class=w></span>
<span class=w>            </span><span class=no>&lt;/org.csanchez.jenkins.plugins.kubernetes.model.KeyValueEnvVar&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;/envVars&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;ports/&gt;</span><span class=w></span>
<span class=w>        </span><span class=no>&lt;/org.csanchez.jenkins.plugins.kubernetes.ContainerTemplate&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;/containers&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;envVars/&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;annotations/&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;imagePullSecrets/&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;podRetention class=&quot;org.csanchez.jenkins.plugins.kubernetes.pod.retention.Default&quot;/&gt;</span><span class=w></span>
<span class=w>    </span><span class=no>&lt;/org.csanchez.jenkins.plugins.kubernetes.PodTemplate&gt;</span><span class=w></span>
<span class=w>  </span><span class=nt>opa-template</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|-</span><span class=w></span>
<span class=w>    </span><span class=no>&lt;org.csanchez.jenkins.plugins.kubernetes.PodTemplate&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;inheritFrom&gt;&lt;/inheritFrom&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;name&gt;opa&lt;/name&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;namespace&gt;&lt;/namespace&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;privileged&gt;false&lt;/privileged&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;alwaysPullImage&gt;false&lt;/alwaysPullImage&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;instanceCap&gt;2147483647&lt;/instanceCap&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;slaveConnectTimeout&gt;100&lt;/slaveConnectTimeout&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;idleMinutes&gt;5&lt;/idleMinutes&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;activeDeadlineSeconds&gt;0&lt;/activeDeadlineSeconds&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;label&gt;opa&lt;/label&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;serviceAccount&gt;jenkins&lt;/serviceAccount&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;nodeSelector&gt;beta.kubernetes.io/os=linux&lt;/nodeSelector&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;nodeUsageMode&gt;NORMAL&lt;/nodeUsageMode&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;workspaceVolume class=&quot;org.csanchez.jenkins.plugins.kubernetes.volumes.workspace.EmptyDirWorkspaceVolume&quot;&gt;</span><span class=w></span>
<span class=w>        </span><span class=no>&lt;memory&gt;false&lt;/memory&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;/workspaceVolume&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;volumes/&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;containers&gt;</span><span class=w></span>
<span class=w>        </span><span class=no>&lt;org.csanchez.jenkins.plugins.kubernetes.ContainerTemplate&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;name&gt;jnlp&lt;/name&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;image&gt;epamedp/edp-jenkins-opa-agent:1.0.1&lt;/image&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;privileged&gt;false&lt;/privileged&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;alwaysPullImage&gt;false&lt;/alwaysPullImage&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;workingDir&gt;/tmp&lt;/workingDir&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;command&gt;&lt;/command&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;args&gt;${computer.jnlpmac} ${computer.name}&lt;/args&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;ttyEnabled&gt;false&lt;/ttyEnabled&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;resourceRequestCpu&gt;&lt;/resourceRequestCpu&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;resourceRequestMemory&gt;&lt;/resourceRequestMemory&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;resourceLimitCpu&gt;&lt;/resourceLimitCpu&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;resourceLimitMemory&gt;&lt;/resourceLimitMemory&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;envVars&gt;</span><span class=w></span>
<span class=w>            </span><span class=no>&lt;org.csanchez.jenkins.plugins.kubernetes.model.KeyValueEnvVar&gt;</span><span class=w></span>
<span class=w>              </span><span class=no>&lt;key&gt;JAVA_TOOL_OPTIONS&lt;/key&gt;</span><span class=w></span>
<span class=w>              </span><span class=no>&lt;value&gt;-XX:+UnlockExperimentalVMOptions -Dsun.zip.disableMemoryMapping=true&lt;/value&gt;</span><span class=w></span>
<span class=w>            </span><span class=no>&lt;/org.csanchez.jenkins.plugins.kubernetes.model.KeyValueEnvVar&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;/envVars&gt;</span><span class=w></span>
<span class=w>          </span><span class=no>&lt;ports/&gt;</span><span class=w></span>
<span class=w>        </span><span class=no>&lt;/org.csanchez.jenkins.plugins.kubernetes.ContainerTemplate&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;/containers&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;envVars/&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;annotations/&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;imagePullSecrets/&gt;</span><span class=w></span>
<span class=w>      </span><span class=no>&lt;podRetention class=&quot;org.csanchez.jenkins.plugins.kubernetes.pod.retention.Default&quot;/&gt;</span><span class=w></span>
<span class=w>    </span><span class=no>&lt;/org.csanchez.jenkins.plugins.kubernetes.PodTemplate&gt;</span><span class=w></span>
</code></pre></div> </details> <ul> <li>Restart the Jenkins pod.</li> </ul> </li> <li> <p>Update compatible plugins in Jenkins and install additional plugins:<br></p> <ul> <li>Go to <strong>Manage Jenkins</strong> -&gt; <strong>Manage Plugins</strong> -&gt; Select <strong>Compatible</strong> -&gt; Click <strong>Download now and install after restart</strong></li> <li>Install the following additional plugins (click the <strong>Available</strong> plugins tab in Jenkins):<ul> <li><a href=https://plugins.jenkins.io/groovy-postbuild/ >Groovy Postbuild</a></li> <li><a href=https://plugins.jenkins.io/aws-credentials/ >CloudBees AWS Credentials</a></li> <li><a href=https://plugins.jenkins.io/badge/ >Badge</a></li> <li><a href=https://plugins.jenkins.io/timestamper/ >Timestamper</a></li> </ul> </li> </ul> </li> <li> <p>Add the annotation <code>deploy.edp.epam.com/previous-stage-name: ''</code> (it should be empty if the CD pipeline contains one stage) to each Custom Resource in the Custom Resource Definition <strong>Stage</strong>, for example:</p> <ul> <li>List all Custom Resources in <strong>Stage</strong>:<br> <code>kubectl get stages.v2.edp.epam.com -n &lt;edp-namespace&gt;</code></li> </ul> <ul> <li>Edit resources:<br> <code>kubectl edit stages.v2.edp.epam.com &lt;cd-stage-name&gt; -n &lt;edp-namespace&gt;</code><div class=codehilite><pre><span></span><code><span class=n>apiVersion</span><span class=o>:</span><span class=w> </span><span class=n>v2</span><span class=o>.</span><span class=na>edp</span><span class=o>.</span><span class=na>epam</span><span class=o>.</span><span class=na>com</span><span class=o>/</span><span class=n>v1alpha1</span><span class=w></span>
<span class=n>kind</span><span class=o>:</span><span class=w> </span><span class=n>Stage</span><span class=w></span>
<span class=n>metadata</span><span class=o>:</span><span class=w></span>
<span class=w>  </span><span class=n>annotations</span><span class=o>:</span><span class=w></span>
<span class=w>    </span><span class=n>deploy</span><span class=o>.</span><span class=na>edp</span><span class=o>.</span><span class=na>epam</span><span class=o>.</span><span class=na>com</span><span class=o>/</span><span class=n>previous</span><span class=o>-</span><span class=n>stage</span><span class=o>-</span><span class=n>name</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w></span>
</code></pre></div> </li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If a pipeline contains several stages, add a previous stage name indicated in the EDP Admin Console to the annotation, for example:<br> <code>deploy.edp.epam.com/previous-stage-name: 'dev'</code>.</p> </div> </li> <li> <p>Execute script to align <em>CDPipeline</em> resources to the new API (<a href=https://stedolan.github.io/jq/download/ >jq command-line JSON processor</a> is required):</p> <div class=codehilite><pre><span></span><code><span class=nv>pipelines</span><span class=o>=</span>$<span class=ss>(</span> <span class=nv>kubectl</span> <span class=nv>get</span> <span class=nv>cdpipelines</span> <span class=o>-</span><span class=nv>n</span> <span class=o>&lt;</span><span class=nv>edp</span><span class=o>-</span><span class=nv>namespace</span><span class=o>&gt;</span> <span class=o>-</span><span class=nv>ojson</span> <span class=o>|</span> <span class=nv>jq</span> <span class=o>-</span><span class=nv>c</span> <span class=s1>&#39;</span><span class=s>.items[]</span><span class=s1>&#39;</span> <span class=ss>)</span>
<span class=k>for</span> <span class=nv>p</span> <span class=nv>in</span> $<span class=nv>pipelines</span><span class=c1>; do</span>
    <span class=nv>echo</span> <span class=s2>&quot;</span><span class=s>$p</span><span class=s2>&quot;</span> <span class=o>|</span> \
    <span class=nv>jq</span> <span class=s1>&#39;</span><span class=s>. | .spec.inputDockerStreams = .spec.input_docker_streams | del(.spec.input_docker_streams) | .spec += { &quot;deploymentType&quot;: &quot;container&quot; } </span><span class=s1>&#39;</span> <span class=o>|</span> \
    <span class=nv>kubectl</span> <span class=nv>apply</span> <span class=o>-</span><span class=nv>f</span> <span class=o>-</span>
<span class=nv>done</span>
</code></pre></div> </li> <li> <p>Update the database in the <em>edp-db</em> pod in the edp-namespace:</p> <ul> <li>Log in to the pod:<br><div class=codehilite><pre><span></span><code><span class=nv>kubectl</span> <span class=k>exec</span> <span class=o>-</span><span class=nv>i</span> <span class=o>-</span><span class=nv>t</span> <span class=o>-</span><span class=nv>n</span> <span class=o>&lt;</span><span class=nv>edp</span><span class=o>-</span><span class=nv>namespace</span><span class=o>&gt;</span> <span class=nv>edp</span><span class=o>-</span><span class=nv>db</span><span class=o>-&lt;</span><span class=nv>pod</span><span class=o>&gt;</span> <span class=o>-</span><span class=nv>c</span> <span class=nv>edp</span><span class=o>-</span><span class=nv>db</span> <span class=s2>&quot;</span><span class=s>--</span><span class=s2>&quot;</span> <span class=nv>sh</span> <span class=o>-</span><span class=nv>c</span> <span class=s2>&quot;</span><span class=s>(bash || ash || sh)</span><span class=s2>&quot;</span>
</code></pre></div> </li> </ul> <ul> <li>Log in to the Postgress DB (where "admin" is the user the secret was created for):<br><div class=codehilite><pre><span></span><code>psql edp-db &lt;admin&gt;;
SET search_path to &#39;&lt;edp-namespace&gt;&#39;;
UPDATE cd_pipeline SET deployment_type = &#39;container&#39;;
</code></pre></div> </li> </ul> </li> <li> <p>Add <code>"AUTODEPLOY":"true/false","DEPLOYMENT_TYPE":"container"</code> to every Custom Resource in <code>jenkinsjobs.v2.edp.epam.com</code>:<br></p> <ul> <li>Edit Kubernetes resources:<div class=codehilite><pre><span></span><code>kubectl get jenkinsjobs.v2.edp.epam.com -n &lt;edp-namespace&gt;

kubectl edit jenkinsjobs.v2.edp.epam.com &lt;cd-pipeline-name&gt; -n &lt;edp-namespace&gt;
</code></pre></div> </li> </ul> <ul> <li>Alternatively, use this script to update all the necessary jenkinsjobs Custom Resources:<div class=codehilite><pre><span></span><code><span class=nv>edp_namespace</span><span class=o>=&lt;</span><span class=nv>epd_namespace</span><span class=o>&gt;</span>
<span class=k>for</span> <span class=nv>stages</span> <span class=nv>in</span> $<span class=ss>(</span><span class=nv>kubectl</span> <span class=nv>get</span> <span class=nv>jenkinsjobs</span> <span class=o>-</span><span class=nv>o</span><span class=o>=</span><span class=nv>name</span> <span class=o>-</span><span class=nv>n</span> <span class=mh>$ed</span><span class=nv>p_namespace</span><span class=ss>)</span><span class=c1>; do kubectl get $stages -n $edp_namespace -o yaml | grep -q &quot;container&quot; &amp;&amp; echo -e &quot;\n$stages is already updated&quot; || kubectl get $stages -n $edp_namespace -o yaml | sed &#39;s/&quot;GIT_SERVER_CR_VERSION&quot;/&quot;AUTODEPLOY&quot;:&quot;false&quot;,&quot;DEPLOYMENT_TYPE&quot;:&quot;container&quot;,&quot;GIT_SERVER_CR_VERSION&quot;/g&#39; | kubectl apply -f -; done</span>
</code></pre></div> </li> </ul> <ul> <li>Make sure the edited resource looks as follows:<div class=codehilite><pre><span></span><code><span class=n>job</span><span class=o>:</span><span class=w></span>
<span class=w>  </span><span class=n>config</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;{&quot;AUTODEPLOY&quot;:&quot;false&quot;,&quot;DEPLOYMENT_TYPE&quot;:&quot;container&quot;,&quot;GIT_SERVER_CR_VERSION&quot;:&quot;v2&quot;,&quot;PIPELINE_NAME&quot;:&quot;your-pipeline-name&quot;,&quot;QG_STAGES&quot;:&quot;{\&quot;name\&quot;:\&quot;manual\&quot;,\&quot;step_name\&quot;:\&quot;your-step-name\&quot;}&quot;,&quot;SOURCE_TYPE&quot;:&quot;default&quot;,&quot;STAGE_NAME&quot;:&quot;your-stage-name&quot;}&#39;</span><span class=w></span>
<span class=w>  </span><span class=n>name</span><span class=o>:</span><span class=w> </span><span class=n>job</span><span class=o>-</span><span class=n>provisions</span><span class=sr>/job/cd/job/</span><span class=k>default</span><span class=w></span>
</code></pre></div> </li> </ul> <ul> <li>Restart the Jenkins operator pod and wait until the CD job provisioner in Jenkins creates the updated pipelines.</li> </ul> </li> </ol> <h2 id=possible-issues>Possible Issues<a class=headerlink href=#possible-issues title="Permanent link">âš“ï¸Ž</a></h2> <ol> <li> <p>SonarQube fails during the CI pipeline run. The previous builds of SonarQube used the latest version of the <a href=https://github.com/vaulttec/sonar-auth-oidc><strong>OpenID Connect Authentication for SonarQube</strong></a> plugin. Version 2.1.0 of this plugin may have issues with the connection, so it is necessary to <a href=https://docs.sonarqube.org/latest/setup/install-plugin/ >downgrade it</a> in order to get rid of errors in the pipeline. Take the following steps:</p> <ul> <li>Log in to the Sonar pod:<br><div class=codehilite><pre><span></span><code><span class=nv>kubectl</span> <span class=k>exec</span> <span class=o>-</span><span class=nv>i</span> <span class=o>-</span><span class=nv>t</span> <span class=o>-</span><span class=nv>n</span> <span class=o>&lt;</span><span class=nv>edp</span><span class=o>-</span><span class=nv>namespace</span><span class=o>&gt;</span> <span class=nv>sonar</span><span class=o>-&lt;</span><span class=nv>pod</span><span class=o>&gt;</span> <span class=o>-</span><span class=nv>c</span> <span class=nv>sonar</span> <span class=s2>&quot;</span><span class=s>--</span><span class=s2>&quot;</span> <span class=nv>sh</span> <span class=o>-</span><span class=nv>c</span> <span class=s2>&quot;</span><span class=s>(bash || ash || sh)</span><span class=s2>&quot;</span>
</code></pre></div> </li> </ul> <ul> <li>Run the command in the Sonar container:<br><div class=codehilite><pre><span></span><code>rm extensions/plugins/sonar-auth-oidc-plugin*
</code></pre></div> </li> </ul> <ul> <li>Install the <strong>OpenID Connect Authentication for SonarQube</strong> plugin v2.0.0:<br><div class=codehilite><pre><span></span><code><span class=n>curl</span><span class=w> </span><span class=o>-</span><span class=n>L</span><span class=w>  </span><span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>github</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>vaulttec</span><span class=o>/</span><span class=n>sonar</span><span class=o>-</span><span class=n>auth</span><span class=o>-</span><span class=n>oidc</span><span class=o>/</span><span class=n>releases</span><span class=o>/</span><span class=n>download</span><span class=o>/</span><span class=n>v2</span><span class=o>.</span><span class=mf>0.0</span><span class=o>/</span><span class=n>sonar</span><span class=o>-</span><span class=n>auth</span><span class=o>-</span><span class=n>oidc</span><span class=o>-</span><span class=n>plugin</span><span class=o>-</span><span class=mf>2.0</span><span class=o>.</span><span class=mf>0.j</span><span class=n>ar</span><span class=w> </span><span class=o>--</span><span class=n>output</span><span class=w> </span><span class=n>extensions</span><span class=o>/</span><span class=n>plugins</span><span class=o>/</span><span class=n>sonar</span><span class=o>-</span><span class=n>auth</span><span class=o>-</span><span class=n>oidc</span><span class=o>-</span><span class=n>plugin</span><span class=o>-</span><span class=mf>2.0</span><span class=o>.</span><span class=mf>0.j</span><span class=n>ar</span><span class=w></span>
</code></pre></div> </li> </ul> <ul> <li>Restart the SonarQube pod;</li> </ul> </li> <li> <p>The Helm lint checker in EDP 2.8.4 has some additional rules. There can be issues with it during the Code Review pipeline in Jenkins for applications that were transferred from previous EDP versions to EDP 2.8.4. To fix this, add the following annotation to the <code>Chart.yaml</code> file:<br></p> <ul> <li>Go to the Git repository -&gt; Choose the application -&gt; Edit the <code>deploy-templates/Chart.yaml</code> file.</li> <li>It is necessary to add the following lines to the bottom of the <code>Chart.yaml</code> file:<div class=codehilite><pre><span></span><code><span class=n>home</span><span class=o>:</span><span class=w> </span><span class=n>https</span><span class=o>://</span><span class=n>github</span><span class=o>.</span><span class=na>com</span><span class=o>/</span><span class=n>your</span><span class=o>-</span><span class=n>repo</span><span class=o>.</span><span class=na>git</span><span class=w></span>
<span class=n>sources</span><span class=o>:</span><span class=w></span>
<span class=w>  </span><span class=o>-</span><span class=w> </span><span class=n>https</span><span class=o>://</span><span class=n>github</span><span class=o>.</span><span class=na>com</span><span class=o>/</span><span class=n>your</span><span class=o>-</span><span class=n>repo</span><span class=o>.</span><span class=na>git</span><span class=w></span>
<span class=n>maintainers</span><span class=o>:</span><span class=w></span>
<span class=w>  </span><span class=o>-</span><span class=w> </span><span class=n>name</span><span class=o>:</span><span class=w> </span><span class=n>DEV</span><span class=w> </span><span class=n>Team</span><span class=w></span>
</code></pre></div> </li> </ul> <ul> <li>Add <strong>a new line character</strong> at the end of the last line. Please be aware it is important.</li> </ul> </li> </ol> <h3 id=related-articles>Related Articles<a class=headerlink href=#related-articles title="Permanent link">âš“ï¸Ž</a></h3> <ul> <li><a href=../install-kiosk/ >Set Up Kiosk</a></li> <li><a href=../kaniko-irsa/ >IAM Roles for Kaniko Service Accounts</a></li> <li><a href=../manage-jenkins-ci-job-provision/ >Manage Jenkins CI Pipeline Job Provisioner</a></li> <li><a href=../manage-jenkins-cd-job-provision/ >Manage Jenkins CD Pipeline Job Provisioner</a></li> </ul> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../perf-integration/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Perf Server Integration" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Perf Server Integration </div> </div> </a> <a href=../upgrade-edp-2.8.4-to-2.9.0/ class="md-footer__link md-footer__link--next" aria-label="Next: Upgrade EDP v.2.8.4 to v.2.9.0" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Upgrade EDP v.2.8.4 to v.2.9.0 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://hub.docker.com/u/epamedp target=_blank rel=noopener title=hub.docker.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.sections", "navigation.tabs", "navigation.top"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../assets/javascripts/bundle.c2e1ee47.min.js></script> <script src=../../js/mkdocs-charts-plugin.js></script> <script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script> <script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script> <script src=https://cdn.jsdelivr.net/npm/vega@5></script> <script src=https://cdn.jsdelivr.net/npm/vega-lite@5></script> <script src=https://cdn.jsdelivr.net/npm/vega-embed@6></script> <script src=https://unpkg.com/mermaid@8.14.0/dist/mermaid.min.js></script> </body> </html>