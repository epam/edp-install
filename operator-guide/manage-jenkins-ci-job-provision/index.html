<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="EPAM Delivery Platform"><link href=https://epam.github.io/edp-install/operator-guide/manage-jenkins-ci-job-provision/ rel=canonical><link href=../overview-manage-jenkins-pipelines/ rel=prev><link href=../manage-jenkins-cd-job-provision/ rel=next><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.4.3, mkdocs-material-9.1.19"><title>Manage Jenkins CI Pipeline Job Provisioner - EPAM Delivery Platform</title><link rel=stylesheet href=../../assets/stylesheets/main.eebd395e.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ecc896b0.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-7ZV6PJ2LSP"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-7ZV6PJ2LSP",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-7ZV6PJ2LSP",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=cyan data-md-color-accent=blue> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#manage-jenkins-ci-pipeline-job-provisioner class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button class="md-banner__button md-icon" aria-label="Don't show this again"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> EDP Team Supports Ukraine ðŸ‡ºðŸ‡¦<br> In solidarity, we ask that you consider financially supporting the organizations below:<br> <a href=https://epamuafund.pinkaloo.com/causes/159bdd2f71854adf8ed5251fe26d2fe0 target=_blank>EPAMâ€™s Global Partners for the Ukraine Humanitarian Crisis</a> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="EPAM Delivery Platform" class="md-header__button md-logo" aria-label="EPAM Delivery Platform" data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> EPAM Delivery Platform </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Manage Jenkins CI Pipeline Job Provisioner </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=cyan data-md-color-accent=blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/epam/edp-install title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../overview/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> Operator Guide </a> </li> <li class=md-tabs__item> <a href=../../user-guide/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../developer-guide/ class=md-tabs__link> Developer Guide </a> </li> <li class=md-tabs__item> <a href=../../use-cases/ class=md-tabs__link> Use Cases </a> </li> <li class=md-tabs__item> <a href=../../faq/ class=md-tabs__link> FAQ </a> </li> <li class=md-tabs__item> <a href=../../roadmap/ class=md-tabs__link> RoadMap </a> </li> <li class=md-tabs__item> <a href=https://github.com/epam/edp-install/blob/master/RELEASES.md class=md-tabs__link> Releases â§‰ </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="EPAM Delivery Platform" class="md-nav__button md-logo" aria-label="EPAM Delivery Platform" data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> EPAM Delivery Platform </label> <div class=md-nav__source> <a href=https://github.com/epam/edp-install title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> Getting Started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../features/ class=md-nav__link> Basic Concepts </a> </li> <li class=md-nav__item> <a href=../../getting-started/ class=md-nav__link> Quick Start </a> </li> <li class=md-nav__item> <a href=../../glossary/ class=md-nav__link> Glossary </a> </li> <li class=md-nav__item> <a href=../../supported-versions/ class=md-nav__link> Supported Versions and Compatibility </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> Operator Guide <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Operator Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> Installation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2_1> <label class=md-nav__link for=__nav_3_2_1 id=__nav_3_2_1_label tabindex=0> Prerequisites <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2_1> <span class="md-nav__icon md-icon"></span> Prerequisites </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../prerequisites/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../kubernetes-cluster-settings/ class=md-nav__link> Set Up Kubernetes </a> </li> <li class=md-nav__item> <a href=../openshift-cluster-settings/ class=md-nav__link> Set Up OpenShift </a> </li> <li class=md-nav__item> <a href=../install-ingress-nginx/ class=md-nav__link> Install NGINX Ingress Controller </a> </li> <li class=md-nav__item> <a href=../install-keycloak/ class=md-nav__link> Install Keycloak </a> </li> <li class=md-nav__item> <a href=../install-defectdojo/ class=md-nav__link> Install DefectDojo </a> </li> <li class=md-nav__item> <a href=../install-reportportal/ class=md-nav__link> Install ReportPortal </a> </li> <li class=md-nav__item> <a href=../install-argocd/ class=md-nav__link> Install Argo CD </a> </li> <li class=md-nav__item> <a href=../install-tekton/ class=md-nav__link> Install Tekton </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2_1_10> <label class=md-nav__link for=__nav_3_2_1_10 id=__nav_3_2_1_10_label tabindex=0> Kiosk <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_2_1_10_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2_1_10> <span class="md-nav__icon md-icon"></span> Kiosk </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../edp-kiosk-usage/ class=md-nav__link> EDP Kiosk Usage </a> </li> <li class=md-nav__item> <a href=../install-kiosk/ class=md-nav__link> Set Up Kiosk </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../install-harbor/ class=md-nav__link> Install Harbor </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../install-edp/ class=md-nav__link> Install EDP </a> </li> <li class=md-nav__item> <a href=../install-via-helmfile/ class=md-nav__link> Install via Helmfile </a> </li> <li class=md-nav__item> <a href=../aws-marketplace-install/ class=md-nav__link> Install via AWS Marketplace </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3 checked> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> Configuration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../edp-access-model/ class=md-nav__link> EDP Access Model </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_2> <label class=md-nav__link for=__nav_3_3_2 id=__nav_3_3_2_label tabindex=0> Version Control Systems <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_2> <span class="md-nav__icon md-icon"></span> Version Control Systems </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../vcs/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_2_2> <label class=md-nav__link for=__nav_3_3_2_2 id=__nav_3_3_2_2_label tabindex=0> Jenkins Scenario <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_3_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_2_2> <span class="md-nav__icon md-icon"></span> Jenkins Scenario </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../import-strategy-jenkins/ class=md-nav__link> Integrate GitHub/GitLab in Jenkins </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_2_2_2> <label class=md-nav__link for=__nav_3_3_2_2_2 id=__nav_3_3_2_2_2_label tabindex=0> GitHub <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_3_3_2_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_2_2_2> <span class="md-nav__icon md-icon"></span> GitHub </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../github-integration/ class=md-nav__link> GitHub Webhook Configuration </a> </li> <li class=md-nav__item> <a href=../github-debug-webhooks/ class=md-nav__link> Debug GitHub Webhooks in Jenkins </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_2_2_3> <label class=md-nav__link for=__nav_3_3_2_2_3 id=__nav_3_3_2_2_3_label tabindex=0> GitLab <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_3_3_2_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_2_2_3> <span class="md-nav__icon md-icon"></span> GitLab </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../gitlab-integration/ class=md-nav__link> GitLab Webhook Configuration </a> </li> <li class=md-nav__item> <a href=../gitlabci-integration/ class=md-nav__link> Adjust GitLab CI Tool </a> </li> <li class=md-nav__item> <a href=../gitlab-debug-webhooks/ class=md-nav__link> Debug GitLab Webhooks in Jenkins </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_2_3> <label class=md-nav__link for=__nav_3_3_2_3 id=__nav_3_3_2_3_label tabindex=0> Tekton Scenario <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_3_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_2_3> <span class="md-nav__icon md-icon"></span> Tekton Scenario </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../import-strategy-tekton/ class=md-nav__link> Integrate GitHub/GitLab in Tekton </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_3 checked> <label class=md-nav__link for=__nav_3_3_3 id=__nav_3_3_3_label tabindex=0> Manage Jenkins Pipelines <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_3_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3_3_3> <span class="md-nav__icon md-icon"></span> Manage Jenkins Pipelines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../overview-manage-jenkins-pipelines/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Manage Jenkins CI Pipeline Job Provisioner <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Manage Jenkins CI Pipeline Job Provisioner </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#create-custom-provisioner-custom-defaultgithubgitlab class=md-nav__link> Create Custom Provisioner (custom-default/github/gitlab) </a> </li> <li class=md-nav__item> <a href=#gerrit-default class=md-nav__link> Gerrit (default) </a> </li> <li class=md-nav__item> <a href=#github-github class=md-nav__link> GitHub (github) </a> </li> <li class=md-nav__item> <a href=#gitlab-gitlab class=md-nav__link> GitLab (gitlab) </a> </li> <li class=md-nav__item> <a href=#related-articles class=md-nav__link> Related Articles </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../manage-jenkins-cd-job-provision/ class=md-nav__link> Manage Jenkins CD Pipeline Job Provisioner </a> </li> <li class=md-nav__item> <a href=../delete-jenkins-job-provision/ class=md-nav__link> Delete Jenkins Job Provision </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../headlamp-oidc/ class=md-nav__link> Headlamp OIDC </a> </li> <li class=md-nav__item> <a href=../namespace-management/ class=md-nav__link> Manage Namespace </a> </li> <li class=md-nav__item> <a href=../eks-oidc-integration/ class=md-nav__link> EKS OIDC Integration </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_7> <label class=md-nav__link for=__nav_3_3_7 id=__nav_3_3_7_label tabindex=0> Jira <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_7> <span class="md-nav__icon md-icon"></span> Jira </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../jira-integration/ class=md-nav__link> Adjust Jira Integration </a> </li> <li class=md-nav__item> <a href=../jira-gerrit-integration/ class=md-nav__link> Adjust VCS Integration With Jira </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../add-ons-overview/ class=md-nav__link> Cluster Add-Ons </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_2> <label class=md-nav__link for=__nav_3_4_2 id=__nav_3_4_2_label tabindex=0> Tekton <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_2> <span class="md-nav__icon md-icon"></span> Tekton </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../tekton-overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../tekton-monitoring/ class=md-nav__link> Monitoring </a> </li> <li class=md-nav__item> <a href=../notification-msteams/ class=md-nav__link> MS Teams Notification </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_3> <label class=md-nav__link for=__nav_3_4_3 id=__nav_3_4_3_label tabindex=0> Container Registry <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_3> <span class="md-nav__icon md-icon"></span> Container Registry </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_3_1> <label class=md-nav__link for=__nav_3_4_3_1 id=__nav_3_4_3_1_label tabindex=0> Harbor <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_4_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_3_1> <span class="md-nav__icon md-icon"></span> Harbor </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../container-registry-harbor-integration-tekton-ci/ class=md-nav__link> Harbor Integration </a> </li> <li class=md-nav__item> <a href=../harbor-oidc/ class=md-nav__link> OIDC in Harbor </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_4> <label class=md-nav__link for=__nav_3_4_4 id=__nav_3_4_4_label tabindex=0> AWS Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_4> <span class="md-nav__icon md-icon"></span> AWS Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../waf-tf-configuration/ class=md-nav__link> Configure AWS WAF With Terraform </a> </li> <li class=md-nav__item> <a href=../ebs-csi-driver/ class=md-nav__link> Install Amazon EBS CSI Driver </a> </li> <li class=md-nav__item> <a href=../enable-irsa/ class=md-nav__link> Associate IAM Roles With Service Accounts </a> </li> <li class=md-nav__item> <a href=../kaniko-irsa/ class=md-nav__link> IAM Roles for Kaniko Service Accounts </a> </li> <li class=md-nav__item> <a href=../velero-irsa/ class=md-nav__link> IAM Roles for Velero Service Accounts </a> </li> <li class=md-nav__item> <a href=../loki-irsa/ class=md-nav__link> IAM Roles for Loki Service Accounts </a> </li> <li class=md-nav__item> <a href=../configure-keycloak-oidc-eks/ class=md-nav__link> EKS OIDC With Keycloak </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../perf-integration/ class=md-nav__link> Perf Server Integration </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_6> <label class=md-nav__link for=__nav_3_4_6 id=__nav_3_4_6_label tabindex=0> ReportPortal <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_4_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_6> <span class="md-nav__icon md-icon"></span> ReportPortal </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../reportportal-keycloak/ class=md-nav__link> Keycloak Integration </a> </li> <li class=md-nav__item> <a href=../report-portal-integration-tekton/ class=md-nav__link> Integration With Tekton </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../logsight-integration/ class=md-nav__link> Logsight Integration </a> </li> <li class=md-nav__item> <a href=../dependency-track/ class=md-nav__link> DependencyTrack </a> </li> <li class=md-nav__item> <a href=../sonarqube/ class=md-nav__link> SonarQube </a> </li> <li class=md-nav__item> <a href=../nexus-sonatype/ class=md-nav__link> Nexus Sonatype </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> Platform Capabilities <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Platform Capabilities </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5_1> <label class=md-nav__link for=__nav_3_5_1 id=__nav_3_5_1_label tabindex=0> GitOps <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_5_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5_1> <span class="md-nav__icon md-icon"></span> GitOps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../argocd-integration/ class=md-nav__link> Argo CD Integration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5_2> <label class=md-nav__link for=__nav_3_5_2 id=__nav_3_5_2_label tabindex=0> Secrets Management <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5_2> <span class="md-nav__icon md-icon"></span> Secrets Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../install-external-secrets-operator/ class=md-nav__link> Install External Secrets Operator </a> </li> <li class=md-nav__item> <a href=../external-secrets-operator-integration/ class=md-nav__link> External Secrets Operator Integration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5_3> <label class=md-nav__link for=__nav_3_5_3 id=__nav_3_5_3_label tabindex=0> DevSecOps <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5_3> <span class="md-nav__icon md-icon"></span> DevSecOps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../overview-devsecops/ class=md-nav__link> Secure Delivery </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5_4> <label class=md-nav__link for=__nav_3_5_4 id=__nav_3_5_4_label tabindex=0> Backup With Velero <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5_4> <span class="md-nav__icon md-icon"></span> Backup With Velero </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../install-velero/ class=md-nav__link> Install Velero </a> </li> <li class=md-nav__item> <a href=../restore-edp-with-velero/ class=md-nav__link> Restore EDP Tenant With Velero </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5_5> <label class=md-nav__link for=__nav_3_5_5 id=__nav_3_5_5_label tabindex=0> Logging <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5_5> <span class="md-nav__icon md-icon"></span> Logging </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../install-loki/ class=md-nav__link> Install Grafana Loki </a> </li> <li class=md-nav__item> <a href=../multitenant-logging/ class=md-nav__link> Multitenant Logging </a> </li> <li class=md-nav__item> <a href=../schedule-pods-restart/ class=md-nav__link> Schedule Pods Restart </a> </li> <li class=md-nav__item> <a href=../kibana-ilm-rollover/ class=md-nav__link> Aggregate Application Logs Using EFK Stack </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../manage-custom-certificate/ class=md-nav__link> Manage Custom Certificates </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5_7> <label class=md-nav__link for=__nav_3_5_7 id=__nav_3_5_7_label tabindex=0> Single Sign-on <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_5_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5_7> <span class="md-nav__icon md-icon"></span> Single Sign-on </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../oauth2-proxy/ class=md-nav__link> Protect Endpoints </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> Upgrade <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Upgrade </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6_1> <label class=md-nav__link for=__nav_3_6_1 id=__nav_3_6_1_label tabindex=0> EDP <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_6_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6_1> <span class="md-nav__icon md-icon"></span> EDP </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../upgrade-edp-3.4/ class=md-nav__link> v3.3 to 3.4 </a> </li> <li class=md-nav__item> <a href=../upgrade-edp-3.3/ class=md-nav__link> v3.2 to 3.3 </a> </li> <li class=md-nav__item> <a href=../upgrade-edp-3.2/ class=md-nav__link> v3.1 to 3.2 </a> </li> <li class=md-nav__item> <a href=../upgrade-edp-3.1/ class=md-nav__link> v3.0 to 3.1 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6_1_5> <label class=md-nav__link for=__nav_3_6_1_5 id=__nav_3_6_1_5_label tabindex=0> Older Versions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_6_1_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6_1_5> <span class="md-nav__icon md-icon"></span> Older Versions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../upgrade-edp-3.0/ class=md-nav__link> v2.12 to 3.0 </a> </li> <li class=md-nav__item> <a href=../upgrade-edp-2.12/ class=md-nav__link> v2.11 to 2.12 </a> </li> <li class=md-nav__item> <a href=../upgrade-edp-2.11/ class=md-nav__link> v2.10 to 2.11 </a> </li> <li class=md-nav__item> <a href=../upgrade-edp-2.10/ class=md-nav__link> v2.9 to 2.10 </a> </li> <li class=md-nav__item> <a href=../upgrade-edp-2.9/ class=md-nav__link> v2.8 to 2.9 </a> </li> <li class=md-nav__item> <a href=../upgrade-edp-2.8/ class=md-nav__link> v2.7 to 2.8 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6_2> <label class=md-nav__link for=__nav_3_6_2 id=__nav_3_6_2_label tabindex=0> Keycloak <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6_2> <span class="md-nav__icon md-icon"></span> Keycloak </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../upgrade-keycloak-19.0/ class=md-nav__link> v17.0 to 19.0 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7 id=__nav_3_7_label tabindex=0> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/terraform-stages/ class=md-nav__link> CI Pipelines for Terraform </a> </li> <li class=md-nav__item> <a href=../deploy-aws-eks/ class=md-nav__link> Deploy AWS EKS Cluster </a> </li> <li class=md-nav__item> <a href=../deploy-okd/ class=md-nav__link> Deploy OKD 4.9 Cluster </a> </li> <li class=md-nav__item> <a href=../deploy-okd-4.10/ class=md-nav__link> Deploy OKD 4.10 Cluster </a> </li> <li class=md-nav__item> <a href=../ssl-automation-okd/ class=md-nav__link> Use Cert-Manager in OpenShift </a> </li> <li class=md-nav__item> <a href=../add-jenkins-agent/ class=md-nav__link> Manage Jenkins Agent </a> </li> <li class=md-nav__item> <a href=../kibana-ilm-rollover/ class=md-nav__link> Aggregate Application Logs Using EFK Stack </a> </li> <li class=md-nav__item> <a href=../migrate-ci-pipelines-from-jenkins-to-tekton/ class=md-nav__link> Migrate CI Pipelines From Jenkins to Tekton </a> </li> <li class=md-nav__item> <a href=../delete-edp/ class=md-nav__link> Uninstall EDP </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> User Guide <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> Marketplace <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Marketplace </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/marketplace/ class=md-nav__link> Marketplace Overview </a> </li> <li class=md-nav__item> <a href=../../user-guide/add-marketplace/ class=md-nav__link> Add Component via Marketplace </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> Components <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Components </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_1> <label class=md-nav__link for=__nav_4_3_1 id=__nav_4_3_1_label tabindex=0> Application <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3_1> <span class="md-nav__icon md-icon"></span> Application </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/add-application/ class=md-nav__link> Add Application </a> </li> <li class=md-nav__item> <a href=../../user-guide/application/ class=md-nav__link> Manage Applications </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_2> <label class=md-nav__link for=__nav_4_3_2 id=__nav_4_3_2_label tabindex=0> Autotest <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> Autotest </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/add-autotest/ class=md-nav__link> Add Autotest </a> </li> <li class=md-nav__item> <a href=../../user-guide/autotest/ class=md-nav__link> Manage Autotests </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_3> <label class=md-nav__link for=__nav_4_3_3 id=__nav_4_3_3_label tabindex=0> Library <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> Library </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/add-library/ class=md-nav__link> Add Library </a> </li> <li class=md-nav__item> <a href=../../user-guide/library/ class=md-nav__link> Manage Libraries </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_4> <label class=md-nav__link for=__nav_4_3_4 id=__nav_4_3_4_label tabindex=0> Infrastructure <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3_4> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/add-infrastructure/ class=md-nav__link> Add Infrastructure </a> </li> <li class=md-nav__item> <a href=../../user-guide/infrastructure/ class=md-nav__link> Manage Infrastructures </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../user-guide/manage-branches/ class=md-nav__link> Manage Branches </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> Environments <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Environments </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/add-cd-pipeline/ class=md-nav__link> Add CD Pipeline </a> </li> <li class=md-nav__item> <a href=../../user-guide/add-quality-gate/ class=md-nav__link> Add Quality Gate </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5 id=__nav_4_5_label tabindex=0> Configuration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_1> <label class=md-nav__link for=__nav_4_5_1 id=__nav_4_5_1_label tabindex=0> Git Server <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_1> <span class="md-nav__icon md-icon"></span> Git Server </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/git-server-overview/ class=md-nav__link> Manage Git Servers </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_2> <label class=md-nav__link for=__nav_4_5_2 id=__nav_4_5_2_label tabindex=0> Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_2> <span class="md-nav__icon md-icon"></span> Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guide/add-cluster/ class=md-nav__link> Add Cluster </a> </li> <li class=md-nav__item> <a href=../../user-guide/cluster/ class=md-nav__link> Manage Clusters </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> Developer Guide <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Developer Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer-guide/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../developer-guide/local-development/ class=md-nav__link> Workspace Setup Manual </a> </li> <li class=md-nav__item> <a href=../../developer-guide/mk-docs-development/ class=md-nav__link> Documentation Flow </a> </li> <li class=md-nav__item> <a href=../../developer-guide/edp-workflow/ class=md-nav__link> EDP Project Rules. Working Process </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> Use Cases <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Use Cases </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../use-cases/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../use-cases/application-scaffolding/ class=md-nav__link> Scaffold and Deploy FastAPI Application </a> </li> <li class=md-nav__item> <a href=../../use-cases/tekton-custom-pipelines/ class=md-nav__link> Deploy Application With Custom Build Tool/Framework </a> </li> <li class=md-nav__item> <a href=../../use-cases/external-secrets/ class=md-nav__link> Secured Secrets Management for Application Deployment </a> </li> <li class=md-nav__item> <a href=../../use-cases/autotest-as-quality-gate/ class=md-nav__link> Autotest as a Quality Gate </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../faq/ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=../../roadmap/ class=md-nav__link> RoadMap </a> </li> <li class=md-nav__item> <a href=https://github.com/epam/edp-install/blob/master/RELEASES.md class=md-nav__link> Releases â§‰ </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#create-custom-provisioner-custom-defaultgithubgitlab class=md-nav__link> Create Custom Provisioner (custom-default/github/gitlab) </a> </li> <li class=md-nav__item> <a href=#gerrit-default class=md-nav__link> Gerrit (default) </a> </li> <li class=md-nav__item> <a href=#github-github class=md-nav__link> GitHub (github) </a> </li> <li class=md-nav__item> <a href=#gitlab-gitlab class=md-nav__link> GitLab (gitlab) </a> </li> <li class=md-nav__item> <a href=#related-articles class=md-nav__link> Related Articles </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=manage-jenkins-ci-pipeline-job-provisioner>Manage Jenkins CI Pipeline Job Provisioner<a class=headerlink href=#manage-jenkins-ci-pipeline-job-provisioner title="Permanent link">âš“ï¸Ž</a></h1> <p>The Jenkins CI job provisioner (or seed-job) is used to create and manage the application folder, and its <a href=../../user-guide/pipeline-stages/ >Code Review, Build and Create Release pipelines</a>. Depending on the version control system, different job provisioners are used. EDP supports integration with the following version control systems:</p> <ul> <li>Gerrit (default)</li> <li>GitHub (github)</li> <li>GitLab (gitlab)</li> </ul> <p>By default, the <a href=https://github.com/epam/edp-jenkins-operator/tree/master>Jenkins operator</a> creates a pipeline for <a href=../../features/ >several types of application and libraries</a>. There is a special <strong>job-provisions/ci</strong> folder in Jenkins for these provisioners. During the EDP deployment, a default provisioner is created for integration with <a href=https://www.gerritcodereview.com/ >Gerrit</a> version control system. To configure integration with other version control systems, you need to add the required job provisioners to <strong>job-provisions/ci</strong> folder in Jenkins.</p> <h2 id=create-custom-provisioner-custom-defaultgithubgitlab>Create Custom Provisioner (custom-default/github/gitlab)<a class=headerlink href=#create-custom-provisioner-custom-defaultgithubgitlab title="Permanent link">âš“ï¸Ž</a></h2> <p>In some cases it is necessary to modify or update the job provisioner logic, for example when an <a href=../add-other-code-language/ >added other code language</a> needs to create a custom job provisioner on the basis of an existing one out of the box. Take the steps below to add a custom job provision:</p> <ol> <li> <p>Navigate to the Jenkins main page and open the <em>job-provisions/ci</em> folder, click <strong>New Item</strong> and type the name of job-provisions, for example - custom-github.</p> <p> <figure><a data-caption="CI provisioner name" data-fancybox=gallery href=../../assets/operator-guide/ci-provisioner-name.png><img alt="CI provisioner name" src=../../assets/operator-guide/ci-provisioner-name.png title="CI provisioner name" width=600px></a><figcaption>CI provisioner name</figcaption> </figure> </p> <p>Scroll down to the <strong>Copy from</strong> field and enter "/job-provisions/ci/github", and click OK: <figure><a data-caption="Copy ci provisioner" data-fancybox=gallery href=../../assets/operator-guide/copy-ci-provisioner.png><img alt="Copy ci provisioner" src=../../assets/operator-guide/copy-ci-provisioner.png title="Copy ci provisioner" width=600px></a><figcaption>Copy ci provisioner</figcaption> </figure> </p> </li> <li> <p>Update the required parameters in the new provisioner. For example, if it is necessary to implement a new build tool <strong>docker</strong>, several parameters are to be updated. Add the following stages to the docker Code Review and Build pipelines for <strong>docker</strong> application:</p> <div class=codehilite><pre><span></span><code><span class=nv>stages</span>[<span class=s1>&#39;Code-review-application-docker&#39;</span>]<span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;lint&quot;},{&quot;name&quot;: &quot;build&quot;}]&#39;</span>
...
<span class=nv>stages</span>[<span class=s1>&#39;Build-application-docker&#39;</span>]<span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;lint&quot;},{&quot;name&quot;: &quot;build&quot;},{&quot;name&quot;: &quot;push&quot;},{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
...
<span class=nv>def</span><span class=w> </span><span class=nv>getStageKeyName</span><span class=ss>(</span><span class=nv>buildTool</span><span class=ss>)</span><span class=w> </span>{
<span class=w>    </span>...
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=ss>(</span><span class=nv>buildTool</span>.<span class=nv>toString</span><span class=ss>()</span>.<span class=nv>equalsIgnoreCase</span><span class=ss>(</span><span class=s1>&#39;docker&#39;</span><span class=ss>))</span><span class=w> </span>{
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;Code-review-application-docker&quot;</span>
<span class=w>    </span>}
<span class=w>    </span>...
}
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Make sure the support for the above mentioned logic is implemented. Please refer to the <a href=https://epam.github.io/edp-install/user-guide/pipeline-framework/#13-how-to-redefine-or-extend-the-edp-pipeline-stages-library>How to Redefine or Extend the EDP Pipeline Stages Library</a> section of the guide.</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The default template should be changed if there is another creation logic for the Code Review, Build and Create Release pipelines. Furthermore, all pipeline types should have the necessary stages as well.</p> </div> <p>After the steps above are performed, the new custom job provision will be available in <strong>Advanced Settings</strong> during the application creation in the EDP Portal UI:</p> <p> <figure><a data-caption="Custom ci provision" data-fancybox=gallery href=../../assets/operator-guide/add-custom-ci-provision.png><img alt="Custom ci provision" src=../../assets/operator-guide/add-custom-ci-provision.png title="Custom ci provision" width=600px></a><figcaption>Custom ci provision</figcaption> </figure> </p> </li> </ol> <h2 id=gerrit-default>Gerrit (default)<a class=headerlink href=#gerrit-default title="Permanent link">âš“ï¸Ž</a></h2> <p>During the EDP deployment, a default provisioner is created for integration with <a href=https://www.gerritcodereview.com/ >Gerrit</a> version control system.</p> <ol> <li> <p>Find the configuration in <strong>job-provisions/ci/default</strong>.</p> </li> <li> <p>Default template is presented below:</p> <details> <summary><b>View: Default template</b></summary> <div class=highlight><pre><span></span><code><span class=cm>/* Copyright 2022 EPAM Systems.</span>

<span class=cm>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class=cm>you may not use this file except in compliance with the License.</span>
<span class=cm>You may obtain a copy of the License at</span>
<span class=cm>http://www.apache.org/licenses/LICENSE-2.0</span>

<span class=cm>Unless required by applicable law or agreed to in writing, software</span>
<span class=cm>distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class=cm>WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>

<span class=cm>See the License for the specific language governing permissions and</span>
<span class=cm>limitations under the License. */</span>

<span class=kn>import</span><span class=w> </span><span class=nn>groovy.json.*</span>
<span class=kn>import</span><span class=w> </span><span class=nn>jenkins.model.Jenkins</span>

<span class=n>Jenkins</span><span class=w> </span><span class=n>jenkins</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Jenkins</span><span class=o>.</span><span class=na>instance</span>
<span class=kt>def</span><span class=w> </span><span class=n>stages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[:]</span>
<span class=kt>def</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Boolean</span><span class=o>.</span><span class=na>parseBoolean</span><span class=o>(</span><span class=s2>&quot;${JIRA_INTEGRATION_ENABLED}&quot;</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>String</span><span class=o>)</span>
<span class=kt>def</span><span class=w> </span><span class=n>commitValidateStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;commit-validate&quot;}&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;&#39;</span>
<span class=kt>def</span><span class=w> </span><span class=n>createJIMStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;create-jira-issue-metadata&quot;}&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;&#39;</span>
<span class=kt>def</span><span class=w> </span><span class=n>platformType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${PLATFORM_TYPE}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>buildStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>platformType</span><span class=o>.</span><span class=na>toString</span><span class=o>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s2>&quot;kubernetes&quot;</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;build-image-kaniko&quot;}&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;build-image-from-dockerfile&quot;}&#39;</span>
<span class=kt>def</span><span class=w> </span><span class=n>buildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${BUILD_TOOL}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>goBuildStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s2>&quot;go&quot;</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;compile&quot;}&#39;</span>

<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-application&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;gerrit-checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>goBuildStage</span><span class=w> </span><span class=o>+</span>
<span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;tests&quot;},[{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;dockerfile-lint&quot;},{&quot;name&quot;: &quot;helm-lint&quot;}]]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;gerrit-checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;compile&quot;},{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-autotests&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;gerrit-checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-default&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;gerrit-checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library-terraform&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;gerrit-checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;terraform-lint&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library-opa&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;gerrit-checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;tests&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library-codenarc&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;gerrit-checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library-kaniko&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;gerrit-checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;dockerfile-lint&quot;},{&quot;name&quot;: &quot;dockerbuild-verify&quot;}]&#39;</span>

<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-maven&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;},{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-npm&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-maven&#39;</span><span class=o>]</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-gradle&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-maven&#39;</span><span class=o>]</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-dotnet&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-python&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-terraform&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;terraform-lint&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;terraform-plan&quot;},{&quot;name&quot;: &quot;terraform-apply&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-opa&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;tests&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-codenarc&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>    </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-kaniko&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;dockerfile-lint&quot;},{&quot;name&quot;: &quot;build-image-kaniko&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>

<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-autotests-maven&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-autotests-gradle&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>

<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-maven&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;sast&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${buildStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-npm&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${buildStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-gradle&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-maven&#39;</span><span class=o>]</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-dotnet&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${buildStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-go&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;sast&quot;},{&quot;name&quot;: &quot;tests&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${buildStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-python&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s2>&quot;${buildStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>

<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Create-release&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;create-branch&quot;},{&quot;name&quot;: &quot;trigger-job&quot;}]&#39;</span>

<span class=kt>def</span><span class=w> </span><span class=n>defaultBuild</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;]&#39;</span>

<span class=kt>def</span><span class=w> </span><span class=n>codebaseName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${NAME}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>gitServerCrName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${GIT_SERVER_CR_NAME}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${GIT_SERVER_CR_VERSION}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${GIT_CREDENTIALS_ID ? GIT_CREDENTIALS_ID : &#39;gerrit-ciuser-sshkey&#39;}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>repositoryPath</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${REPOSITORY_PATH}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>defaultBranch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${DEFAULT_BRANCH}&quot;</span>

<span class=kt>def</span><span class=w> </span><span class=n>codebaseFolder</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jenkins</span><span class=o>.</span><span class=na>getItem</span><span class=o>(</span><span class=n>codebaseName</span><span class=o>)</span>
<span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>codebaseFolder</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>folder</span><span class=o>(</span><span class=n>codebaseName</span><span class=o>)</span>
<span class=o>}</span>

<span class=n>createListView</span><span class=o>(</span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Releases&quot;</span><span class=o>)</span>
<span class=n>createReleasePipeline</span><span class=o>(</span><span class=s2>&quot;Create-release-${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=s2>&quot;Create-release&quot;</span><span class=o>],</span><span class=w> </span><span class=s2>&quot;CreateRelease&quot;</span><span class=o>,</span>
<span class=w>        </span><span class=n>repositoryPath</span><span class=o>,</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>,</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=o>,</span><span class=w> </span><span class=n>platformType</span><span class=o>,</span><span class=w> </span><span class=n>defaultBranch</span><span class=o>)</span>

<span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>().</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;none&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=kc>true</span>
<span class=o>}</span>

<span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>BRANCH</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>branch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${BRANCH}&quot;</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>formattedBranch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${branch.toUpperCase().replaceAll(/\//, &quot;</span><span class=o>-</span><span class=s2>&quot;)}&quot;</span>
<span class=w>    </span><span class=n>createListView</span><span class=o>(</span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>formattedBranch</span><span class=o>)</span>

<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${TYPE}&quot;</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>crKey</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getStageKeyName</span><span class=o>(</span><span class=n>buildTool</span><span class=o>)</span>
<span class=w>    </span><span class=n>createCiPipeline</span><span class=o>(</span><span class=s2>&quot;Code-review-${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=n>crKey</span><span class=o>],</span><span class=w> </span><span class=s2>&quot;CodeReview&quot;</span><span class=o>,</span>
<span class=w>            </span><span class=n>repositoryPath</span><span class=o>,</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=o>,</span><span class=w> </span><span class=n>branch</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>)</span>

<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>buildKey</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;Build-${type}-${buildTool.toLowerCase()}&quot;</span><span class=o>.</span><span class=na>toString</span><span class=o>()</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>type</span><span class=o>.</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;application&#39;</span><span class=o>)</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>type</span><span class=o>.</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;library&#39;</span><span class=o>)</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>type</span><span class=o>.</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;autotests&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=kt>def</span><span class=w> </span><span class=n>jobExists</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span>
<span class=w>        </span><span class=k>if</span><span class=o>(</span><span class=s2>&quot;${formattedBranch}-Build-${codebaseName}&quot;</span><span class=o>.</span><span class=na>toString</span><span class=o>()</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>Jenkins</span><span class=o>.</span><span class=na>instance</span><span class=o>.</span><span class=na>getAllItems</span><span class=o>().</span><span class=na>collect</span><span class=o>{</span><span class=n>it</span><span class=o>.</span><span class=na>name</span><span class=o>})</span>
<span class=w>            </span><span class=n>jobExists</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>

<span class=w>        </span><span class=n>createCiPipeline</span><span class=o>(</span><span class=s2>&quot;Build-${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>stages</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>buildKey</span><span class=o>,</span><span class=w> </span><span class=n>defaultBuild</span><span class=o>),</span><span class=w> </span><span class=s2>&quot;Build&quot;</span><span class=o>,</span>
<span class=w>                </span><span class=n>repositoryPath</span><span class=o>,</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=o>,</span><span class=w> </span><span class=n>branch</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>)</span>

<span class=w>        </span><span class=k>if</span><span class=o>(!</span><span class=n>jobExists</span><span class=o>)</span>
<span class=w>          </span><span class=n>queue</span><span class=o>(</span><span class=s2>&quot;${codebaseName}/${formattedBranch}-Build-${codebaseName}&quot;</span><span class=o>)</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>createCiPipeline</span><span class=o>(</span><span class=n>pipelineName</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>codebaseStages</span><span class=o>,</span><span class=w> </span><span class=n>pipelineType</span><span class=o>,</span><span class=w> </span><span class=n>repository</span><span class=o>,</span><span class=w> </span><span class=n>credId</span><span class=o>,</span><span class=w> </span><span class=n>watchBranch</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>pipelineJob</span><span class=o>(</span><span class=s2>&quot;${codebaseName}/${watchBranch.toUpperCase().replaceAll(/\//, &quot;</span><span class=o>-</span><span class=s2>&quot;)}-${pipelineName}&quot;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>logRotator</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>numToKeep</span><span class=o>(</span><span class=mi>10</span><span class=o>)</span>
<span class=w>            </span><span class=n>daysToKeep</span><span class=o>(</span><span class=mi>7</span><span class=o>)</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>triggers</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>gerrit</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>events</span><span class=w> </span><span class=o>{</span>
<span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>pipelineName</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s2>&quot;Build&quot;</span><span class=o>))</span>
<span class=w>                        </span><span class=n>changeMerged</span><span class=o>()</span>
<span class=w>                    </span><span class=k>else</span>
<span class=w>                        </span><span class=n>patchsetCreated</span><span class=o>()</span>
<span class=w>                </span><span class=o>}</span>
<span class=w>                </span><span class=n>project</span><span class=o>(</span><span class=s2>&quot;plain:${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=o>[</span><span class=s2>&quot;plain:${watchBranch}&quot;</span><span class=o>])</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>definition</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>cps</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>script</span><span class=o>(</span><span class=s2>&quot;@Library([&#39;edp-library-stages&#39;, &#39;edp-library-pipelines&#39;]) _ \n\n${pipelineType}()&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>sandbox</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>            </span><span class=n>parameters</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GIT_SERVER_CR_NAME&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitServerCrName}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Name of Git Server CR to generate link to Git server&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GIT_SERVER_CR_VERSION&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitServerCrVersion}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Version of GitServer CR Resource&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;STAGES&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${codebaseStages}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Consequence of stages in JSON format to be run during execution&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GERRIT_PROJECT_NAME&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Gerrit project name(Codebase name) to be build&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;BRANCH&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${watchBranch}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Branch to build artifact from&quot;</span><span class=o>)</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>getStageKeyName</span><span class=o>(</span><span class=n>buildTool</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>().</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;terraform&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;Code-review-library-terraform&quot;</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>().</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;opa&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;Code-review-library-opa&quot;</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>().</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;codenarc&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;Code-review-library-codenarc&quot;</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>().</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;kaniko&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;Code-review-library-kaniko&quot;</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>buildToolsOutOfTheBox</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=s2>&quot;maven&quot;</span><span class=o>,</span><span class=s2>&quot;npm&quot;</span><span class=o>,</span><span class=s2>&quot;gradle&quot;</span><span class=o>,</span><span class=s2>&quot;dotnet&quot;</span><span class=o>,</span><span class=s2>&quot;none&quot;</span><span class=o>,</span><span class=s2>&quot;go&quot;</span><span class=o>,</span><span class=s2>&quot;python&quot;</span><span class=o>]</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>supBuildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>buildToolsOutOfTheBox</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>())</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>supBuildTool</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s2>&quot;Code-review-${TYPE}&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Code-review-default&quot;</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>createReleasePipeline</span><span class=o>(</span><span class=n>pipelineName</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>codebaseStages</span><span class=o>,</span><span class=w> </span><span class=n>pipelineType</span><span class=o>,</span><span class=w> </span><span class=n>repository</span><span class=o>,</span><span class=w> </span><span class=n>credId</span><span class=o>,</span>
<span class=w> </span><span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>,</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=o>,</span><span class=w> </span><span class=n>platformType</span><span class=o>,</span><span class=w> </span><span class=n>defaultBranch</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>pipelineJob</span><span class=o>(</span><span class=s2>&quot;${codebaseName}/${pipelineName}&quot;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>logRotator</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>numToKeep</span><span class=o>(</span><span class=mi>14</span><span class=o>)</span>
<span class=w>            </span><span class=n>daysToKeep</span><span class=o>(</span><span class=mi>30</span><span class=o>)</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>definition</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>cps</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>script</span><span class=o>(</span><span class=s2>&quot;@Library([&#39;edp-library-stages&#39;, &#39;edp-library-pipelines&#39;]) _ \n\n${pipelineType}()&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>sandbox</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>            </span><span class=n>parameters</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;STAGES&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${codebaseStages}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>pipelineName</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s2>&quot;Create-release&quot;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;JIRA_INTEGRATION_ENABLED&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${jiraIntegrationEnabled}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Is Jira integration enabled&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;PLATFORM_TYPE&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${platformType}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Platform type&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GERRIT_PROJECT&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;RELEASE_NAME&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Name of the release(branch to be created)&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;COMMIT_ID&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Commit ID that will be used to create branch from for new release. If empty, DEFAULT_BRANCH will be used&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GIT_SERVER_CR_NAME&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitServerCrName}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Name of Git Server CR to generate link to Git server&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GIT_SERVER_CR_VERSION&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitServerCrVersion}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Version of GitServer CR Resource&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;REPOSITORY_PATH&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${repository}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Full repository path&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;DEFAULT_BRANCH&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${defaultBranch}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Default repository branch&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=o>}</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>createListView</span><span class=o>(</span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>branchName</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>listView</span><span class=o>(</span><span class=s2>&quot;${codebaseName}/${branchName}&quot;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>branchName</span><span class=o>.</span><span class=na>toLowerCase</span><span class=o>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s2>&quot;releases&quot;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>jobFilters</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>regex</span><span class=w> </span><span class=o>{</span>
<span class=w>                    </span><span class=n>matchType</span><span class=o>(</span><span class=n>MatchType</span><span class=o>.</span><span class=na>INCLUDE_MATCHED</span><span class=o>)</span>
<span class=w>                    </span><span class=n>matchValue</span><span class=o>(</span><span class=n>RegexMatchValue</span><span class=o>.</span><span class=na>NAME</span><span class=o>)</span>
<span class=w>                    </span><span class=n>regex</span><span class=o>(</span><span class=s2>&quot;^Create-release.*&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=o>}</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>jobFilters</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>regex</span><span class=w> </span><span class=o>{</span>
<span class=w>                    </span><span class=n>matchType</span><span class=o>(</span><span class=n>MatchType</span><span class=o>.</span><span class=na>INCLUDE_MATCHED</span><span class=o>)</span>
<span class=w>                    </span><span class=n>matchValue</span><span class=o>(</span><span class=n>RegexMatchValue</span><span class=o>.</span><span class=na>NAME</span><span class=o>)</span>
<span class=w>                    </span><span class=n>regex</span><span class=o>(</span><span class=s2>&quot;^${branchName}-(Code-review|Build).*&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=o>}</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>columns</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>status</span><span class=o>()</span>
<span class=w>            </span><span class=n>weather</span><span class=o>()</span>
<span class=w>            </span><span class=n>name</span><span class=o>()</span>
<span class=w>            </span><span class=n>lastSuccess</span><span class=o>()</span>
<span class=w>            </span><span class=n>lastFailure</span><span class=o>()</span>
<span class=w>            </span><span class=n>lastDuration</span><span class=o>()</span>
<span class=w>            </span><span class=n>buildButton</span><span class=o>()</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>
</code></pre></div> </details> <p><strong>Job Provision Pipeline Parameters</strong></p> <p>The job-provisions pipeline consists of the following parameters of type string:</p> </li> </ol> <ul> <li>NAME - the application name;</li> </ul> <ul> <li>TYPE - the codebase type (the application / library / autotest);</li> </ul> <ul> <li>BUILD_TOOL - a tool that is used to build the application;</li> </ul> <ul> <li>BRANCH - a branch name;</li> </ul> <ul> <li>GIT_SERVER_CR_NAME - the name of the application Git server custom resource;</li> </ul> <ul> <li>GIT_SERVER_CR_VERSION - the version of the application Git server custom resource;</li> </ul> <ul> <li>GIT_CREDENTIALS_ID - the secret name where Git server credentials are stored (default 'gerrit-ciuser-sshkey');</li> </ul> <ul> <li>REPOSITORY_PATH - the full repository path;</li> </ul> <ul> <li>JIRA_INTEGRATION_ENABLED - the Jira integration is enabled or not;</li> </ul> <ul> <li>PLATFORM_TYPE - the type of platform (kubernetes or openshift);</li> </ul> <ul> <li>DEFAULT_BRANCH - the default repository branch.</li> </ul> <h2 id=github-github>GitHub (github)<a class=headerlink href=#github-github title="Permanent link">âš“ï¸Ž</a></h2> <p>To create a new job provision for work with GitHub, take the following steps:</p> <ol> <li> <p>Navigate to the Jenkins main page and open the <em>job-provisions/ci</em> folder.</p> </li> <li> <p>Click <em>New Item</em> and type the name of job-provisions - <strong>github</strong>.</p> </li> <li> <p>Select the <em>Freestyle project</em> option and click OK.</p> </li> <li> <p>Select the <em>Discard old builds</em> check box and configure a few parameters:</p> <p>Strategy: Log Rotation</p> <p>Days to keep builds: 10</p> <p>Max # of builds to keep: 10</p> </li> <li> <p>Select the <em>This project is parameterized</em> check box and add a few input parameters (the type of the variables is string):</p> <ul> <li>NAME;</li> </ul> <ul> <li>TYPE;</li> </ul> <ul> <li>BUILD_TOOL;</li> </ul> <ul> <li>BRANCH;</li> </ul> <ul> <li>GIT_SERVER_CR_NAME;</li> </ul> <ul> <li>GIT_SERVER_CR_VERSION;</li> </ul> <ul> <li>GIT_CREDENTIALS_ID;</li> </ul> <ul> <li>REPOSITORY_PATH;</li> </ul> <ul> <li>JIRA_INTEGRATION_ENABLED;</li> </ul> <ul> <li>PLATFORM_TYPE;</li> </ul> <ul> <li>DEFAULT_BRANCH.</li> </ul> </li> <li> <p>Check the <em>Execute concurrent builds if necessary</em> option.</p> </li> <li> <p>Check the <em>Restrict where this project can be run</em> option.</p> </li> <li> <p>Fill in the <em>Label Expression</em> field by typing <em>master</em> to ensure job runs on Jenkins Master.</p> </li> <li> <p>In the <em>Build</em> section, perform the following:</p> <ul> <li>Select <em>DSL Script</em>;</li> </ul> <ul> <li>Select the <em>Use the provided DSL script</em> check box:</li> </ul> <p> <figure><a data-caption="DSL script check box" data-fancybox=gallery href=../../assets/operator-guide/dsl_script.png><img alt="DSL script check box" src=../../assets/operator-guide/dsl_script.png title="DSL script check box" width=600px></a><figcaption>DSL script check box</figcaption> </figure> </p> </li> <li> <p>As soon as all the steps above are performed, insert the code:</p> <details> <summary><b>View: Template</b></summary> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>groovy.json.*</span>
<span class=kn>import</span><span class=w> </span><span class=nn>jenkins.model.Jenkins</span>
<span class=kn>import</span><span class=w> </span><span class=nn>javaposse.jobdsl.plugin.*</span>
<span class=kn>import</span><span class=w> </span><span class=nn>com.cloudbees.hudson.plugins.folder.*</span>

<span class=n>Jenkins</span><span class=w> </span><span class=n>jenkins</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Jenkins</span><span class=o>.</span><span class=na>instance</span>
<span class=kt>def</span><span class=w> </span><span class=n>stages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[:]</span>
<span class=kt>def</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Boolean</span><span class=o>.</span><span class=na>parseBoolean</span><span class=o>(</span><span class=s2>&quot;${JIRA_INTEGRATION_ENABLED}&quot;</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>String</span><span class=o>)</span>
<span class=kt>def</span><span class=w> </span><span class=n>commitValidateStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;commit-validate&quot;}&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;&#39;</span>
<span class=kt>def</span><span class=w> </span><span class=n>createJIMStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;create-jira-issue-metadata&quot;}&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;&#39;</span>
<span class=kt>def</span><span class=w> </span><span class=n>platformType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${PLATFORM_TYPE}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>buildStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>platformType</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s2>&quot;kubernetes&quot;</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;build-image-kaniko&quot;}&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;build-image-from-dockerfile&quot;}&#39;</span>
<span class=kt>def</span><span class=w> </span><span class=n>buildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${BUILD_TOOL}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>goBuildStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s2>&quot;go&quot;</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;compile&quot;}&#39;</span>

<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-application&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>goBuildStage</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;tests&quot;},[{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;dockerfile-lint&quot;},{&quot;name&quot;: &quot;helm-lint&quot;}]]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;compile&quot;},{&quot;name&quot;: &quot;tests&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;sonar&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-autotests&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-default&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library-terraform&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;terraform-lint&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library-opa&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;tests&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library-codenarc&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library-kaniko&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;dockerfile-lint&quot;},{&quot;name&quot;: &quot;dockerbuild-verify&quot;}]&#39;</span>

<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-maven&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;},{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-npm&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-maven&#39;</span><span class=o>]</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-gradle&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-maven&#39;</span><span class=o>]</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-dotnet&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-python&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-terraform&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;terraform-lint&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;terraform-plan&quot;},{&quot;name&quot;: &quot;terraform-apply&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-opa&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;tests&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-codenarc&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-kaniko&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;dockerfile-lint&quot;},{&quot;name&quot;: &quot;build-image-kaniko&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>

<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-autotests-maven&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-autotests-gradle&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>

<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-maven&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;sast&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${buildStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-npm&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${buildStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-gradle&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-maven&#39;</span><span class=o>]</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-dotnet&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${buildStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-go&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;sast&quot;},{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>                                    </span><span class=s1>&#39;{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${buildStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-python&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>                                    </span><span class=s2>&quot;${buildStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;:&quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>

<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Create-release&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;create-branch&quot;},{&quot;name&quot;: &quot;trigger-job&quot;}]&#39;</span>

<span class=kt>def</span><span class=w> </span><span class=n>buildToolsOutOfTheBox</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=s2>&quot;maven&quot;</span><span class=o>,</span><span class=s2>&quot;npm&quot;</span><span class=o>,</span><span class=s2>&quot;gradle&quot;</span><span class=o>,</span><span class=s2>&quot;dotnet&quot;</span><span class=o>,</span><span class=s2>&quot;none&quot;</span><span class=o>,</span><span class=s2>&quot;go&quot;</span><span class=o>,</span><span class=s2>&quot;python&quot;</span><span class=o>]</span>
<span class=kt>def</span><span class=w> </span><span class=n>defaultStages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;]&#39;</span>

<span class=kt>def</span><span class=w> </span><span class=n>codebaseName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${NAME}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>gitServerCrName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${GIT_SERVER_CR_NAME}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${GIT_SERVER_CR_VERSION}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${GIT_CREDENTIALS_ID ? GIT_CREDENTIALS_ID : &#39;gerrit-ciuser-sshkey&#39;}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>repositoryPath</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${REPOSITORY_PATH.replaceAll(~/:\d+\\//,&quot;</span><span class=s>/&quot;)}&quot;</span>
<span class=s>def githubRepository = &quot;https://${repositoryPath.split(&quot;@&quot;)[1]}&quot;</span>
<span class=s>def defaultBranch = &quot;${DEFAULT_BRANCH}&quot;</span>

<span class=s>def codebaseFolder = jenkins.getItem(codebaseName)</span>
<span class=s>if (codebaseFolder == null) {</span>
<span class=s>    folder(codebaseName)</span>
<span class=s>}</span>

<span class=s>createListView(codebaseName, &quot;Releases&quot;)</span>
<span class=s>createReleasePipeline(&quot;Create-release-${codebaseName}&quot;, codebaseName, stages[&quot;Create-release&quot;], &quot;CreateRelease&quot;,</span>
<span class=s>        repositoryPath, gitCredentialsId, gitServerCrName, gitServerCrVersion, jiraIntegrationEnabled, platformType, defaultBranch)</span>

<span class=s>if (buildTool.toString().equalsIgnoreCase(&#39;none&#39;)) {</span>
<span class=s>    return true</span>
<span class=s>}</span>

<span class=s>if (BRANCH) {</span>
<span class=s>    def branch = &quot;${BRANCH}&quot;</span>
<span class=s>    def formattedBranch = &quot;${branch.toUpperCase().replaceAll(/</span><span class=err>\\</span><span class=c1>//, &quot;-&quot;)}&quot;</span>
<span class=w>    </span><span class=n>createListView</span><span class=o>(</span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>formattedBranch</span><span class=o>)</span>

<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${TYPE}&quot;</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>supBuildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>buildToolsOutOfTheBox</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>())</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>crKey</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getStageKeyName</span><span class=o>(</span><span class=n>buildTool</span><span class=o>).</span><span class=na>toString</span><span class=o>()</span>
<span class=w>    </span><span class=n>createCodeReviewPipeline</span><span class=o>(</span><span class=s2>&quot;Code-review-${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>stages</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>crKey</span><span class=o>,</span><span class=w> </span><span class=n>defaultStages</span><span class=o>),</span><span class=w> </span><span class=s2>&quot;CodeReview&quot;</span><span class=o>,</span>
<span class=w>            </span><span class=n>repositoryPath</span><span class=o>,</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=o>,</span><span class=w> </span><span class=n>branch</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>,</span><span class=w> </span><span class=n>githubRepository</span><span class=o>)</span>
<span class=w>    </span><span class=n>registerWebHook</span><span class=o>(</span><span class=n>repositoryPath</span><span class=o>)</span>


<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>buildKey</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;Build-${type}-${buildTool.toLowerCase()}&quot;</span><span class=o>.</span><span class=na>toString</span><span class=o>()</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>type</span><span class=o>.</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;application&#39;</span><span class=o>)</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>type</span><span class=o>.</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;library&#39;</span><span class=o>)</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>type</span><span class=o>.</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;autotests&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=kt>def</span><span class=w> </span><span class=n>jobExists</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span>
<span class=w>        </span><span class=k>if</span><span class=o>(</span><span class=s2>&quot;${formattedBranch}-Build-${codebaseName}&quot;</span><span class=o>.</span><span class=na>toString</span><span class=o>()</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>Jenkins</span><span class=o>.</span><span class=na>instance</span><span class=o>.</span><span class=na>getAllItems</span><span class=o>().</span><span class=na>collect</span><span class=o>{</span><span class=n>it</span><span class=o>.</span><span class=na>name</span><span class=o>})</span>
<span class=w>            </span><span class=n>jobExists</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
<span class=w>        </span><span class=n>createBuildPipeline</span><span class=o>(</span><span class=s2>&quot;Build-${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>stages</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>buildKey</span><span class=o>,</span><span class=w> </span><span class=n>defaultStages</span><span class=o>),</span><span class=w> </span><span class=s2>&quot;Build&quot;</span><span class=o>,</span>
<span class=w>                </span><span class=n>repositoryPath</span><span class=o>,</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=o>,</span><span class=w> </span><span class=n>branch</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>,</span><span class=w> </span><span class=n>githubRepository</span><span class=o>)</span>
<span class=w>        </span><span class=n>registerWebHook</span><span class=o>(</span><span class=n>repositoryPath</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;build&#39;</span><span class=o>)</span>

<span class=w>        </span><span class=k>if</span><span class=o>(!</span><span class=n>jobExists</span><span class=o>)</span>
<span class=w>          </span><span class=n>queue</span><span class=o>(</span><span class=s2>&quot;${codebaseName}/${formattedBranch}-Build-${codebaseName}&quot;</span><span class=o>)</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>getStageKeyName</span><span class=o>(</span><span class=n>buildTool</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>().</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;terraform&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;Code-review-library-terraform&quot;</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>().</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;opa&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;Code-review-library-opa&quot;</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>().</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;codenarc&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;Code-review-library-codenarc&quot;</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>().</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;kaniko&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;Code-review-library-kaniko&quot;</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>buildToolsOutOfTheBox</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=s2>&quot;maven&quot;</span><span class=o>,</span><span class=s2>&quot;npm&quot;</span><span class=o>,</span><span class=s2>&quot;gradle&quot;</span><span class=o>,</span><span class=s2>&quot;dotnet&quot;</span><span class=o>,</span><span class=s2>&quot;none&quot;</span><span class=o>,</span><span class=s2>&quot;go&quot;</span><span class=o>,</span><span class=s2>&quot;python&quot;</span><span class=o>]</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>supBuildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>buildToolsOutOfTheBox</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>())</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>supBuildTool</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s2>&quot;Code-review-${TYPE}&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Code-review-default&quot;</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>createCodeReviewPipeline</span><span class=o>(</span><span class=n>pipelineName</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>codebaseStages</span><span class=o>,</span><span class=w> </span><span class=n>pipelineType</span><span class=o>,</span><span class=w> </span><span class=n>repository</span><span class=o>,</span><span class=w> </span><span class=n>credId</span><span class=o>,</span><span class=w> </span><span class=n>defaultBranch</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>,</span><span class=w> </span><span class=n>githubRepository</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>pipelineJob</span><span class=o>(</span><span class=s2>&quot;${codebaseName}/${defaultBranch.toUpperCase().replaceAll(/\\//, &quot;</span><span class=o>-</span><span class=s2>&quot;)}-${pipelineName}&quot;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>logRotator</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>numToKeep</span><span class=o>(</span><span class=mi>10</span><span class=o>)</span>
<span class=w>            </span><span class=n>daysToKeep</span><span class=o>(</span><span class=mi>7</span><span class=o>)</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>definition</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>cps</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>script</span><span class=o>(</span><span class=s2>&quot;@Library([&#39;edp-library-stages&#39;, &#39;edp-library-pipelines&#39;]) _ \n\n${pipelineType}()&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>sandbox</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>            </span><span class=n>parameters</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GIT_SERVER_CR_NAME&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitServerCrName}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Name of Git Server CR to generate link to Git server&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GIT_SERVER_CR_VERSION&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitServerCrVersion}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Version of GitServer CR Resource&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;STAGES&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${codebaseStages}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Consequence of stages in JSON format to be run during execution&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GERRIT_PROJECT_NAME&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Gerrit project name(Codebase name) to be build&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>pipelineName</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s2>&quot;Build&quot;</span><span class=o>))</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;BRANCH&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${defaultBranch}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Branch to build artifact from&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=k>else</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;BRANCH&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;\${ghprbActualCommit}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Branch to build artifact from&quot;</span><span class=o>)</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>triggers</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>githubPullRequest</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>cron</span><span class=o>(</span><span class=s1>&#39;&#39;</span><span class=o>)</span>
<span class=w>                </span><span class=n>onlyTriggerPhrase</span><span class=o>(</span><span class=kc>false</span><span class=o>)</span>
<span class=w>                </span><span class=n>useGitHubHooks</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
<span class=w>                </span><span class=n>permitAll</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
<span class=w>                </span><span class=n>autoCloseFailedPullRequests</span><span class=o>(</span><span class=kc>false</span><span class=o>)</span>
<span class=w>                </span><span class=n>displayBuildErrorsOnDownstreamBuilds</span><span class=o>(</span><span class=kc>false</span><span class=o>)</span>
<span class=w>                </span><span class=n>whiteListTargetBranches</span><span class=o>([</span><span class=n>defaultBranch</span><span class=o>.</span><span class=na>toString</span><span class=o>()])</span>
<span class=w>                </span><span class=n>extensions</span><span class=w> </span><span class=o>{</span>
<span class=w>                    </span><span class=n>commitStatus</span><span class=w> </span><span class=o>{</span>
<span class=w>                        </span><span class=n>context</span><span class=o>(</span><span class=s1>&#39;Jenkins Code-Review&#39;</span><span class=o>)</span>
<span class=w>                        </span><span class=n>triggeredStatus</span><span class=o>(</span><span class=s1>&#39;Build is Triggered&#39;</span><span class=o>)</span>
<span class=w>                        </span><span class=n>startedStatus</span><span class=o>(</span><span class=s1>&#39;Build is Started&#39;</span><span class=o>)</span>
<span class=w>                        </span><span class=n>addTestResults</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
<span class=w>                        </span><span class=n>completedStatus</span><span class=o>(</span><span class=s1>&#39;SUCCESS&#39;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;Verified&#39;</span><span class=o>)</span>
<span class=w>                        </span><span class=n>completedStatus</span><span class=o>(</span><span class=s1>&#39;FAILURE&#39;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;Failed&#39;</span><span class=o>)</span>
<span class=w>                        </span><span class=n>completedStatus</span><span class=o>(</span><span class=s1>&#39;PENDING&#39;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;Penging&#39;</span><span class=o>)</span>
<span class=w>                        </span><span class=n>completedStatus</span><span class=o>(</span><span class=s1>&#39;ERROR&#39;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;Error&#39;</span><span class=o>)</span>
<span class=w>                    </span><span class=o>}</span>
<span class=w>                </span><span class=o>}</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>properties</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>githubProjectProperty</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>projectUrlStr</span><span class=o>(</span><span class=s2>&quot;${githubRepository}&quot;</span><span class=o>)</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>createBuildPipeline</span><span class=o>(</span><span class=n>pipelineName</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>codebaseStages</span><span class=o>,</span><span class=w> </span><span class=n>pipelineType</span><span class=o>,</span><span class=w> </span><span class=n>repository</span><span class=o>,</span><span class=w> </span><span class=n>credId</span><span class=o>,</span><span class=w> </span><span class=n>defaultBranch</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>,</span><span class=w> </span><span class=n>githubRepository</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>pipelineJob</span><span class=o>(</span><span class=s2>&quot;${codebaseName}/${defaultBranch.toUpperCase().replaceAll(/\\//, &quot;</span><span class=o>-</span><span class=s2>&quot;)}-${pipelineName}&quot;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>logRotator</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>numToKeep</span><span class=o>(</span><span class=mi>10</span><span class=o>)</span>
<span class=w>            </span><span class=n>daysToKeep</span><span class=o>(</span><span class=mi>7</span><span class=o>)</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>definition</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>cps</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>script</span><span class=o>(</span><span class=s2>&quot;@Library([&#39;edp-library-stages&#39;, &#39;edp-library-pipelines&#39;]) _ \n\nnode {\n    git credentialsId: \&#39;${credId}\&#39;, url: \&#39;${repository}\&#39;, branch: \&#39;${BRANCH}\&#39;\n}\n\n${pipelineType}()&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>sandbox</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>            </span><span class=n>parameters</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GIT_SERVER_CR_NAME&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitServerCrName}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Name of Git Server CR to generate link to Git server&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GIT_SERVER_CR_VERSION&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitServerCrVersion}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Version of GitServer CR Resource&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;STAGES&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${codebaseStages}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Consequence of stages in JSON format to be run during execution&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GERRIT_PROJECT_NAME&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Gerrit project name(Codebase name) to be build&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;BRANCH&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${defaultBranch}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Branch to run from&quot;</span><span class=o>)</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>triggers</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>gitHubPushTrigger</span><span class=o>()</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>properties</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>githubProjectProperty</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>projectUrlStr</span><span class=o>(</span><span class=s2>&quot;${githubRepository}&quot;</span><span class=o>)</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>


<span class=kt>def</span><span class=w> </span><span class=nf>createListView</span><span class=o>(</span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>branchName</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>listView</span><span class=o>(</span><span class=s2>&quot;${codebaseName}/${branchName}&quot;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>branchName</span><span class=o>.</span><span class=na>toLowerCase</span><span class=o>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s2>&quot;releases&quot;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>jobFilters</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>regex</span><span class=w> </span><span class=o>{</span>
<span class=w>                    </span><span class=n>matchType</span><span class=o>(</span><span class=n>MatchType</span><span class=o>.</span><span class=na>INCLUDE_MATCHED</span><span class=o>)</span>
<span class=w>                    </span><span class=n>matchValue</span><span class=o>(</span><span class=n>RegexMatchValue</span><span class=o>.</span><span class=na>NAME</span><span class=o>)</span>
<span class=w>                    </span><span class=n>regex</span><span class=o>(</span><span class=s2>&quot;^Create-release.*&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=o>}</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>jobFilters</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>regex</span><span class=w> </span><span class=o>{</span>
<span class=w>                    </span><span class=n>matchType</span><span class=o>(</span><span class=n>MatchType</span><span class=o>.</span><span class=na>INCLUDE_MATCHED</span><span class=o>)</span>
<span class=w>                    </span><span class=n>matchValue</span><span class=o>(</span><span class=n>RegexMatchValue</span><span class=o>.</span><span class=na>NAME</span><span class=o>)</span>
<span class=w>                    </span><span class=n>regex</span><span class=o>(</span><span class=s2>&quot;^${branchName}-(Code-review|Build).*&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=o>}</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>columns</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>status</span><span class=o>()</span>
<span class=w>            </span><span class=n>weather</span><span class=o>()</span>
<span class=w>            </span><span class=n>name</span><span class=o>()</span>
<span class=w>            </span><span class=n>lastSuccess</span><span class=o>()</span>
<span class=w>            </span><span class=n>lastFailure</span><span class=o>()</span>
<span class=w>            </span><span class=n>lastDuration</span><span class=o>()</span>
<span class=w>            </span><span class=n>buildButton</span><span class=o>()</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>createReleasePipeline</span><span class=o>(</span><span class=n>pipelineName</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>codebaseStages</span><span class=o>,</span><span class=w> </span><span class=n>pipelineType</span><span class=o>,</span><span class=w> </span><span class=n>repository</span><span class=o>,</span><span class=w> </span><span class=n>credId</span><span class=o>,</span>
<span class=w> </span><span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>,</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=o>,</span><span class=w> </span><span class=n>platformType</span><span class=o>,</span><span class=w> </span><span class=n>defaultBranch</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>pipelineJob</span><span class=o>(</span><span class=s2>&quot;${codebaseName}/${pipelineName}&quot;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>logRotator</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>numToKeep</span><span class=o>(</span><span class=mi>14</span><span class=o>)</span>
<span class=w>            </span><span class=n>daysToKeep</span><span class=o>(</span><span class=mi>30</span><span class=o>)</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>definition</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>cps</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>script</span><span class=o>(</span><span class=s2>&quot;@Library([&#39;edp-library-stages&#39;, &#39;edp-library-pipelines&#39;]) _ \n\n${pipelineType}()&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>sandbox</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>            </span><span class=n>parameters</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;STAGES&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${codebaseStages}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>pipelineName</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s2>&quot;Create-release&quot;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;JIRA_INTEGRATION_ENABLED&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${jiraIntegrationEnabled}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Is Jira integration enabled&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;PLATFORM_TYPE&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${platformType}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Platform type&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GERRIT_PROJECT&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;RELEASE_NAME&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Name of the release(branch to be created)&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;COMMIT_ID&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Commit ID that will be used to create branch from for new release. If empty, DEFAULT_BRANCH will be used&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GIT_SERVER_CR_NAME&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitServerCrName}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Name of Git Server CR to generate link to Git server&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GIT_SERVER_CR_VERSION&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitServerCrVersion}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Version of GitServer CR Resource&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;REPOSITORY_PATH&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${repository}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Full repository path&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;DEFAULT_BRANCH&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${defaultBranch}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Default repository branch&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=o>}</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>registerWebHook</span><span class=o>(</span><span class=n>repositoryPath</span><span class=o>,</span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;code-review&#39;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>url</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>repositoryPath</span><span class=o>.</span><span class=na>split</span><span class=o>(</span><span class=s1>&#39;@&#39;</span><span class=o>)[</span><span class=mi>1</span><span class=o>].</span><span class=na>split</span><span class=o>(</span><span class=s1>&#39;/&#39;</span><span class=o>)[</span><span class=mi>0</span><span class=o>]</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>owner</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>repositoryPath</span><span class=o>.</span><span class=na>split</span><span class=o>(</span><span class=s1>&#39;@&#39;</span><span class=o>)[</span><span class=mi>1</span><span class=o>].</span><span class=na>split</span><span class=o>(</span><span class=s1>&#39;/&#39;</span><span class=o>)[</span><span class=mi>1</span><span class=o>]</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>repo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>repositoryPath</span><span class=o>.</span><span class=na>split</span><span class=o>(</span><span class=s1>&#39;@&#39;</span><span class=o>)[</span><span class=mi>1</span><span class=o>].</span><span class=na>split</span><span class=o>(</span><span class=s1>&#39;/&#39;</span><span class=o>)[</span><span class=mi>2</span><span class=o>]</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>apiUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;https://api.&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>url</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;/repos/&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>owner</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;/&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>repo</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;/hooks&#39;</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>webhookUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;&#39;</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>webhookConfig</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[:]</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>config</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[:]</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>events</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[]</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>type</span><span class=o>.</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;build&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>webhookUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>System</span><span class=o>.</span><span class=na>getenv</span><span class=o>(</span><span class=s1>&#39;JENKINS_UI_URL&#39;</span><span class=o>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;/github-webhook/&quot;</span>
<span class=w>        </span><span class=n>events</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=s2>&quot;push&quot;</span><span class=o>]</span>
<span class=w>        </span><span class=n>config</span><span class=o>[</span><span class=s2>&quot;url&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>webhookUrl</span>
<span class=w>        </span><span class=n>config</span><span class=o>[</span><span class=s2>&quot;content_type&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;json&quot;</span>
<span class=w>        </span><span class=n>config</span><span class=o>[</span><span class=s2>&quot;insecure_ssl&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span>
<span class=w>        </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;name&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;web&quot;</span>
<span class=w>        </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;config&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>config</span>
<span class=w>        </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;events&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>events</span>
<span class=w>        </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;active&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>

<span class=w>    </span><span class=o>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>webhookUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>System</span><span class=o>.</span><span class=na>getenv</span><span class=o>(</span><span class=s1>&#39;JENKINS_UI_URL&#39;</span><span class=o>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;/ghprbhook/&quot;</span>
<span class=w>        </span><span class=n>events</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=s2>&quot;issue_comment&quot;</span><span class=o>,</span><span class=s2>&quot;pull_request&quot;</span><span class=o>]</span>
<span class=w>        </span><span class=n>config</span><span class=o>[</span><span class=s2>&quot;url&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>webhookUrl</span>
<span class=w>        </span><span class=n>config</span><span class=o>[</span><span class=s2>&quot;content_type&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;form&quot;</span>
<span class=w>        </span><span class=n>config</span><span class=o>[</span><span class=s2>&quot;insecure_ssl&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span>
<span class=w>        </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;name&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;web&quot;</span>
<span class=w>        </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;config&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>config</span>
<span class=w>        </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;events&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>events</span>
<span class=w>        </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;active&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
<span class=w>    </span><span class=o>}</span>

<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>requestBody</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>JsonOutput</span><span class=o>.</span><span class=na>toJson</span><span class=o>(</span><span class=n>webhookConfig</span><span class=o>)</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>http</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>URL</span><span class=o>(</span><span class=n>apiUrl</span><span class=o>).</span><span class=na>openConnection</span><span class=o>()</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>HttpURLConnection</span>
<span class=w>    </span><span class=n>http</span><span class=o>.</span><span class=na>setRequestMethod</span><span class=o>(</span><span class=s1>&#39;POST&#39;</span><span class=o>)</span>
<span class=w>    </span><span class=n>http</span><span class=o>.</span><span class=na>setDoOutput</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
<span class=w>    </span><span class=n>println</span><span class=o>(</span><span class=n>apiUrl</span><span class=o>)</span>
<span class=w>    </span><span class=n>http</span><span class=o>.</span><span class=na>setRequestProperty</span><span class=o>(</span><span class=s2>&quot;Accept&quot;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;application/json&#39;</span><span class=o>)</span>
<span class=w>    </span><span class=n>http</span><span class=o>.</span><span class=na>setRequestProperty</span><span class=o>(</span><span class=s2>&quot;Content-Type&quot;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;application/json&#39;</span><span class=o>)</span>
<span class=w>    </span><span class=n>http</span><span class=o>.</span><span class=na>setRequestProperty</span><span class=o>(</span><span class=s2>&quot;Authorization&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;token ${getSecretValue(&#39;github-access-token&#39;)}&quot;</span><span class=o>)</span>
<span class=w>    </span><span class=n>http</span><span class=o>.</span><span class=na>outputStream</span><span class=o>.</span><span class=na>write</span><span class=o>(</span><span class=n>requestBody</span><span class=o>.</span><span class=na>getBytes</span><span class=o>(</span><span class=s2>&quot;UTF-8&quot;</span><span class=o>))</span>
<span class=w>    </span><span class=n>http</span><span class=o>.</span><span class=na>connect</span><span class=o>()</span>
<span class=w>    </span><span class=n>println</span><span class=o>(</span><span class=n>http</span><span class=o>.</span><span class=na>responseCode</span><span class=o>)</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>http</span><span class=o>.</span><span class=na>responseCode</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>201</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>response</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>JsonSlurper</span><span class=o>().</span><span class=na>parseText</span><span class=o>(</span><span class=n>http</span><span class=o>.</span><span class=na>inputStream</span><span class=o>.</span><span class=na>getText</span><span class=o>(</span><span class=s1>&#39;UTF-8&#39;</span><span class=o>))</span>
<span class=w>    </span><span class=o>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>response</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>JsonSlurper</span><span class=o>().</span><span class=na>parseText</span><span class=o>(</span><span class=n>http</span><span class=o>.</span><span class=na>errorStream</span><span class=o>.</span><span class=na>getText</span><span class=o>(</span><span class=s1>&#39;UTF-8&#39;</span><span class=o>))</span>
<span class=w>    </span><span class=o>}</span>

<span class=w>    </span><span class=n>println</span><span class=w> </span><span class=s2>&quot;response: ${response}&quot;</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>getSecretValue</span><span class=o>(</span><span class=n>name</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>creds</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>com</span><span class=o>.</span><span class=na>cloudbees</span><span class=o>.</span><span class=na>plugins</span><span class=o>.</span><span class=na>credentials</span><span class=o>.</span><span class=na>CredentialsProvider</span><span class=o>.</span><span class=na>lookupCredentials</span><span class=o>(</span>
<span class=w>            </span><span class=n>com</span><span class=o>.</span><span class=na>cloudbees</span><span class=o>.</span><span class=na>plugins</span><span class=o>.</span><span class=na>credentials</span><span class=o>.</span><span class=na>common</span><span class=o>.</span><span class=na>StandardCredentials</span><span class=o>.</span><span class=na>class</span><span class=o>,</span>
<span class=w>            </span><span class=n>Jenkins</span><span class=o>.</span><span class=na>instance</span><span class=o>,</span>
<span class=w>            </span><span class=kc>null</span><span class=o>,</span>
<span class=w>            </span><span class=kc>null</span>
<span class=w>    </span><span class=o>)</span>

<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>secret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>creds</span><span class=o>.</span><span class=na>find</span><span class=w> </span><span class=o>{</span><span class=w> </span><span class=n>it</span><span class=o>.</span><span class=na>properties</span><span class=o>[</span><span class=s1>&#39;id&#39;</span><span class=o>]</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>secret</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>secret</span><span class=o>[</span><span class=s1>&#39;secret&#39;</span><span class=o>]</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kc>null</span>
<span class=o>}</span>
</code></pre></div> </details> <p>After the steps above are performed, the new custom job-provision will be available in <strong>Advanced Settings</strong> during the application creation in the EDP Portal UI:</p> <p> <figure><a data-caption="Github job provision" data-fancybox=gallery href=../../assets/operator-guide/github-job-provision.png><img alt="Github job provision" src=../../assets/operator-guide/github-job-provision.png title="Github job provision" width=600px></a><figcaption>Github job provision</figcaption> </figure> </p> </li> </ol> <h2 id=gitlab-gitlab>GitLab (gitlab)<a class=headerlink href=#gitlab-gitlab title="Permanent link">âš“ï¸Ž</a></h2> <p>To create a new job provision for work with GitLab, take the following steps:</p> <ol> <li> <p>Navigate to the Jenkins main page and open the <em>job-provisions/ci</em> folder.</p> </li> <li> <p>Click <em>New Item</em> and type the name of job-provisions - <strong>gitlab</strong>.</p> </li> <li> <p>Select the <em>Freestyle project</em> option and click OK.</p> </li> <li> <p>Select the <em>Discard old builds</em> check box and configure a few parameters:</p> <p>Strategy: Log Rotation</p> <p>Days to keep builds: 10</p> <p>Max # of builds to keep: 10</p> </li> <li> <p>Select the <em>This project is parameterized</em> check box and add a few input parameters as the following strings (the type of the variables is string):</p> <ul> <li>NAME;</li> </ul> <ul> <li>TYPE;</li> </ul> <ul> <li>BUILD_TOOL;</li> </ul> <ul> <li>BRANCH;</li> </ul> <ul> <li>GIT_SERVER_CR_NAME;</li> </ul> <ul> <li>GIT_SERVER_CR_VERSION;</li> </ul> <ul> <li>GIT_SERVER;</li> </ul> <ul> <li>GIT_SSH_PORT;</li> </ul> <ul> <li>GIT_USERNAME;</li> </ul> <ul> <li>GIT_CREDENTIALS_ID;</li> </ul> <ul> <li>REPOSITORY_PATH;</li> </ul> <ul> <li>JIRA_INTEGRATION_ENABLED;</li> </ul> <ul> <li>PLATFORM_TYPE;</li> </ul> <ul> <li>DEFAULT_BRANCH;</li> </ul> </li> <li> <p>Check the <em>Execute concurrent builds if necessary</em> option.</p> </li> <li> <p>Check the <em>Restrict where this project can be run</em> option.</p> </li> <li> <p>Fill in the <em>Label Expression</em> field by typing <em>master</em> to ensure job runs on Jenkins Master.</p> </li> <li> <p>In the <strong>Build Steps</strong> section, perform the following:</p> <ul> <li>Select <strong>Add build step</strong>;</li> </ul> <ul> <li>Choose <strong>Process Job DSLs</strong>; </li> </ul> <ul> <li>Select the <strong>Use the provided DSL script</strong> check box:</li> </ul> <p> <figure><a data-caption="DSL script check box" data-fancybox=gallery href=../../assets/operator-guide/dsl_script.png><img alt="DSL script check box" src=../../assets/operator-guide/dsl_script.png title="DSL script check box" width=600px></a><figcaption>DSL script check box</figcaption> </figure> </p> </li> <li> <p>As soon as all the steps above are performed, insert the code:</p> <details> <summary><b>View: Template</b></summary> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>groovy.json.*</span>
<span class=kn>import</span><span class=w> </span><span class=nn>jenkins.model.Jenkins</span>

<span class=n>Jenkins</span><span class=w> </span><span class=n>jenkins</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Jenkins</span><span class=o>.</span><span class=na>instance</span>
<span class=kt>def</span><span class=w> </span><span class=n>stages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[:]</span>
<span class=kt>def</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Boolean</span><span class=o>.</span><span class=na>parseBoolean</span><span class=o>(</span><span class=s2>&quot;${JIRA_INTEGRATION_ENABLED}&quot;</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>String</span><span class=o>)</span>
<span class=kt>def</span><span class=w> </span><span class=n>commitValidateStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;commit-validate&quot;}&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;&#39;</span>
<span class=kt>def</span><span class=w> </span><span class=n>createJIMStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;create-jira-issue-metadata&quot;}&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;&#39;</span>
<span class=kt>def</span><span class=w> </span><span class=n>platformType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${PLATFORM_TYPE}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>buildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${BUILD_TOOL}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>buildImageStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>platformType</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s2>&quot;kubernetes&quot;</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;build-image-kaniko&quot;},&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;build-image-from-dockerfile&quot;},&#39;</span>
<span class=kt>def</span><span class=w> </span><span class=n>goBuildImageStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>platformType</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s2>&quot;kubernetes&quot;</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;build-image-kaniko&quot;}&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;build-image-from-dockerfile&quot;}&#39;</span>
<span class=kt>def</span><span class=w> </span><span class=n>goBuildStage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s2>&quot;go&quot;</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;compile&quot;}&#39;</span>

<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-application&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>goBuildStage</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;tests&quot;},[{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;dockerfile-lint&quot;},{&quot;name&quot;: &quot;helm-lint&quot;}]]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;compile&quot;},{&quot;name&quot;: &quot;tests&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;sonar&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-autotests&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-default&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library-terraform&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;terraform-lint&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library-opa&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;tests&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library-codenarc&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Code-review-library-kaniko&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${commitValidateStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;dockerfile-lint&quot;},{&quot;name&quot;: &quot;dockerbuild-verify&quot;}]&#39;</span>

<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-maven&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;},{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-npm&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-maven&#39;</span><span class=o>]</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-gradle&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-maven&#39;</span><span class=o>]</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-dotnet&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-python&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-terraform&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;terraform-lint&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;terraform-plan&quot;},{&quot;name&quot;: &quot;terraform-apply&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-opa&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;,{&quot;name&quot;: &quot;tests&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-codenarc&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-library-kaniko&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;dockerfile-lint&quot;},{&quot;name&quot;: &quot;build-image-kaniko&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>

<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-autotests-maven&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-autotests-gradle&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>

<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-maven&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;sast&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${buildImageStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-python&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;}&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s2>&quot;${buildImageStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;{&quot;name&quot;:&quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-npm&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${buildImageStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-gradle&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-maven&#39;</span><span class=o>]</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-dotnet&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;compile&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${buildImageStage}&quot;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;push&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-terraform&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;tool-init&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=s1>&#39;{&quot;name&quot;: &quot;lint&quot;},{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-helm&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;lint&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-docker&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;lint&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Build-application-go&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;get-version&quot;},{&quot;name&quot;: &quot;sast&quot;},{&quot;name&quot;: &quot;tests&quot;},{&quot;name&quot;: &quot;sonar&quot;},&#39;</span><span class=w> </span><span class=o>+</span>
<span class=w>                                </span><span class=s1>&#39;{&quot;name&quot;: &quot;build&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${goBuildImageStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;,{&quot;name&quot;: &quot;git-tag&quot;}]&#39;</span>
<span class=n>stages</span><span class=o>[</span><span class=s1>&#39;Create-release&#39;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;},{&quot;name&quot;: &quot;create-branch&quot;},{&quot;name&quot;: &quot;trigger-job&quot;}]&#39;</span>

<span class=kt>def</span><span class=w> </span><span class=n>defaultStages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;[{&quot;name&quot;: &quot;checkout&quot;}&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&quot;${createJIMStage}&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;]&#39;</span>


<span class=kt>def</span><span class=w> </span><span class=n>codebaseName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${NAME}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>gitServerCrName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${GIT_SERVER_CR_NAME}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${GIT_SERVER_CR_VERSION}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>gitServer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${GIT_SERVER ? GIT_SERVER : &#39;gerrit&#39;}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>gitSshPort</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${GIT_SSH_PORT ? GIT_SSH_PORT : &#39;29418&#39;}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>gitUsername</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${GIT_USERNAME ? GIT_USERNAME : &#39;jenkins&#39;}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${GIT_CREDENTIALS_ID ? GIT_CREDENTIALS_ID : &#39;gerrit-ciuser-sshkey&#39;}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>defaultRepoPath</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;ssh://${gitUsername}@${gitServer}:${gitSshPort}/${codebaseName}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>repositoryPath</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${REPOSITORY_PATH ? REPOSITORY_PATH : defaultRepoPath}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>defaultBranch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${DEFAULT_BRANCH}&quot;</span>

<span class=kt>def</span><span class=w> </span><span class=n>codebaseFolder</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jenkins</span><span class=o>.</span><span class=na>getItem</span><span class=o>(</span><span class=n>codebaseName</span><span class=o>)</span>
<span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>codebaseFolder</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>folder</span><span class=o>(</span><span class=n>codebaseName</span><span class=o>)</span>
<span class=o>}</span>

<span class=n>createListView</span><span class=o>(</span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Releases&quot;</span><span class=o>)</span>
<span class=n>createReleasePipeline</span><span class=o>(</span><span class=s2>&quot;Create-release-${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>stages</span><span class=o>[</span><span class=s2>&quot;Create-release&quot;</span><span class=o>],</span><span class=w> </span><span class=s2>&quot;CreateRelease&quot;</span><span class=o>,</span>
<span class=w>        </span><span class=n>repositoryPath</span><span class=o>,</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>,</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=o>,</span><span class=w> </span><span class=n>platformType</span><span class=o>,</span><span class=w> </span><span class=n>defaultBranch</span><span class=o>)</span>

<span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>BRANCH</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>branch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${BRANCH}&quot;</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>formattedBranch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${branch.toUpperCase().replaceAll(/\\//, &quot;</span><span class=o>-</span><span class=s2>&quot;)}&quot;</span>
<span class=w>    </span><span class=n>createListView</span><span class=o>(</span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>formattedBranch</span><span class=o>)</span>

<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${TYPE}&quot;</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>crKey</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getStageKeyName</span><span class=o>(</span><span class=n>buildTool</span><span class=o>).</span><span class=na>toString</span><span class=o>()</span>
<span class=w>    </span><span class=n>createCiPipeline</span><span class=o>(</span><span class=s2>&quot;Code-review-${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>stages</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>crKey</span><span class=o>,</span><span class=w> </span><span class=n>defaultStages</span><span class=o>),</span><span class=w> </span><span class=s2>&quot;CodeReview&quot;</span><span class=o>,</span>
<span class=w>        </span><span class=n>repositoryPath</span><span class=o>,</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=o>,</span><span class=w> </span><span class=n>branch</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>)</span>

<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>buildKey</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;Build-${type}-${buildTool.toLowerCase()}&quot;</span><span class=o>.</span><span class=na>toString</span><span class=o>()</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>type</span><span class=o>.</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;application&#39;</span><span class=o>)</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>type</span><span class=o>.</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;library&#39;</span><span class=o>)</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>type</span><span class=o>.</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;autotests&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=kt>def</span><span class=w> </span><span class=n>jobExists</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span>
<span class=w>        </span><span class=k>if</span><span class=o>(</span><span class=s2>&quot;${formattedBranch}-Build-${codebaseName}&quot;</span><span class=o>.</span><span class=na>toString</span><span class=o>()</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>Jenkins</span><span class=o>.</span><span class=na>instance</span><span class=o>.</span><span class=na>getAllItems</span><span class=o>().</span><span class=na>collect</span><span class=o>{</span><span class=n>it</span><span class=o>.</span><span class=na>name</span><span class=o>})</span><span class=w> </span><span class=o>{</span>
<span class=w>           </span><span class=n>jobExists</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>createCiPipeline</span><span class=o>(</span><span class=s2>&quot;Build-${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>stages</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>buildKey</span><span class=o>,</span><span class=w> </span><span class=n>defaultStages</span><span class=o>),</span><span class=w> </span><span class=s2>&quot;Build&quot;</span><span class=o>,</span>
<span class=w>                </span><span class=n>repositoryPath</span><span class=o>,</span><span class=w> </span><span class=n>gitCredentialsId</span><span class=o>,</span><span class=w> </span><span class=n>branch</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>)</span>
<span class=w>       </span><span class=k>if</span><span class=o>(!</span><span class=n>jobExists</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>         </span><span class=n>queue</span><span class=o>(</span><span class=s2>&quot;${codebaseName}/${formattedBranch}-Build-${codebaseName}&quot;</span><span class=o>)</span>
<span class=w>       </span><span class=o>}</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>


<span class=kt>def</span><span class=w> </span><span class=nf>createCiPipeline</span><span class=o>(</span><span class=n>pipelineName</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>codebaseStages</span><span class=o>,</span><span class=w> </span><span class=n>pipelineType</span><span class=o>,</span><span class=w> </span><span class=n>repository</span><span class=o>,</span><span class=w> </span><span class=n>credId</span><span class=o>,</span><span class=w> </span><span class=n>defaultBranch</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=kt>def</span><span class=w> </span><span class=n>jobName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${defaultBranch.toUpperCase().replaceAll(/\\//, &quot;</span><span class=o>-</span><span class=s2>&quot;)}-${pipelineName}&quot;</span>
<span class=kt>def</span><span class=w> </span><span class=n>existingJob</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Jenkins</span><span class=o>.</span><span class=na>getInstance</span><span class=o>().</span><span class=na>getItemByFullName</span><span class=o>(</span><span class=s2>&quot;${codebaseName}/${jobName}&quot;</span><span class=o>)</span>
<span class=kt>def</span><span class=w> </span><span class=n>webhookToken</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span>
<span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>existingJob</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>triggersMap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>existingJob</span><span class=o>.</span><span class=na>getTriggers</span><span class=o>()</span>
<span class=w>    </span><span class=n>triggersMap</span><span class=o>.</span><span class=na>each</span><span class=w> </span><span class=o>{</span><span class=w> </span><span class=n>key</span><span class=o>,</span><span class=w> </span><span class=n>value</span><span class=w> </span><span class=o>-&gt;</span>
<span class=w>        </span><span class=n>webhookToken</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>value</span><span class=o>.</span><span class=na>getSecretToken</span><span class=o>()</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>random</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=kt>byte</span><span class=o>[</span><span class=mi>16</span><span class=o>]</span>
<span class=w>    </span><span class=k>new</span><span class=w> </span><span class=n>java</span><span class=o>.</span><span class=na>security</span><span class=o>.</span><span class=na>SecureRandom</span><span class=o>().</span><span class=na>nextBytes</span><span class=o>(</span><span class=n>random</span><span class=o>)</span>
<span class=w>    </span><span class=n>webhookToken</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>random</span><span class=o>.</span><span class=na>encodeHex</span><span class=o>().</span><span class=na>toString</span><span class=o>()</span>
<span class=o>}</span>
<span class=n>pipelineJob</span><span class=o>(</span><span class=s2>&quot;${codebaseName}/${jobName}&quot;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>logRotator</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>numToKeep</span><span class=o>(</span><span class=mi>10</span><span class=o>)</span>
<span class=w>        </span><span class=n>daysToKeep</span><span class=o>(</span><span class=mi>7</span><span class=o>)</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=n>properties</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>gitLabConnection</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>gitLabConnection</span><span class=o>(</span><span class=s1>&#39;gitlab&#39;</span><span class=o>)</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=n>definition</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>cps</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>script</span><span class=o>(</span><span class=s2>&quot;@Library([&#39;edp-library-stages&#39;, &#39;edp-library-pipelines&#39;]) _ \n\n${pipelineType}()&quot;</span><span class=o>)</span>
<span class=w>            </span><span class=n>sandbox</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>parameters</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GIT_SERVER_CR_NAME&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitServerCrName}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Name of Git Server CR to generate link to Git server&quot;</span><span class=o>)</span>
<span class=w>            </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GIT_SERVER_CR_VERSION&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitServerCrVersion}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Version of GitServer CR Resource&quot;</span><span class=o>)</span>
<span class=w>            </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;STAGES&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${codebaseStages}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Consequence of stages in JSON format to be run during execution&quot;</span><span class=o>)</span>
<span class=w>            </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GERRIT_PROJECT_NAME&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Gerrit project name(Codebase name) to be build&quot;</span><span class=o>)</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>pipelineName</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s2>&quot;Build&quot;</span><span class=o>))</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;BRANCH&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${defaultBranch}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Branch to build artifact from&quot;</span><span class=o>)</span>
<span class=w>            </span><span class=k>else</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;BRANCH&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;\${gitlabMergeRequestLastCommit}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Branch to build artifact from&quot;</span><span class=o>)</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=n>triggers</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>gitlabPush</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>buildOnMergeRequestEvents</span><span class=o>(</span><span class=n>pipelineName</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s2>&quot;Build&quot;</span><span class=o>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=o>)</span>
<span class=w>            </span><span class=n>buildOnPushEvents</span><span class=o>(</span><span class=n>pipelineName</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s2>&quot;Build&quot;</span><span class=o>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=o>)</span>
<span class=w>            </span><span class=n>enableCiSkip</span><span class=o>(</span><span class=kc>false</span><span class=o>)</span>
<span class=w>            </span><span class=n>setBuildDescription</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
<span class=w>            </span><span class=n>rebuildOpenMergeRequest</span><span class=o>(</span><span class=n>pipelineName</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s2>&quot;Build&quot;</span><span class=o>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;never&#39;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;source&#39;</span><span class=o>)</span>
<span class=w>            </span><span class=n>commentTrigger</span><span class=o>(</span><span class=s2>&quot;Build it please&quot;</span><span class=o>)</span>
<span class=w>            </span><span class=n>skipWorkInProgressMergeRequest</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
<span class=w>            </span><span class=n>targetBranchRegex</span><span class=o>(</span><span class=s2>&quot;${defaultBranch}&quot;</span><span class=o>)</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=n>configure</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>it</span><span class=w> </span><span class=s>/ triggers /</span><span class=w> </span><span class=s1>&#39;com.dabsquared.gitlabjenkins.GitLabPushTrigger&#39;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>secretToken</span><span class=o>(</span><span class=n>webhookToken</span><span class=o>)</span>
<span class=w>        </span><span class=n>it</span><span class=w> </span><span class=s>/ triggers /</span><span class=w> </span><span class=s1>&#39;com.dabsquared.gitlabjenkins.GitLabPushTrigger&#39;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>triggerOnApprovedMergeRequest</span><span class=o>(</span><span class=n>pipelineName</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s2>&quot;Build&quot;</span><span class=o>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=o>)</span>
<span class=w>        </span><span class=n>it</span><span class=w> </span><span class=s>/ triggers /</span><span class=w> </span><span class=s1>&#39;com.dabsquared.gitlabjenkins.GitLabPushTrigger&#39;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>pendingBuildName</span><span class=o>(</span><span class=n>pipelineName</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s2>&quot;Build&quot;</span><span class=o>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Jenkins&quot;</span><span class=o>)</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>
<span class=n>registerWebHook</span><span class=o>(</span><span class=n>repository</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>jobName</span><span class=o>,</span><span class=w> </span><span class=n>webhookToken</span><span class=o>)</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>getStageKeyName</span><span class=o>(</span><span class=n>buildTool</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>().</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;terraform&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;Code-review-library-terraform&quot;</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>().</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;opa&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;Code-review-library-opa&quot;</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>().</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;codenarc&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;Code-review-library-codenarc&quot;</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>().</span><span class=na>equalsIgnoreCase</span><span class=o>(</span><span class=s1>&#39;kaniko&#39;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s2>&quot;Code-review-library-kaniko&quot;</span>
<span class=w>    </span><span class=o>}</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>buildToolsOutOfTheBox</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=s2>&quot;maven&quot;</span><span class=o>,</span><span class=s2>&quot;npm&quot;</span><span class=o>,</span><span class=s2>&quot;gradle&quot;</span><span class=o>,</span><span class=s2>&quot;dotnet&quot;</span><span class=o>,</span><span class=s2>&quot;none&quot;</span><span class=o>,</span><span class=s2>&quot;go&quot;</span><span class=o>,</span><span class=s2>&quot;python&quot;</span><span class=o>]</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>supBuildTool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>buildToolsOutOfTheBox</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=n>buildTool</span><span class=o>.</span><span class=na>toString</span><span class=o>())</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>supBuildTool</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s2>&quot;Code-review-${TYPE}&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Code-review-default&quot;</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>createReleasePipeline</span><span class=o>(</span><span class=n>pipelineName</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>codebaseStages</span><span class=o>,</span><span class=w> </span><span class=n>pipelineType</span><span class=o>,</span><span class=w> </span><span class=n>repository</span><span class=o>,</span><span class=w> </span><span class=n>credId</span><span class=o>,</span>
<span class=n>gitServerCrName</span><span class=o>,</span><span class=w> </span><span class=n>gitServerCrVersion</span><span class=o>,</span><span class=w> </span><span class=n>jiraIntegrationEnabled</span><span class=o>,</span><span class=w> </span><span class=n>platformType</span><span class=o>,</span><span class=w> </span><span class=n>defaultBranch</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>pipelineJob</span><span class=o>(</span><span class=s2>&quot;${codebaseName}/${pipelineName}&quot;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>logRotator</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>numToKeep</span><span class=o>(</span><span class=mi>14</span><span class=o>)</span>
<span class=w>            </span><span class=n>daysToKeep</span><span class=o>(</span><span class=mi>30</span><span class=o>)</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>definition</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>cps</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>script</span><span class=o>(</span><span class=s2>&quot;@Library([&#39;edp-library-stages&#39;, &#39;edp-library-pipelines&#39;]) _ \n\n${pipelineType}()&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=n>sandbox</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>            </span><span class=n>parameters</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;STAGES&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${codebaseStages}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>pipelineName</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s2>&quot;Create-release&quot;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;JIRA_INTEGRATION_ENABLED&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${jiraIntegrationEnabled}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Is Jira integration enabled&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;PLATFORM_TYPE&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${platformType}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Platform type&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GERRIT_PROJECT&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${codebaseName}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;RELEASE_NAME&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Name of the release(branch to be created)&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;COMMIT_ID&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Commit ID that will be used to create branch from for new release. If empty, DEFAULT_BRANCH will be used&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GIT_SERVER_CR_NAME&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitServerCrName}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Name of Git Server CR to generate link to Git server&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;GIT_SERVER_CR_VERSION&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitServerCrVersion}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Version of GitServer CR Resource&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;REPOSITORY_PATH&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${repository}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Full repository path&quot;</span><span class=o>)</span>
<span class=w>                    </span><span class=n>stringParam</span><span class=o>(</span><span class=s2>&quot;DEFAULT_BRANCH&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${defaultBranch}&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;Default repository branch&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=o>}</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>createListView</span><span class=o>(</span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>branchName</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>listView</span><span class=o>(</span><span class=s2>&quot;${codebaseName}/${branchName}&quot;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>branchName</span><span class=o>.</span><span class=na>toLowerCase</span><span class=o>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s2>&quot;releases&quot;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>jobFilters</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>regex</span><span class=w> </span><span class=o>{</span>
<span class=w>                    </span><span class=n>matchType</span><span class=o>(</span><span class=n>MatchType</span><span class=o>.</span><span class=na>INCLUDE_MATCHED</span><span class=o>)</span>
<span class=w>                    </span><span class=n>matchValue</span><span class=o>(</span><span class=n>RegexMatchValue</span><span class=o>.</span><span class=na>NAME</span><span class=o>)</span>
<span class=w>                    </span><span class=n>regex</span><span class=o>(</span><span class=s2>&quot;^Create-release.*&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=o>}</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>jobFilters</span><span class=w> </span><span class=o>{</span>
<span class=w>                </span><span class=n>regex</span><span class=w> </span><span class=o>{</span>
<span class=w>                    </span><span class=n>matchType</span><span class=o>(</span><span class=n>MatchType</span><span class=o>.</span><span class=na>INCLUDE_MATCHED</span><span class=o>)</span>
<span class=w>                    </span><span class=n>matchValue</span><span class=o>(</span><span class=n>RegexMatchValue</span><span class=o>.</span><span class=na>NAME</span><span class=o>)</span>
<span class=w>                    </span><span class=n>regex</span><span class=o>(</span><span class=s2>&quot;^${branchName}-(Code-review|Build).*&quot;</span><span class=o>)</span>
<span class=w>                </span><span class=o>}</span>
<span class=w>            </span><span class=o>}</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>        </span><span class=n>columns</span><span class=w> </span><span class=o>{</span>
<span class=w>            </span><span class=n>status</span><span class=o>()</span>
<span class=w>            </span><span class=n>weather</span><span class=o>()</span>
<span class=w>            </span><span class=n>name</span><span class=o>()</span>
<span class=w>            </span><span class=n>lastSuccess</span><span class=o>()</span>
<span class=w>            </span><span class=n>lastFailure</span><span class=o>()</span>
<span class=w>            </span><span class=n>lastDuration</span><span class=o>()</span>
<span class=w>            </span><span class=n>buildButton</span><span class=o>()</span>
<span class=w>        </span><span class=o>}</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>registerWebHook</span><span class=o>(</span><span class=n>repositoryPath</span><span class=o>,</span><span class=w> </span><span class=n>codebaseName</span><span class=o>,</span><span class=w> </span><span class=n>jobName</span><span class=o>,</span><span class=w> </span><span class=n>webhookToken</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>apiUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;https://&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>repositoryPath</span><span class=o>.</span><span class=na>replaceAll</span><span class=o>(</span><span class=s2>&quot;ssh://&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=o>).</span><span class=na>split</span><span class=o>(</span><span class=s1>&#39;@&#39;</span><span class=o>)[</span><span class=mi>1</span><span class=o>].</span><span class=na>replace</span><span class=o>(</span><span class=s1>&#39;/&#39;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;%2F&quot;</span><span class=o>).</span><span class=na>replaceAll</span><span class=o>(~</span><span class=s>/:\d+%2F/</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;/api/v4/projects/&#39;</span><span class=o>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;/hooks&#39;</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>jobWebhookUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;${System.getenv(&#39;JENKINS_UI_URL&#39;)}/project/${codebaseName}/${jobName}&quot;</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>gitlabToken</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getSecretValue</span><span class=o>(</span><span class=s1>&#39;gitlab-access-token&#39;</span><span class=o>)</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>checkWebHookExist</span><span class=o>(</span><span class=n>apiUrl</span><span class=o>,</span><span class=w> </span><span class=n>jobWebhookUrl</span><span class=o>,</span><span class=w> </span><span class=n>gitlabToken</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>println</span><span class=o>(</span><span class=s2>&quot;[JENKINS][DEBUG] Webhook for job ${jobName} is already exist\r\n&quot;</span><span class=o>)</span>
<span class=w>        </span><span class=k>return</span>
<span class=w>    </span><span class=o>}</span>

<span class=w>    </span><span class=n>println</span><span class=o>(</span><span class=s2>&quot;[JENKINS][DEBUG] Creating webhook for job ${jobName}&quot;</span><span class=o>)</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>webhookConfig</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[:]</span>
<span class=w>    </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;url&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jobWebhookUrl</span>
<span class=w>    </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;push_events&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jobName</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s2>&quot;Build&quot;</span><span class=o>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s2>&quot;true&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s2>&quot;false&quot;</span>
<span class=w>    </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;merge_requests_events&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jobName</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s2>&quot;Build&quot;</span><span class=o>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s2>&quot;false&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s2>&quot;true&quot;</span>
<span class=w>    </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;issues_events&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;false&quot;</span>
<span class=w>    </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;confidential_issues_events&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;false&quot;</span>
<span class=w>    </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;tag_push_events&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;false&quot;</span>
<span class=w>    </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;note_events&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;true&quot;</span>
<span class=w>    </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;job_events&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;false&quot;</span>
<span class=w>    </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;pipeline_events&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;false&quot;</span>
<span class=w>    </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;wiki_page_events&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;false&quot;</span>
<span class=w>    </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;enable_ssl_verification&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;true&quot;</span>
<span class=w>    </span><span class=n>webhookConfig</span><span class=o>[</span><span class=s2>&quot;token&quot;</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>webhookToken</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>requestBody</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>JsonOutput</span><span class=o>.</span><span class=na>toJson</span><span class=o>(</span><span class=n>webhookConfig</span><span class=o>)</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>httpConnector</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>URL</span><span class=o>(</span><span class=n>apiUrl</span><span class=o>).</span><span class=na>openConnection</span><span class=o>()</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>HttpURLConnection</span>
<span class=w>    </span><span class=n>httpConnector</span><span class=o>.</span><span class=na>setRequestMethod</span><span class=o>(</span><span class=s1>&#39;POST&#39;</span><span class=o>)</span>
<span class=w>    </span><span class=n>httpConnector</span><span class=o>.</span><span class=na>setDoOutput</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>

<span class=w>    </span><span class=n>httpConnector</span><span class=o>.</span><span class=na>setRequestProperty</span><span class=o>(</span><span class=s2>&quot;Accept&quot;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;application/json&#39;</span><span class=o>)</span>
<span class=w>    </span><span class=n>httpConnector</span><span class=o>.</span><span class=na>setRequestProperty</span><span class=o>(</span><span class=s2>&quot;Content-Type&quot;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;application/json&#39;</span><span class=o>)</span>
<span class=w>    </span><span class=n>httpConnector</span><span class=o>.</span><span class=na>setRequestProperty</span><span class=o>(</span><span class=s2>&quot;PRIVATE-TOKEN&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitlabToken}&quot;</span><span class=o>)</span>
<span class=w>    </span><span class=n>httpConnector</span><span class=o>.</span><span class=na>outputStream</span><span class=o>.</span><span class=na>write</span><span class=o>(</span><span class=n>requestBody</span><span class=o>.</span><span class=na>getBytes</span><span class=o>(</span><span class=s2>&quot;UTF-8&quot;</span><span class=o>))</span>
<span class=w>    </span><span class=n>httpConnector</span><span class=o>.</span><span class=na>connect</span><span class=o>()</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>httpConnector</span><span class=o>.</span><span class=na>responseCode</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>201</span><span class=o>)</span>
<span class=w>        </span><span class=n>println</span><span class=o>(</span><span class=s2>&quot;[JENKINS][DEBUG] Webhook for job ${jobName} has been created\r\n&quot;</span><span class=o>)</span>
<span class=w>    </span><span class=k>else</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=n>println</span><span class=o>(</span><span class=s2>&quot;[JENKINS][ERROR] Responce code - ${httpConnector.responseCode}&quot;</span><span class=o>)</span>
<span class=w>        </span><span class=kt>def</span><span class=w> </span><span class=n>response</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>JsonSlurper</span><span class=o>().</span><span class=na>parseText</span><span class=o>(</span><span class=n>httpConnector</span><span class=o>.</span><span class=na>errorStream</span><span class=o>.</span><span class=na>getText</span><span class=o>(</span><span class=s1>&#39;UTF-8&#39;</span><span class=o>))</span>
<span class=w>        </span><span class=n>println</span><span class=o>(</span><span class=s2>&quot;[JENKINS][ERROR] Failed to create webhook for job ${jobName}. Response - ${response}&quot;</span><span class=o>)</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>checkWebHookExist</span><span class=o>(</span><span class=n>apiUrl</span><span class=o>,</span><span class=w> </span><span class=n>jobWebhookUrl</span><span class=o>,</span><span class=w> </span><span class=n>gitlabToken</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=n>println</span><span class=o>(</span><span class=s2>&quot;[JENKINS][DEBUG] Checking if webhook ${jobWebhookUrl} exists&quot;</span><span class=o>)</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>httpConnector</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>URL</span><span class=o>(</span><span class=n>apiUrl</span><span class=o>).</span><span class=na>openConnection</span><span class=o>()</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>HttpURLConnection</span>
<span class=w>    </span><span class=n>httpConnector</span><span class=o>.</span><span class=na>setRequestMethod</span><span class=o>(</span><span class=s1>&#39;GET&#39;</span><span class=o>)</span>
<span class=w>    </span><span class=n>httpConnector</span><span class=o>.</span><span class=na>setDoOutput</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>

<span class=w>    </span><span class=n>httpConnector</span><span class=o>.</span><span class=na>setRequestProperty</span><span class=o>(</span><span class=s2>&quot;Accept&quot;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;application/json&#39;</span><span class=o>)</span>
<span class=w>    </span><span class=n>httpConnector</span><span class=o>.</span><span class=na>setRequestProperty</span><span class=o>(</span><span class=s2>&quot;Content-Type&quot;</span><span class=o>,</span><span class=w> </span><span class=s1>&#39;application/json&#39;</span><span class=o>)</span>
<span class=w>    </span><span class=n>httpConnector</span><span class=o>.</span><span class=na>setRequestProperty</span><span class=o>(</span><span class=s2>&quot;PRIVATE-TOKEN&quot;</span><span class=o>,</span><span class=w> </span><span class=s2>&quot;${gitlabToken}&quot;</span><span class=o>)</span>
<span class=w>    </span><span class=n>httpConnector</span><span class=o>.</span><span class=na>connect</span><span class=o>()</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>(</span><span class=n>httpConnector</span><span class=o>.</span><span class=na>responseCode</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>200</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>        </span><span class=kt>def</span><span class=w> </span><span class=n>response</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>JsonSlurper</span><span class=o>().</span><span class=na>parseText</span><span class=o>(</span><span class=n>httpConnector</span><span class=o>.</span><span class=na>inputStream</span><span class=o>.</span><span class=na>getText</span><span class=o>(</span><span class=s1>&#39;UTF-8&#39;</span><span class=o>))</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>response</span><span class=o>.</span><span class=na>find</span><span class=w> </span><span class=o>{</span><span class=w> </span><span class=n>it</span><span class=o>.</span><span class=na>url</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>jobWebhookUrl</span><span class=w> </span><span class=o>}</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kc>false</span>
<span class=w>    </span><span class=o>}</span>
<span class=o>}</span>

<span class=kt>def</span><span class=w> </span><span class=nf>getSecretValue</span><span class=o>(</span><span class=n>name</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>creds</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>com</span><span class=o>.</span><span class=na>cloudbees</span><span class=o>.</span><span class=na>plugins</span><span class=o>.</span><span class=na>credentials</span><span class=o>.</span><span class=na>CredentialsProvider</span><span class=o>.</span><span class=na>lookupCredentials</span><span class=o>(</span>
<span class=w>            </span><span class=n>com</span><span class=o>.</span><span class=na>cloudbees</span><span class=o>.</span><span class=na>plugins</span><span class=o>.</span><span class=na>credentials</span><span class=o>.</span><span class=na>common</span><span class=o>.</span><span class=na>StandardCredentials</span><span class=o>.</span><span class=na>class</span><span class=o>,</span>
<span class=w>            </span><span class=n>Jenkins</span><span class=o>.</span><span class=na>instance</span><span class=o>,</span>
<span class=w>            </span><span class=kc>null</span><span class=o>,</span>
<span class=w>            </span><span class=kc>null</span>
<span class=w>    </span><span class=o>)</span>

<span class=w>    </span><span class=kt>def</span><span class=w> </span><span class=n>secret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>creds</span><span class=o>.</span><span class=na>find</span><span class=w> </span><span class=o>{</span><span class=w> </span><span class=n>it</span><span class=o>.</span><span class=na>properties</span><span class=o>[</span><span class=s1>&#39;id&#39;</span><span class=o>]</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>secret</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>secret</span><span class=o>[</span><span class=s1>&#39;secret&#39;</span><span class=o>]</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kc>null</span>
<span class=o>}</span>
</code></pre></div> </details> <p>After the steps above are performed, the new custom job-provision will be available in <strong>Advanced Settings</strong> during the application creation in the EDP Portal UI:</p> <p> <figure><a data-caption="Gitlab job provision" data-fancybox=gallery href=../../assets/operator-guide/gitlab-job-provision.png><img alt="Gitlab job provision" src=../../assets/operator-guide/gitlab-job-provision.png title="Gitlab job provision" width=600px></a><figcaption>Gitlab job provision</figcaption> </figure> </p> </li> </ol> <h2 id=related-articles>Related Articles<a class=headerlink href=#related-articles title="Permanent link">âš“ï¸Ž</a></h2> <ul> <li><a href=../../user-guide/container-stages>CI Pipeline for Container</a></li> <li><a href=../gitlab-integration/ >GitLab Webhook Configuration</a></li> <li><a href=../github-integration/ >GitHub Webhook Configuration</a></li> <li><a href=../import-strategy-jenkins/ >Integrate GitHub/GitLab in Jenkins</a></li> <li><a href=../import-strategy-tekton/ >Integrate GitHub/GitLab in Tekton</a></li> </ul> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by using our <a href=... target=_blank rel=noopener>feedback form</a>. </div> </div> </div> </fieldset> </form> </article> </div> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <!-- Copyright and theme information --> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2018 - 2023 EPAM Delivery Platform - <a href=#__consent>Change cookie settings</a> </div> powered by <a href=https://www.mkdocs.org title=MkDocs>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ title="Material for MkDocs"> Material for MkDocs</a> </div> <div class=md-social> <a href=https://www.youtube.com/@theplatformteam target=_blank rel=noopener title=www.youtube.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg> </a> <a href=https://medium.com/epam-delivery-platform target=_blank rel=noopener title=medium.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M180.5 74.262C80.813 74.262 0 155.633 0 256s80.819 181.738 180.5 181.738S361 356.373 361 256 280.191 74.262 180.5 74.262Zm288.25 10.646c-49.845 0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559c0-94.503-40.4-171.095-90.248-171.095Zm139.506 17.821c-17.526 0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271Z"/></svg> </a> <a href=https://hub.docker.com/u/epamedp target=_blank rel=noopener title=hub.docker.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg> </a> <a href=mailto:SupportEPMD-EDP@epam.com target=_blank rel=noopener title class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.7l167.6-182.9c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input class=md-toggle type=checkbox id=__settings checked> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=analytics checked> <span class=task-list-indicator></span> Google Analytics </label> </li> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">Accept</button> <button type=reset class="md-button md-button--primary">Reject</button> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.code.copy", "navigation.sections", "navigation.tabs", "navigation.top", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.220ee61c.min.js></script> <script src=../../js/mkdocs-charts-plugin.js></script> <script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script> <script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script> <script src=https://cdn.jsdelivr.net/npm/vega@5></script> <script src=https://cdn.jsdelivr.net/npm/vega-lite@5></script> <script src=https://cdn.jsdelivr.net/npm/vega-embed@6></script> <script src=https://unpkg.com/mermaid@8.14.0/dist/mermaid.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.6.6/lottie.min.js></script> <script src=../../overrides/animation.js></script> </body> </html>